
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <!-- **** CHANGED TITLE **** -->
    <title>Invertebrates & Microorganisms - Interactive Lesson</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
    <style>
/* === Enhanced Review Page Formatting === */

/* Container for each heading + its controls */
.review-heading-container {
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    padding-bottom: 0.25rem;
    border-bottom: 2px solid var(--color-primary);
}
.review-heading-container:first-child {
     margin-top: 0.5rem;
}

/* The actual H3 heading text */
.review-heading {
    font-weight: 700;
    font-size: 1.3em;
    color: var(--color-primary-dark);
    line-height: 1.3;
}
.review-heading .translatable-segment {
    font-weight: 700;
    font-size: 1em;
    color: var(--color-primary-dark);
}

/* The UL list container */
.review-list {
    list-style: none;
    padding-left: 0;
    margin-left: 1rem;
    margin-bottom: 1.5rem;
}

/* Each LI list item (using block-container structure) */
.review-list-item {
    padding-left: 1.75rem;
    margin-bottom: 0.6rem;
    position: relative;
    align-items: center;
}

/* Custom Bullet Point Styling */
.review-list-item::before {
    content: "✓";
    position: absolute;
    left: 0.25rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-primary);
    font-weight: bold;
    font-size: 1.1em;
    line-height: 1;
}

/* Ensure text within list items is standard size */
.review-list-item .translatable-segment {
     font-size: 1.05em;
     line-height: var(--line-height-base);
}

/* Optional: Background/Border for the whole review content area */
#review-content-page25,
#review-content-page26,
#review-content-page27 {
    background-color: #f8f9fa;
    padding: 1.5rem;
    border-radius: var(--border-radius-small);
    border: 1px solid var(--color-border);
    margin-top: 1rem;
    --tw-space-y-reverse: 1;
}
        /* --- Base Styles --- */
        body, h1, h2, h3, p, button, input, label, footer, div, span, ul, li, img { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--color-background); }

        /* --- CSS Variables --- */
        :root {
            --font-primary: 'Poppins', sans-serif;
            /* **** UPDATED COLORS - Using Blue/Purple theme **** */
            --color-primary: #3b82f6; /* Blue-500 */
            --color-primary-dark: #1d4ed8; /* Blue-700 */
            --color-secondary: #6b7280; /* Gray */
            --color-accent-success: #16a34a; /* Darker Green (Keep for success messages) */
            --color-accent-success-light: #dcfce7; /* Light Green (Keep for success messages) */
            --color-accent-error: #dc3545; /* Red (Keep for error messages) */
            --color-accent-error-light: #f8d7da; /* Keep for error messages */
            --color-accent-highlight: #fef9c3; /* Light Yellow for TTS */
            --color-text-primary: #1f2937; /* Dark Gray */
            --color-text-secondary: #4b5563; /* Medium Gray */
            --color-text-light: #ffffff;
            --color-background: #f9fafb; /* Very Light Gray Page background */
            --color-container-bg: #ffffff; /* Content area background */
            --color-border: #e5e7eb; /* Light Gray Border */
            --shadow-main: 0 4px 15px rgba(0, 0, 0, 0.08);
            --border-radius-main: 15px;
            --border-radius-small: 8px;
            --line-height-base: 1.6;
             /* Difficulty Button Specific Colors */
            --color-easy-bg: #3b82f6; /* Blue-500 */
            --color-easy-border: #1d4ed8; /* Blue-700 */
            --color-easy-hover: #2563eb; /* Blue-600 */
            --color-challenge-bg: #8b5cf6; /* Purple-500 */
            --color-challenge-border: #6d28d9; /* Purple-700 */
            --color-challenge-hover: #7c3aed; /* Purple-600 */
            --color-challenge-text: #ffffff;
        }

        /* --- Basic Layout & Text --- */
        .block-container { display: flex; align-items: flex-start; margin-bottom: 0.75rem; position: relative; }
        .content-wrapper { flex-grow: 1; overflow-wrap: break-word; word-wrap: break-word; }
        /* Tailwind space-y equivalent */
        .space-y-3 > *:not([hidden]) ~ *:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(0.75rem * var(--tw-space-y-reverse)); }
        .text-gray-700 { color: var(--color-text-secondary); }
        .text-lg { font-size: 1.125rem; } /* Default text size */
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .leading-relaxed { line-height: var(--line-height-base); }
        .content-area {
            background-color: var(--color-container-bg);
            border-radius: var(--border-radius-main);
            box-shadow: var(--shadow-main);
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
        }
        .page-title {
            font-size: 2.25rem; /* Larger for page titles */
            font-weight: 700;
             /* **** UPDATED PAGE TITLE COLOR **** */
            color: var(--color-primary);
            margin-bottom: 1rem;
            text-align: center;
        }
        .centered-image {
            display: block;
            margin-left: auto;
            margin-right: auto;
            max-width: 80%; /* Adjust as needed */
            height: auto;
            margin-top: 1rem;
            margin-bottom: 1rem;
            border-radius: var(--border-radius-small);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        /* Style for activity instructions or separators */
         .activity-description, .transition-text {
            background-color: #eef2ff; /* Light Indigo */
            border-left: 4px solid #6366f1; /* Indigo border */
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius-small);
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            color: #4338ca; /* Darker Indigo text */
            font-size: 1.1rem;
            text-align: center;
         }
         .activity-description i, .transition-text i {
            margin-right: 0.5rem;
         }


         /* --- Page Visibility Control --- */
        .page-content {
            display: none; /* Hide all pages by default */
        }
        .page-content.active {
            display: block; /* Show only the active page */
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Difficulty Selection (Page 0) --- */
        .difficulty-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .difficulty-button {
            padding: 1rem 2rem;
            font-size: 1.25rem;
            font-weight: 600;
            border-radius: var(--border-radius-main);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-main);
            width: 80%;
            max-width: 300px;
            text-align: center;
            color: white; /* Text color for both buttons */
        }
        /* **** UPDATED DIFFICULTY BUTTON COLORS **** */
        .difficulty-button.easy {
            background-color: var(--color-easy-bg);
            border: 2px solid var(--color-easy-border);
        }
        .difficulty-button.easy:hover {
            background-color: var(--color-easy-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .difficulty-button.challenge {
            background-color: var(--color-challenge-bg);
            border: 2px solid var(--color-challenge-border);
            color: var(--color-challenge-text); /* Ensure text color contrasts if background changes */
        }
         .difficulty-button.challenge:hover {
            background-color: var(--color-challenge-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }


         /* --- ELL Controls (Paragraphs/Headings) --- */
        .ell-controls { display: inline-flex; gap: 0.5rem; margin-left: 0.75rem; flex-shrink: 0; padding-top: 0.1rem; vertical-align: middle;}
        .ell-btn { background: #e5e7eb; border-radius: 50%; width: 1.75rem; height: 1.75rem; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem; border: none; color: #374151; }
        .ell-btn:hover { background: #d1d5db; transform: scale(1.1); }

        /* --- TTS Highlighting & Hidden Elements --- */
        .translatable-segment.highlight {
            background-color: var(--color-accent-highlight);
            color: var(--color-text-primary);
            border-radius: var(--border-radius-small);
            padding: 0 0.2em;
            margin: 0 -0.2em;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
            transition: background-color 0.1s ease-in-out;
        }
        span[aria-hidden="true"], .hidden-emoji { user-select: none; /* Make emojis non-selectable */ /* opacity: 0.8; */ /* Optional: slightly fade emojis */ }

        /* --- QUIZ STYLING (Mostly unchanged, adapted colors) --- */
        .quiz-container {
            background-color: #f3f4f6; /* Lighter Gray */
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-main);
            padding: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        .quiz-block {
            margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px dashed var(--color-border);
        }
        .quiz-block:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
        .quiz-question {
            font-weight: 600; margin-bottom: 15px; font-size: 1.1rem; color: var(--color-text-primary); display: flex; align-items: flex-start;
        }
        .quiz-question .translatable-segment { flex-grow: 1; margin-right: 5px; }
        .quiz-options { display: flex; flex-direction: column; gap: 10px; min-height: 50px; /* Prevent collapsing during content injection */ }
        .option-group { display: flex; align-items: center; gap: 10px; }
        .quiz-option-button {
            flex-grow: 1; text-align: left; background-color: var(--color-container-bg); color: var(--color-text-primary);
            border: 1px solid var(--color-border); border-radius: var(--border-radius-small); padding: 10px 15px;
            font-size: 1rem; font-family: var(--font-primary); cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
        }
        .quiz-option-button:hover:not(:disabled) { background-color: #e9ecef; border-color: #adb5bd; }
        .quiz-option-button:active:not(:disabled) { transform: scale(0.98); }
        .quiz-option-button:disabled { cursor: default; opacity: 0.8; }
        .option-icons { display: inline-flex; align-items: center; gap: 3px; flex-shrink: 0; }
        .tts-button, .translate-button {
            background-color: transparent; color: var(--color-secondary); padding: 0; font-size: 1rem; line-height: 1;
            border-radius: 50%; width: 28px; height: 28px; display: inline-flex; justify-content: center; align-items: center;
            border: none; cursor: pointer; transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .tts-button:hover, .translate-button:hover { background-color: rgba(0, 0, 0, 0.08); transform: scale(1.1); }
        .tts-translate-wrapper { display: inline-flex; align-items: center; margin-left: 5px; vertical-align: middle; flex-shrink: 0; gap: 3px;}
        .quiz-block.answered .quiz-option-button { cursor: default; }
        .quiz-block.answered .quiz-option-button:not(.correct):not(.incorrect) { opacity: 0.7; background-color: #f8f9fa; }
        .quiz-option-button.correct { background-color: var(--color-accent-success-light) !important; border-color: var(--color-accent-success) !important; color: var(--color-accent-success) !important; font-weight: 600; opacity: 1 !important; }
        .quiz-option-button.incorrect { background-color: var(--color-accent-error-light) !important; border-color: var(--color-accent-error) !important; color: var(--color-accent-error) !important; opacity: 1 !important; }
        .quiz-feedback { margin-top: 15px; padding: 10px 15px; border-radius: var(--border-radius-small); font-size: 0.9rem; display: none; border-left-width: 4px; border-style: solid; align-items: flex-start; }
        .quiz-feedback.correct { background-color: var(--color-accent-success-light); color: var(--color-accent-success); border-color: var(--color-accent-success); display: flex; animation: bounceCorrect 0.5s ease; }
        .quiz-feedback.incorrect { background-color: var(--color-accent-error-light); color: var(--color-accent-error); border-color: var(--color-accent-error); display: flex; animation: shakeIncorrect 0.5s ease; }
        .quiz-feedback .translatable-segment { display: inline; flex-grow: 1; margin-right: 5px; }
        .quiz-feedback .tts-translate-wrapper { margin-left: auto; flex-shrink: 0; }
        .quiz-feedback:empty { display: none; }
        @keyframes bounceCorrect { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        @keyframes shakeIncorrect { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }

        /* --- Gamification (+1 Effect) --- */
        .plus-one-effect { position: absolute; font-size: 1.5rem; color: var(--color-accent-success); font-weight: bold; opacity: 0; animation: plusOneAnim 1s ease-out forwards; pointer-events: none; z-index: 100; background-color: rgba(255, 255, 255, 0.6); padding: 0 5px; border-radius: 5px; }
        @keyframes plusOneAnim { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-40px) scale(1.3); opacity: 0; } }

        /* --- Global TTS Controls --- */
        #global-tts-controls { position: fixed; bottom: 1rem; left: 1rem; background: #374151; color: white; padding: 0.75rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 50; display: flex; align-items: center; gap: 1rem; }
        #global-tts-controls label { font-size: 0.875rem; font-weight: 500; }
        #tts-speed { width: 6rem; height: 0.5rem; background: #4b5563; border-radius: 9999px; appearance: none; cursor: pointer; accent-color: #60a5fa; } /* Blue accent for slider */
        #speed-value { font-size: 0.75rem; width: 2rem; text-align: right; }
        #tts-stop { background: #ef4444; hover:bg-red-700; color: white; font-weight: 500; font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 0.375rem; display: flex; align-items: center; gap: 0.25rem; border: none; cursor: pointer; }
        #tts-stop i { font-size: 0.65rem; }

        /* --- Navigation Buttons --- */
         #navigation-controls {
             display: flex; /* Initially hidden until difficulty is selected */
             justify-content: space-between;
             margin-top: 2rem;
             padding: 0 1rem; /* Add some padding */
         }
         .nav-button {
             display: inline-flex;
             align-items: center;
             gap: 0.5rem; /* Space between icon and text */
             /* **** UPDATED NAV BUTTON COLOR **** */
             background-color: var(--color-primary);
             color: white;
             font-weight: bold;
             padding: 0.75rem 1.5rem;
             border-radius: var(--border-radius-main);
             transition: all 0.2s ease;
             box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             border: none;
             cursor: pointer;
         }
         .nav-button:hover:not(:disabled) {
            /* **** UPDATED NAV BUTTON HOVER COLOR **** */
             background-color: var(--color-primary-dark);
             box-shadow: 0 4px 8px rgba(0,0,0,0.15);
             transform: translateY(-1px);
         }
         .nav-button.back {
             background-color: var(--color-secondary);
         }
         .nav-button.back:hover:not(:disabled) {
             background-color: #525a63; /* Darker gray */
         }
         .nav-button:disabled {
             opacity: 0.5;
             cursor: not-allowed;
             box-shadow: none;
             transform: none;
         }
         /* Hide nav controls initially */
         #navigation-controls { display: none; }

        /* --- Finish Screen --- */
        .finish-screen-content {
            text-align: center;
            padding: 2rem;
        }
        .finish-score {
            font-size: 1.5rem;
            font-weight: 600;
             /* **** UPDATED FINISH SCORE COLOR **** */
            color: var(--color-primary); /* Use primary color */
            margin: 1rem 0;
        }
        .play-again-button {
            margin-top: 2rem;
            /* Uses nav-button styles */
        }

        /* --- Activity/Interaction Placeholder Styles (Adapt as needed) --- */
        .activity-container {
            background-color: #f0f9ff; /* Very light blue */
            border: 1px dashed #7dd3fc; /* Light sky blue */
            border-radius: var(--border-radius-main);
            padding: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
            text-align: center;
        }
         .activity-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
         }
        /* Styles for draggable items and drop zones (Example) */
         .draggable-item {
            display: inline-block;
            padding: 0.5rem;
            margin: 0.3rem;
            background-color: var(--color-container-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-small);
            cursor: grab;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
            user-select: none; /* Prevent text selection while dragging */
         }
         .draggable-item:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: var(--shadow-main);
         }
         .drop-zone {
            border: 2px dashed #a5b4fc; /* Indigo-300 */
            background-color: #eef2ff; /* Indigo-50 */
            padding: 1rem;
            margin-top: 1rem;
            min-height: 80px;
            border-radius: var(--border-radius-small);
            transition: background-color 0.2s ease;
         }
         .drop-zone.drag-over {
            background-color: #c7d2fe; /* Indigo-200 */
            border-style: solid;
         }
         .drop-zone h4 {
            color: #4f46e5; /* Indigo-600 */
            font-weight: 600;
            margin-bottom: 0.5rem;
         }


        /* --- Responsive --- */
        @media (max-width: 768px) {
            .content-area { padding: 1rem 1.5rem; }
            .page-title { font-size: 1.8rem; }
            .quiz-option-button { padding: 8px 12px; font-size: 0.9rem;}
            .quiz-question { font-size: 1rem; }
            .tts-button, .translate-button { width: 24px; height: 24px; font-size: 0.9rem;}
            .ell-btn { width: 1.5rem; height: 1.5rem; font-size: 0.8rem;}
            .option-group { flex-wrap: wrap; }
            .quiz-option-button { flex-basis: calc(100% - 70px); } /* Adjust based on icon size */
            .option-icons { flex-basis: 60px; justify-content: flex-end; }
            .nav-button { padding: 0.6rem 1.2rem; font-size: 0.9rem;}
            .difficulty-button { padding: 0.8rem 1.5rem; font-size: 1.1rem; }
            #global-tts-controls { flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.5rem; }
            #tts-speed { width: 8rem; }
            .activity-description, .transition-text { padding: 0.8rem 1rem; font-size: 1rem; }
        }
         @media (max-width: 480px) {
             .content-area { padding: 1rem; }
             .page-title { font-size: 1.5rem; }
             .option-group { gap: 5px; }
             .quiz-option-button { flex-basis: calc(100% - 60px); }
             .option-icons { flex-basis: 50px; }
             .nav-button { padding: 0.5rem 1rem; font-size: 0.8rem;}
             .difficulty-button { padding: 0.7rem 1rem; font-size: 1rem; width: 90%; }
             #global-tts-controls label { display: none; } /* Hide label on very small screens */
             #tts-speed { width: 6rem; }
             #speed-value { min-width: 2.5rem; }
             .draggable-item { padding: 0.4rem; margin: 0.2rem; font-size: 0.9rem;}
             .drop-zone { padding: 0.8rem; min-height: 60px; }
             .activity-description, .transition-text { font-size: 0.95rem; }
         }
    </style>
</head>
<body class="bg-gray-50"> <!-- Slightly different bg color -->
<!-- **** UPDATED HEADER COLOR AND TEXT **** -->
<header class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 shadow-lg sticky top-0 z-40">
    <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-lg md:text-xl font-bold tracking-wide" id="main-header-title">Invertebrates & Microorganisms</h1>
        <div class="score-area bg-white text-blue-800 px-4 py-1 rounded-full shadow-inner" id="score-area-container" style="display: none;"> <!-- Initially hidden -->
            Score: <span class="font-bold text-lg" id="current-score">0</span>
        </div>
    </div>
</header>

<main class="container mx-auto p-4 md:p-6 max-w-4xl mt-4 mb-20 relative" id="lesson-container"> <!-- Increased bottom margin -->

    <!-- ================== PAGE 0: TITLE / DIFFICULTY SELECT ================== -->
    <!-- Note: Page index starts at 0 for the welcome screen -->
    <div class="page-content active" data-title="Welcome!" id="page-0">
        <div class="content-area text-center">
            <!-- **** UPDATED PAGE 0 CONTENT **** -->
            <h2 class="text-3xl font-bold text-blue-700 mb-4">Welcome! <span aria-hidden="true">👋</span></h2>
            <h3 class="text-xl font-semibold text-indigo-600 mb-4">Let's Learn About Animals and Tiny Life! <span aria-hidden="true">✨</span></h3>

            <!-- Paragraphs for introduction - added translatable segments and controls -->
            <div class="space-y-3 text-gray-700 text-lg leading-relaxed mb-6">
                <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">We will learn about animals with NO backbone. <span aria-hidden="true">🚫🦴</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">We will also learn about living things so small you need a special tool to see them! <span aria-hidden="true">🔬</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">Choose how you want to learn today. <span aria-hidden="true">👇</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
            </div>

            <div class="difficulty-selector">
                <button class="difficulty-button easy" onclick="selectDifficulty('easy')">
                    <i class="fas fa-smile mr-2"></i> Easy English <span aria-hidden="true">😊</span>
                </button>
                <button class="difficulty-button challenge" onclick="selectDifficulty('challenge')">
                    <i class="fas fa-brain mr-2"></i> Challenge English <span aria-hidden="true">🤔</span>
                </button>
            </div>
        </div>
    </div> <!-- End page-0 -->

    <!-- ================== PAGE 1: Defining Invertebrates & Exoskeletons ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="What are Invertebrates?" id="page-1">
        <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🚫🦴</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page1">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page1-q1">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page1-q2">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page1-q3">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-1 -->

    <!-- ================== PAGE 2: Introducing Insects ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="What are Insects?" id="page-2">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🦋</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page2">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page2-q4">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page2-q5">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page2-q6">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-2 -->
    <!-- ================== PAGE 3: Insect Anatomy: Three Segments ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Insect Body Parts" id="page-3">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🐞</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page3">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page3-q7">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page3-q8">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page3-q9">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-3 -->

     <!-- ================== PAGE 4: Specific Insect Features ================== -->
     <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="More About Insects" id="page-4">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🐝</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page4">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page4-q10">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page4-q11">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page4-q12">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-4 -->

    <!-- ================== PAGE 4.5: Insect Examples ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 5 for this 'half' page -->
    <div class="page-content" data-title="Kinds of Insects" id="page-5">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🐜🌸🐛</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page5">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs (start from q13) **** -->
                <div class="quiz-block" data-quiz-id="page5-q13">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page5-q14">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page5-q15">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-5 -->

    <!-- ================== PAGE 4.6: Activity: Draw an Insect! ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 6 for this 'half' page -->
    <div class="page-content" data-title="Activity: Draw an Insect!" id="page-6">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🎨🖍️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>

            <!-- Activity Instructions -->
            <div class="activity-description">
                <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment"><!-- Instruction Text injected by JS --></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
            </div>

            <!-- List of requirements -->
             <ul class="list-none list-inside space-y-2 pl-4 text-lg text-gray-700" id="activity-checklist-page6">
                 <!-- List items injected by JS using list-item-template -->
                 <!-- Example structure (will be replaced by JS): -->
                 <!--
                 <li>
                     <span class="translatable-segment">3 Body Parts (Head, Thorax, Abdomen)</span>
                     <span class="ell-controls inline-flex"> ... controls ... </span>
                 </li>
                  -->
             </ul>

             <!-- Placeholder for drawing area or visual cue -->
             <div class="mt-6 text-center text-gray-500 italic">
                 (Draw on your own paper!) <span aria-hidden="true">📄➡️✏️</span>
             </div>

             <!-- This page has no quiz -->
             <div class="quiz-container" style="display: none;">
                  <!-- Keep the container structure for consistency, but hide it -->
             </div>

        </div>
    </div> <!-- End page-6 -->
    <!-- ================== PAGE 5: Introducing Arachnids ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 7 -->
    <div class="page-content" data-title="What are Arachnids?" id="page-7">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🕷️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page7">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q16) **** -->
                <div class="quiz-block" data-quiz-id="page7-q16">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page7-q17">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page7-q18">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-7 -->

    <!-- ================== PAGE 6: Distinctive Arachnid Anatomy ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 8 -->
    <div class="page-content" data-title="Arachnid Body Parts" id="page-8">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🦵🦵🦵🦵</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page8">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q19) **** -->
                <div class="quiz-block" data-quiz-id="page8-q19">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page8-q20">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page8-q21">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-8 -->

    <!-- ================== PAGE 6.5: Arachnid Examples & Venom ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 9 -->
    <div class="page-content" data-title="Kinds of Arachnids & Venom" id="page-9">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">☠️🕸️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page9">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q22) **** -->
                <div class="quiz-block" data-quiz-id="page9-q22">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page9-q23">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page9-q24">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-9 -->

    <!-- ================== PAGE 6.6: Comparing Insects & Arachnids ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 10 -->
    <div class="page-content" data-title="Insect or Arachnid?" id="page-10">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🦋 vs 🕷️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page10">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q25) **** -->
                <div class="quiz-block" data-quiz-id="page10-q25">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page10-q26">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page10-q27">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-10 -->
    <!-- ================== PAGE 7: Introducing Mollusks ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 11 -->
    <div class="page-content" data-title="What are Mollusks?" id="page-11">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🐌🐙🐚</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page11">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q28) **** -->
                <div class="quiz-block" data-quiz-id="page11-q28">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page11-q29">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page11-q30">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-11 -->

    <!-- ================== PAGE 8: Mollusk Anatomy & Diversity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 12 -->
    <div class="page-content" data-title="More About Mollusks" id="page-12">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🦶💧🌳</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page12">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q31) **** -->
                <div class="quiz-block" data-quiz-id="page12-q31">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page12-q32">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page12-q33">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-12 -->

    <!-- ================== PAGE 9: Focus: Gastropods (Snails & Slugs) ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 13 -->
    <div class="page-content" data-title="Snails & Slugs" id="page-13">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🐌🚫🐚</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page13">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q34) **** -->
                <div class="quiz-block" data-quiz-id="page13-q34">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page13-q35">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page13-q36">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-13 -->

    <!-- ================== PAGE 10: Focus: Bivalves (Clams, Oysters) ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 14 -->
    <div class="page-content" data-title="Clams & Oysters" id="page-14">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🦪✌️🐚</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page14">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q37) **** -->
                <div class="quiz-block" data-quiz-id="page14-q37">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page14-q38">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page14-q39">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-14 -->

     <!-- ================== PAGE 11: Activity: Mollusk Sort! ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 15 -->
    <div class="page-content" data-title="Activity: Shell or No Shell?" id="page-15">
        <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">➡️🐚🚫🐚</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>

            <!-- Activity Instructions -->
            <div class="activity-description">
                <div class="block-container justify-center">
                     <div class="content-wrapper"><p class="translatable-segment"><!-- Instruction Text injected by JS --></p></div>
                     <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
            </div>

            <!-- Activity Container -->
            <div class="activity-container" id="mollusk-sort-activity">
                <h3 class="activity-title">Drag the animals!</h3>
                 <!-- Draggable Items Area -->
                <div id="draggable-mollusks" class="mb-4">
                    <!-- Draggable items will be added by JS -->
                    <!-- Example: <span class="draggable-item" draggable="true" data-group="shell">Snail 🐌</span> -->
                </div>
                 <!-- Drop Zones -->
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <div id="drop-zone-shell" class="drop-zone flex-1" data-group="shell">
                        <h4><!-- Drop Zone Title 1 injected by JS --></h4>
                        <!-- Dropped items will appear here -->
                    </div>
                    <div id="drop-zone-no-shell" class="drop-zone flex-1" data-group="no-shell">
                         <h4><!-- Drop Zone Title 2 injected by JS --></h4>
                         <!-- Dropped items will appear here -->
                    </div>
                </div>
                <button class="nav-button mt-6" id="check-sort-button" onclick="checkMolluskSort()">Check Answers</button>
                 <p id="sort-feedback" class="mt-3 font-semibold"></p> <!-- Feedback message -->
            </div>
             <!-- This page has no standard quiz container -->
        </div>
    </div> <!-- End page-15 -->

     <!-- ================== PAGE 12: Focus: Cephalopods (Octopus) ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 16 -->
    <div class="page-content" data-title="The Smart Octopus" id="page-16">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🐙🧠</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page16">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q40) **** -->
                <div class="quiz-block" data-quiz-id="page16-q40">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page16-q41">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page16-q42">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-16 -->

    <!-- ================== PAGE 13: Unique Octopus Adaptations ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 17 -->
    <div class="page-content" data-title="Cool Octopus Tricks" id="page-17">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🎨💨❤️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page17">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q43) **** -->
                <div class="quiz-block" data-quiz-id="page17-q43">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page17-q44">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page17-q45">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-17 -->

    <!-- ================== PAGE 14: Where Do They Live? Activity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 18 -->
    <div class="page-content" data-title="Activity: Where Do They Live?" id="page-18">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🏠➡️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>

             <!-- Activity Instructions -->
             <div class="activity-description">
                <div class="block-container justify-center">
                     <div class="content-wrapper"><p class="translatable-segment"><!-- Instruction Text injected by JS --></p></div>
                     <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
             </div>

             <!-- Activity Container -->
             <div class="activity-container" id="habitat-match-activity">
                 <h3 class="activity-title">Drag the animal to its home!</h3>
                  <!-- Draggable Items Area -->
                 <div id="draggable-animals" class="mb-4">
                     <!-- Draggable items will be added by JS -->
                     <!-- Example: <span class="draggable-item" draggable="true" data-animal="ant">Ant 🐜</span> -->
                 </div>
                  <!-- Drop Zones (Habitat Images) - Arrange flex/grid as needed -->
                 <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4" id="habitat-drop-zones">
                     <!-- Drop zones (habitats) will be added by JS -->
                     <!-- Example:
                     <div class="drop-zone habitat-zone text-center" data-habitat="anthill">
                         <img src="anthill_icon.png" alt="Anthill/Soil" class="mx-auto h-16 mb-2">
                         <h4 class="text-sm">Soil/Anthill</h4>
                         <!-/- Dropped items appear here ->
                     </div>
                     -->
                 </div>
                 <button class="nav-button mt-6" id="check-habitat-button" onclick="checkHabitatMatch()">Check Answers</button>
                 <p id="habitat-feedback" class="mt-3 font-semibold"></p> <!-- Feedback message -->
             </div>
              <!-- This page has no standard quiz container -->
         </div>
    </div> <!-- End page-18 -->

    <!-- ================== TRANSITION SEPARATOR ================== -->
    <!-- Using page index 19 for this separator - it will look different -->
    <div class="page-content" data-title="Transition" id="page-19">
         <div class="content-area text-center">
             <!-- Using the transition style -->
             <div class="transition-text">
                 <div class="block-container justify-center">
                     <div class="content-wrapper"><p class="translatable-segment"><i class="fas fa-arrow-down"></i> We learned about animals without backbones <span aria-hidden="true">🚫🦴</span>. Now let's learn about other kinds of living things that are very, very small! <span aria-hidden="true">🔬</span></p></div>
                      <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
             </div>
              <!-- This page has no quiz -->
              <div class="quiz-container" style="display: none;"></div>
         </div>
    </div> <!-- End page-19 -->

    <!-- ================== PAGE 20: Introducing Microorganisms ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 20 -->
    <div class="page-content" data-title="Tiny Living Things" id="page-20">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🔬🦠</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page20">
                <!-- Dynamic content will be injected here by JS -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q46) **** -->
                <div class="quiz-block" data-quiz-id="page20-q46">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page20-q47">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page20-q48">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-20 -->

    <!-- ================== PAGE 21: Focus on Bacteria ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 21 -->
    <div class="page-content" data-title="Bacteria are Tiny" id="page-21">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🦠⚪|~</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page21">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q49) **** -->
                <div class="quiz-block" data-quiz-id="page21-q49">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page21-q50">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page21-q51">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-21 -->

    <!-- ================== PAGE 22: Good vs. Bad Bacteria ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 22 -->
    <div class="page-content" data-title="Good vs. Bad Bacteria" id="page-22">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">👍👎🦠</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page22">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q52) **** -->
                <div class="quiz-block" data-quiz-id="page22-q52">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page22-q53">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                <div class="quiz-block" data-quiz-id="page22-q54">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-22 -->

    <!-- ================== BONUS SECTION SEPARATOR ================== -->
    <!-- Using page index 23 for this separator -->
    <div class="page-content" data-title="Bonus Topic" id="page-23">
         <div class="content-area text-center">
             <!-- Using the transition style -->
             <div class="transition-text">
                 <div class="block-container justify-center">
                      <div class="content-wrapper"><p class="translatable-segment"><i class="fas fa-question-circle"></i> We learned about tiny bacteria <span aria-hidden="true">🦠</span>. But what about viruses <span aria-hidden="true">🦠</span>? <span aria-hidden="true">🤔</span></p></div>
                       <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
             </div>
              <!-- This page has no quiz -->
              <div class="quiz-container" style="display: none;"></div>
         </div>
    </div> <!-- End page-23 -->

    <!-- ================== PAGE 24: Bonus: What About Viruses? ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 24 -->
    <div class="page-content" data-title="Bonus: What About Viruses?" id="page-24">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🦠🤔</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page24">
                <!-- Dynamic content will be injected here by JS -->
            </div>
            <!-- Optional Check Questions (Not Scored) -->
           <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <div class="quiz-block" data-quiz-id="page24-q59">
                     <div class="quiz-question text-base"><span class="translatable-segment font-medium"><!-- Question injected --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options text-sm"> <!-- Options injected --> </div>
                </div>
                <div class="quiz-block" data-quiz-id="page24-q60">
                     <div class="quiz-question text-base"><span class="translatable-segment font-medium"><!-- Question injected --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options text-sm"> <!-- Options injected --> </div>
                </div>
           </div>
        </div>
    </div> <!-- End page-24 -->


    <!-- ================== PAGE 25: Invertebrate & Microorganism Review ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <!-- Using page index 25 -->
    <div class="page-content" data-title="Lesson Review" id="page-25">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">⭐</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <!-- Review text/list injected here -->
            <div class="space-y-3 text-gray-700 text-lg leading-relaxed" id="review-content-page25">
                 <!-- Review paragraphs/list items injected -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Final Quiz! <span aria-hidden="true">🏆</span></h3>
                 <!-- **** UPDATED Quiz IDs (start from q55) **** -->
                <div class="quiz-block" data-quiz-id="page25-q55">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page25-q56">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page25-q57">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- **** UPDATED Quiz IDs **** -->
                 <div class="quiz-block" data-quiz-id="page25-q58">
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-25 -->

    <!-- ================== PAGE 26: Review Arachnids & Mollusks ================== -->
    <div class="page-content" data-title="Review: Spiders & Snails" id="page-26">
        <div class="content-area">
            <div class="block-container mb-4">
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🕷️🐌</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="space-y-3 text-gray-700 text-lg leading-relaxed" id="review-content-page26">
                <!-- Review paragraphs injected -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">🕷️🐌</span></h3>
                <div class="quiz-block" data-quiz-id="page26-q57">
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page26-q58">
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-26 -->

    <!-- ================== PAGE 27: Review Microorganisms ================== -->
    <div class="page-content" data-title="Review: Tiny Life" id="page-27">
        <div class="content-area">
            <div class="block-container mb-4">
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🔬🦠</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></span></div>
            </div>
            <div class="space-y-3 text-gray-700 text-lg leading-relaxed" id="review-content-page27">
                <!-- Review paragraphs injected -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">🔬🦠</span></h3>
                <div class="quiz-block" data-quiz-id="page27-q59">
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page27-q60">
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-27 -->

    <!-- ================== PAGE 26: FINISH SCREEN ================== -->
    <!-- **** UPDATED page ID and data-title **** -->
    <!-- Using page index 26 -->
    <div class="page-content" data-title="Finish!" id="page-28">
        <div class="content-area">
            <div class="finish-screen-content">
                <div class="block-container justify-center mb-4">
                     <!-- **** UPDATED Finish Text (will be set by JS) **** -->
                    <div class="content-wrapper"><h2 class="text-4xl font-bold text-blue-700 translatable-segment" id="finish-title">🎉 Lesson Complete!</h2></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center mb-2">
                    <div class="content-wrapper"><p class="text-lg text-gray-700 translatable-segment" id="finish-subtitle">You learned so much!</p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center">
                    <!-- **** Score display updated by JS **** -->
                    <!-- **** UPDATED total-possible-score to 58 **** -->
                    <div class="content-wrapper"><p class="finish-score translatable-segment">Your Score: <span class="font-bold text-blue-600 text-xl" id="final-score">0</span> / <span id="total-possible-score">64</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center mt-4">
                    <div class="content-wrapper"><p class="text-lg text-gray-600 translatable-segment" id="finish-encouragement">Keep exploring the amazing world of tiny creatures! <span aria-hidden="true">✨👍</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <button class="nav-button play-again-button mt-12" onclick="resetProgress()">
                    <i class="fas fa-redo mr-2"></i> Play Again?
                </button>
            </div>
        </div>
    </div> <!-- End page-26 -->

</main> <!-- End of lesson-container -->

<!-- Navigation Controls (should be outside main content area) -->
<div class="container mx-auto p-4 md:p-6 max-w-4xl flex justify-between items-center mt-0 mb-20" id="navigation-controls"> <!-- Adjust margin as needed -->
    <button class="nav-button back" id="back-button" onclick="prevPage()">
        <i class="fas fa-arrow-left"></i> Back
    </button>
    <button class="nav-button" disabled="" id="next-button" onclick="nextPage()" title="Please answer all quiz questions or complete the activity first">
        Next <i class="fas fa-arrow-right"></i>
    </button>
</div>

<!-- Template for +1 animation -->
<div class="plus-one-effect" id="plus-one-template" style="display: none;">+1</div>

<!-- Template for Quiz Option Group (used by JS) -->
<template id="quiz-option-template">
    <div class="option-group">
        <button class="quiz-option-button"><span class="translatable-segment"></span></button>
        <div class="option-icons">
            <button aria-label="Read option" class="tts-button" onclick="speakText(this); event.stopPropagation();"><i class="fas fa-volume-up"></i></button>
            <button aria-label="Translate option" class="translate-button" onclick="translateSegment(this); event.stopPropagation();"><i class="fas fa-language"></i></button>
        </div>
    </div>
</template>

<!-- Template for List Item (used by JS) -->
<template id="list-item-template">
     <li>
        <!-- **** Structure for list item with controls **** -->
        <span class="translatable-segment"></span>
        <span class="ell-controls inline-flex">
             <button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button>
             <button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>
        </span>
     </li>
</template>

<!-- Template for Draggable Item (used by JS for activities) -->
<template id="draggable-item-template">
    <span class="draggable-item" draggable="true"></span>
</template>

<!-- Template for Drop Zone (used by JS for habitat activity) -->
<template id="habitat-drop-zone-template">
    <div class="drop-zone habitat-zone text-center">
        <img src="" alt="" class="mx-auto h-16 mb-2 habitat-image">
        <h4 class="text-sm habitat-name"><!-- Habitat name --></h4>
        <!-- Dropped items will appear here -->
    </div>
</template>


<!-- Global ELL Controls -->
<div id="global-tts-controls">
    <label class="text-sm font-medium hidden md:inline" for="tts-speed">Speed:</label>
    <input id="tts-speed" max="2" min="0.5" step="0.1" type="range" value="1"/>
    <span class="text-xs min-w-[2.5rem] text-right" id="speed-value">1.0x</span>
    <button id="tts-stop" title="Stop Reading">
        <i class="fas fa-stop"></i> Stop
    </button>
</div>

<!-- ============================== -->
<!--      JAVASCRIPT               -->
<!-- ============================== -->
<script>
    // --- State & Config ---
    let difficulty = null; // 'easy' or 'challenge'
    let currentPage = 0; // Start at page 0 (difficulty select)
    let currentScore = 0;
    const totalPages = 29; // **** UPDATED: 0 (welcome) to 28 (finish) = 29 pages ****
    const TRANSLATE_WINDOW_NAME = 'LessonTranslateWindow';
    const totalQuizzes = 64; // **** UPDATED: Total unique SCORED quiz identifiers ****
    let quizAnsweredState = {}; // Stores which quizzes on the *current* page are answered
    let activityCompletedState = {}; // Stores completion status for activities on the current page

    // --- Content Data (Invertebrates & Microorganisms Unit) ---
    // **** POPULATED pageContent with FULL INVERTEBRATE UNIT data ****
    const pageContent = {
        page0: { // Welcome Screen - Same Content
             easy: { title: "Welcome!", paragraphs: ["We will learn about animals with NO backbone. <span aria-hidden='true'>🚫🦴</span>", "We will also learn about living things so small you need a special tool to see them! <span aria-hidden='true'>🔬</span>", "Choose how you want to learn today. <span aria-hidden='true'>👇</span>"]},
             challenge: { title: "Welcome!", paragraphs: ["We will learn about animals with NO backbone. <span aria-hidden='true'>🚫🦴</span>", "We will also learn about living things so small you need a special tool to see them! <span aria-hidden='true'>🔬</span>", "Choose how you want to learn today. <span aria-hidden='true'>👇</span>"]}
        },
        page1: { // Defining Invertebrates & Exoskeletons
            easy: {
                title: "What are Invertebrates? <span aria-hidden='true'>🚫🦴</span>",
                paragraphs: [
                    "### What are <strong>Invertebrates</strong>? <span aria-hidden='true'>🚫🦴</span>",
                    "* They do NOT have a backbone.",
                    "* Many have a hard outside called an <strong>exoskeleton</strong> <span aria-hidden='true'>💪</span>.",
                    "* The exoskeleton protects them and helps them stand up.",
                    "!!! Most animals in the world are <strong>invertebrates</strong>! <span aria-hidden='true'>😊</span>"
                ],
                quiz1: { id: "page1-q1", question: "What do invertebrates NOT have?", options: [ { text: "Legs", isCorrect: false }, { text: "A backbone", isCorrect: true }, { text: "Eyes", isCorrect: false } ] },
                quiz2: { id: "page1-q2", question: "What is the hard outside covering called?", options: [ { text: "Skin", isCorrect: false }, { text: "Exoskeleton", isCorrect: true }, { text: "Fur", isCorrect: false } ] },
                quiz3: { id: "page1-q3", question: "Are there many invertebrates or few?", options: [ { text: "Many", isCorrect: true }, { text: "Few", isCorrect: false }, { text: "None", isCorrect: false } ] }
            },
            challenge: {
                title: "Defining Invertebrates & Exoskeletons <span aria-hidden='true'>🚫🦴</span>",
                 paragraphs: [
                    "Scientists group animals. One very large group is invertebrates.",
                    "The main feature of an invertebrate is that it does not have a backbone <span aria-hidden='true'>🚫🦴</span> (also called a vertebral column). Think about your own backbone! Invertebrates don't have one.",
                    "Many invertebrates have an exoskeleton, which is a hard outer covering, like armor <span aria-hidden='true'>💪</span>, that supports and protects their body.",
                    "Did you know? <span aria-hidden='true'>😮</span> Over 95% of all known animal species are invertebrates!"
                 ],
                 quiz1: { id: "page1-q1", question: "What is the main thing invertebrates DON'T have?", options: [ { text: "Legs", isCorrect: false }, { text: "A backbone", isCorrect: true }, { text: "Eyes", isCorrect: false } ] },
                 quiz2: { id: "page1-q2", question: "What is the hard outer covering that protects many invertebrates called?", options: [ { text: "Skin", isCorrect: false }, { text: "Exoskeleton", isCorrect: true }, { text: "Fur", isCorrect: false } ] },
                 quiz3: { id: "page1-q3", question: "Are invertebrates common or rare?", options: [ { text: "Very common", isCorrect: true }, { text: "Very rare", isCorrect: false }, { text: "Only in zoos", isCorrect: false } ] }
            }
        },
        page2: { // Introducing Insects
             easy: {
                 title: "What are Insects? <span aria-hidden='true'>🦋</span>",
                 paragraphs: [
                     "Insects <span aria-hidden='true'>🐜</span> are invertebrates. They have NO backbone <span aria-hidden='true'>🚫🦴</span>.",
                     "Insects are cold-blooded <span aria-hidden='true'>🥶</span>. If it is cold outside, they feel cold. If it is hot outside, they feel hot <span aria-hidden='true'>🔥</span>.",
                     "Insects lay eggs <span aria-hidden='true'>🥚</span> to make babies."
                 ],
                 quiz1: { id: "page2-q4", question: "How do insects make babies?", options: [ { text: "Lay eggs", isCorrect: true }, { text: "Give milk", isCorrect: false }, { text: "Build nests", isCorrect: false } ] },
                 quiz2: { id: "page2-q5", question: "If it is cold outside, an insect feels...?", options: [ { text: "Cold", isCorrect: true }, { text: "Hot", isCorrect: false }, { text: "The same", isCorrect: false } ] },
                 quiz3: { id: "page2-q6", question: "Do insects have a backbone?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] }
             },
             challenge: {
                 title: "Introducing Insects <span aria-hidden='true'>🦋</span>",
                  paragraphs: [
                     "Insects <span aria-hidden='true'>🐜</span> are a major group of invertebrates, meaning they lack a backbone <span aria-hidden='true'>🚫🦴</span> and often have an exoskeleton <span aria-hidden='true'>💪</span>.",
                     "They are cold-blooded <span aria-hidden='true'>🥶</span>. This means their internal body temperature changes depending on the outside environment.",
                     "Insects reproduce by laying eggs <span aria-hidden='true'>🥚</span>.",
                     "The word for egg-laying is oviparous (oh-VIP-uh-rus)."
                  ],
                  quiz1: { id: "page2-q4", question: "What does 'oviparous' mean?", options: [ { text: "Lays eggs", isCorrect: true }, { text: "No backbone", isCorrect: false }, { text: "Is cold-blooded", isCorrect: false } ] },
                  quiz2: { id: "page2-q5", question: "A cold-blooded animal's temperature...?", options: [ { text: "Changes with surroundings", isCorrect: true }, { text: "Stays the same always", isCorrect: false } ] },
                  quiz3: { id: "page2-q6", question: "Which is NOT a characteristic of insects mentioned here?", options: [ { text: "Having an exoskeleton", isCorrect: false }, { text: "Being cold-blooded", isCorrect: false }, { text: "Having a backbone", isCorrect: true } ] }
             }
         },
         page3: { // Insect Anatomy: Three Segments
             easy: {
                 title: "Insect Body Parts <span aria-hidden='true'>🐞</span>",
                 paragraphs: [
                    "Insects <span aria-hidden='true'>🐞</span> have 3 body parts.",
                    "Head: Has eyes <span aria-hidden='true'>👀</span> and feelers (antennae <span aria-hidden='true'>👋</span>). For seeing and feeling.",
                    "Thorax: The middle part. Legs <span aria-hidden='true'>🦵</span> and wings are here. For moving <span aria-hidden='true'>🏃‍♀️</span>.",
                    "Abdomen: The end part. Helps use food <span aria-hidden='true'>😋</span> and make eggs <span aria-hidden='true'>🥚</span>."
                 ],
                 quiz1: { id: "page3-q7", question: "Which body part is for seeing and feeling?", options: [ { text: "Head", isCorrect: true }, { text: "Thorax", isCorrect: false }, { text: "Abdomen", isCorrect: false } ] },
                 quiz2: { id: "page3-q8", question: "Wings connect to the...?", options: [ { text: "Head", isCorrect: false }, { text: "Thorax", isCorrect: true }, { text: "Abdomen", isCorrect: false } ] },
                 quiz3: { id: "page3-q9", question: "The legs are on the...?", options: [ { text: "Head", isCorrect: false }, { text: "Thorax", isCorrect: true }, { text: "Abdomen", isCorrect: false } ] }
             },
             challenge: {
                 title: "Insect Anatomy: Three Segments <span aria-hidden='true'>🐞</span>",
                 paragraphs: [
                    "An insect's body is divided into three main sections (segments).",
                    "Head: Contains sensors like eyes <span aria-hidden='true'>👀</span> and antennae <span aria-hidden='true'>👋</span>, plus mouthparts for feeding <span aria-hidden='true'>👄</span>. Used for sensing the world.",
                    "Thorax: The central section where the legs <span aria-hidden='true'>🦵</span> and (if present) wings connect. Important for movement <span aria-hidden='true'>🏃‍♀️</span>.",
                    "Abdomen: The rear section containing organs for digestion <span aria-hidden='true'>😋</span>, breathing <span aria-hidden='true'>😮‍💨</span>, and making eggs <span aria-hidden='true'>🥚</span>."
                 ],
                  quiz1: { id: "page3-q7", question: "Which body section is mainly for sensing things?", options: [ { text: "Head", isCorrect: true }, { text: "Thorax", isCorrect: false }, { text: "Abdomen", isCorrect: false } ] },
                  quiz2: { id: "page3-q8", question: "The wings of an insect connect to the...?", options: [ { text: "Head", isCorrect: false }, { text: "Thorax", isCorrect: true }, { text: "Abdomen", isCorrect: false } ] },
                  quiz3: { id: "page3-q9", question: "Digestion (breaking down food) happens mostly in the...?", options: [ { text: "Head", isCorrect: false }, { text: "Thorax", isCorrect: false }, { text: "Abdomen", isCorrect: true } ] }
             }
         },
        page4: { // Specific Insect Features
             easy: {
                 title: "More About Insects <span aria-hidden='true'>🐝</span>",
                 paragraphs: [
                     "Insects have two feelers (antennae <span aria-hidden='true'>👋</span>) on their head. They use them to feel and smell <span aria-hidden='true'>👃</span>.",
                     "Insects have six legs <span aria-hidden='true'>🦵🦵🦵</span>. The legs are on the thorax (middle part).",
                     "Insects do not have lungs like us. They breathe <span aria-hidden='true'>😮‍💨</span> through little holes in their body."
                 ],
                 quiz1: { id: "page4-q10", question: "Feelers (antennae) are used for...?", options: [ { text: "Seeing", isCorrect: false }, { text: "Feeling and Smelling", isCorrect: true }, { text: "Breathing", isCorrect: false } ] },
                 quiz2: { id: "page4-q11", question: "How many legs do insects have?", options: [ { text: "Four", isCorrect: false }, { text: "Six", isCorrect: true }, { text: "Eight", isCorrect: false } ] },
                 quiz3: { id: "page4-q12", question: "How do insects breathe?", options: [ { text: "With lungs", isCorrect: false }, { text: "With gills", isCorrect: false }, { text: "Through little holes", isCorrect: true } ] }
             },
             challenge: {
                 title: "Specific Insect Features <span aria-hidden='true'>🐝</span>",
                 paragraphs: [
                     "Insects usually have two antennae <span aria-hidden='true'>👋</span> on their head, used for sensing touch, smell <span aria-hidden='true'>👃</span>, and sometimes sound <span aria-hidden='true'>👂</span>.",
                     "A key feature is having six legs <span aria-hidden='true'>🦵🦵🦵</span> (three pairs), all connected to the thorax.",
                     "Insects don't have lungs. They breathe air <span aria-hidden='true'>😮‍💨</span> through openings called spiracles, usually on the abdomen and thorax.",
                     "These lead to air tubes inside."
                 ],
                 quiz1: { id: "page4-q10", question: "Antennae are mainly used for...?", options: [ { text: "Seeing", isCorrect: false }, { text: "Sensing", isCorrect: true }, { text: "Breathing", isCorrect: false } ] },
                 quiz2: { id: "page4-q11", question: "An animal with 6 legs is likely...?", options: [ { text: "An insect", isCorrect: true }, { text: "Not an insect", isCorrect: false }, { text: "A bird", isCorrect: false } ] },
                 quiz3: { id: "page4-q12", question: "What are the breathing holes on an insect called?", options: [ { text: "Lungs", isCorrect: false }, { text: "Gills", isCorrect: false }, { text: "Spiracles", isCorrect: true } ] }
             }
         },
         page5: { // Insect Examples (Plan 4.5)
             easy: {
                 title: "Kinds of Insects <span aria-hidden='true'>🐜🌸🐛</span>",
                 paragraphs: [
                    "Bees <span aria-hidden='true'>🐝</span> help flowers <span aria-hidden='true'>🌸</span> make seeds. They fly from flower to flower.",
                    "Ants <span aria-hidden='true'>🐜</span> live together in big groups called colonies <span aria-hidden='true'>🏘️</span>.",
                    "Butterflies <span aria-hidden='true'>🦋</span> change shape! They start as a caterpillar <span aria-hidden='true'>🐛</span>. They drink flower juice <span aria-hidden='true'>😋</span>."
                 ],
                 quiz1: { id: "page5-q13", question: "What job do bees do for flowers?", options: [ { text: "Help make seeds", isCorrect: true }, { text: "Build nests", isCorrect: false }, { text: "Eat leaves", isCorrect: false } ] },
                 quiz2: { id: "page5-q14", question: "Ants live together in...?", options: [ { text: "Hives", isCorrect: false }, { text: "Webs", isCorrect: false }, { text: "Colonies", isCorrect: true } ] },
                 quiz3: { id: "page5-q15", question: "Butterflies start as a...?", options: [ { text: "Bee", isCorrect: false }, { text: "Caterpillar", isCorrect: true }, { text: "Ant", isCorrect: false } ] }
             },
             challenge: {
                  title: "Insect Examples <span aria-hidden='true'>🐝🐜🦋</span>",
                  paragraphs: [
                    "Bees <span aria-hidden='true'>🐝</span> are important pollinators. They carry pollen between flowers <span aria-hidden='true'>🌸</span>, helping them reproduce.",
                    "Ants <span aria-hidden='true'>🐜</span> are social insects living in organized colonies <span aria-hidden='true'>🏘️</span>, often with a queen and workers.",
                    "Butterflies <span aria-hidden='true'>🦋</span> undergo metamorphosis (met-uh-MORF-uh-sis) (change from caterpillar <span aria-hidden='true'>🐛➡️🦋</span>). They feed on nectar using a long mouthpart called a proboscis (pro-BOSS-iss) <span aria-hidden='true'>😋</span>."
                  ],
                  quiz1: { id: "page5-q13", question: "What important job do bees do for flowers?", options: [ { text: "Pollination", isCorrect: true }, { text: "Building nests", isCorrect: false }, { text: "Eating leaves", isCorrect: false } ] },
                  quiz2: { id: "page5-q14", question: "Ants live and work together in...?", options: [ { text: "Hives", isCorrect: false }, { text: "Webs", isCorrect: false }, { text: "Colonies", isCorrect: true } ] },
                  quiz3: { id: "page5-q15", question: "What is the change from caterpillar to butterfly called?", options: [ { text: "Growing", isCorrect: false }, { text: "Metamorphosis", isCorrect: true }, { text: "Flying", isCorrect: false } ] }
             }
         },
         page6: { // Activity: Draw an Insect! (Plan 4.6) - No Quiz
             easy: {
                 title: "Activity: Draw an Insect! <span aria-hidden='true'>🎨🖍️</span>",
                 activityInstruction: "Get paper and crayons <span aria-hidden='true'>🖍️</span>! Draw an insect <span aria-hidden='true'>🦋</span>! Make sure it has:",
                 activityChecklist: [
                    "3 Body Parts (Head, Middle, End)",
                    "6 Legs (on the middle part!) <span aria-hidden='true'>🦵🦵🦵</span>",
                    "2 Feelers (on the head!) <span aria-hidden='true'>👋</span>",
                    "You can add wings too! <span aria-hidden='true'>✅</span>"
                 ]
             },
             challenge: {
                 title: "Activity: Draw an Insect! <span aria-hidden='true'>🎨</span>",
                 activityInstruction: "Get paper and crayons <span aria-hidden='true'>🖍️</span> or pencils <span aria-hidden='true'>✏️</span>! Draw your favorite insect <span aria-hidden='true'>🦋</span>, or invent a new one! Remember to give it:",
                 activityChecklist: [
                    "3 Body Parts (Head, Thorax, Abdomen)",
                    "6 Legs (attached to the thorax!) <span aria-hidden='true'>🦵🦵🦵</span>",
                    "2 Antennae (on the head!) <span aria-hidden='true'>👋</span>",
                    "Maybe add wings on the thorax? Label the parts if you can! <span aria-hidden='true'>✅</span>"
                 ]
             }
             // No quizzes for this page
         },
         page7: { // Introducing Arachnids
             easy: {
                 title: "What are Arachnids? <span aria-hidden='true'>🕷️</span>",
                 paragraphs: [
                    "Arachnids (uh-RACK-nids) <span aria-hidden='true'>🕷️</span> are NOT insects. They are different.",
                    "Arachnids have NO backbone <span aria-hidden='true'>🚫🦴</span>. They have an exoskeleton <span aria-hidden='true'>💪</span>.",
                    "They are cold-blooded <span aria-hidden='true'>🥶</span>, like insects.",
                    "They lay eggs <span aria-hidden='true'>🥚</span>, like insects. Spiders <span aria-hidden='true'>🕷️</span> and scorpions <span aria-hidden='true'>🦂</span> are arachnids."
                 ],
                 quiz1: { id: "page7-q16", question: "Arachnids are different from...?", options: [ { text: "Insects", isCorrect: true }, { text: "Birds", isCorrect: false }, { text: "Fish", isCorrect: false } ] },
                 quiz2: { id: "page7-q17", question: "Spiders and scorpions are...?", options: [ { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: true }, { text: "Fish", isCorrect: false } ] },
                 quiz3: { id: "page7-q18", question: "True or False: Arachnids have backbones.", options: [ { text: "True", isCorrect: false }, { text: "False", isCorrect: true } ] }
             },
             challenge: {
                 title: "Introducing Arachnids <span aria-hidden='true'>🕷️</span>",
                 paragraphs: [
                    "Arachnids (uh-RACK-nids) are another class of invertebrates (<span aria-hidden='true'>🚫🦴</span>), different from insects.",
                    "They also lack a backbone and have an exoskeleton <span aria-hidden='true'>💪</span>.",
                    "Like insects, they are cold-blooded <span aria-hidden='true'>🥶</span> and usually oviparous (egg-laying <span aria-hidden='true'>🥚</span>).",
                    "Common examples include spiders <span aria-hidden='true'>🕷️</span>, scorpions <span aria-hidden='true'>🦂</span>, mites, and ticks."
                 ],
                 quiz1: { id: "page7-q16", question: "Arachnids are different from...?", options: [ { text: "Insects", isCorrect: false }, { text: "Mammals", isCorrect: false }, { text: "Both", isCorrect: true } ] }, // Updated correct answer for Challenge
                 quiz2: { id: "page7-q17", question: "Ticks and scorpions belong to which group?", options: [ { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: true }, { text: "Mollusks", isCorrect: false } ] },
                 quiz3: { id: "page7-q18", question: "True or False: Arachnids have backbones.", options: [ { text: "True", isCorrect: false }, { text: "False", isCorrect: true } ] }
             }
         },
         page8: { // Distinctive Arachnid Anatomy
             easy: {
                 title: "Arachnid Body Parts <span aria-hidden='true'>🦵🦵🦵🦵</span>",
                 paragraphs: [
                    "Arachnids <span aria-hidden='true'>🕷️</span> have eight legs <span aria-hidden='true'>🦵🦵🦵🦵</span>. Remember, insects have six!",
                    "Arachnids have two body parts.",
                    "Front Part (Cephalothorax: Head and middle together)",
                    "Back Part (Abdomen)",
                    "Arachnids do NOT have feelers (antennae) <span aria-hidden='true'>🚫👋</span>. They breathe air <span aria-hidden='true'>😮‍💨</span> in special ways."
                 ],
                 quiz1: { id: "page8-q19", question: "Arachnids have how many body parts?", options: [ { text: "Two", isCorrect: true }, { text: "Three", isCorrect: false }, { text: "Six", isCorrect: false } ] },
                 quiz2: { id: "page8-q20", question: "How many legs do arachnids have?", options: [ { text: "Six", isCorrect: false }, { text: "Eight", isCorrect: true }, { text: "Ten", isCorrect: false } ] },
                 quiz3: { id: "page8-q21", question: "Do arachnids have feelers (antennae)?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] }
             },
             challenge: {
                 title: "Distinctive Arachnid Anatomy <span aria-hidden='true'>🦵🦵🦵🦵</span>",
                 paragraphs: [
                    "A key difference: Arachnids have eight legs <span aria-hidden='true'>🦵🦵🦵🦵</span> (four pairs).",
                    "Their body usually has two main sections.",
                    "Cephalothorax (sef-uh-lo-THOR-ax): The head and thorax fused together into one front section.",
                    "Abdomen: The posterior (back) body section.",
                    "Many arachnids breathe <span aria-hidden='true'>😮‍💨</span> using unique structures called book lungs. They do NOT have antennae <span aria-hidden='true'>🚫👋</span>."
                 ],
                 quiz1: { id: "page8-q19", question: "What are the two main body sections of an arachnid called?", options: [ { text: "Head and Thorax", isCorrect: false }, { text: "Cephalothorax and Abdomen", isCorrect: true }, { text: "Head and Abdomen", isCorrect: false } ] },
                 quiz2: { id: "page8-q20", question: "Book lungs are used for...?", options: [ { text: "Eating", isCorrect: false }, { text: "Breathing", isCorrect: true }, { text: "Seeing", isCorrect: false } ] },
                 quiz3: { id: "page8-q21", question: "An animal with 8 legs and 2 body parts is likely...?", options: [ { text: "An insect", isCorrect: false }, { text: "An arachnid", isCorrect: true }, { text: "A mollusk", isCorrect: false } ] }
             }
         },
        page9: { // Arachnid Examples & Venom (Plan 6.5)
            easy: {
                title: "Kinds of Arachnids & Venom <span aria-hidden='true'>☠️🕸️</span>",
                paragraphs: [
                   "Spiders <span aria-hidden='true'>🕷️</span> make webs <span aria-hidden='true'>🕸️</span> to catch food <span aria-hidden='true'>😋</span>. Some spiders hunt food.",
                   "Scorpions <span aria-hidden='true'>🦂</span> use their big claws (pincers) to grab food <span aria-hidden='true'>👍</span>. They use their tail stinger to sting.",
                   "Some spiders and scorpions use venom <span aria-hidden='true'>☠️</span>. Venom is poison from a bite or sting. It helps them catch food or stay safe."
                ],
                quiz1: { id: "page9-q22", question: "What do spiders use webs for?", options: [ { text: "Sleeping", isCorrect: false }, { text: "Catching food", isCorrect: true }, { text: "Hiding", isCorrect: false } ] },
                quiz2: { id: "page9-q23", question: "What is venom?", options: [ { text: "Spider web", isCorrect: false }, { text: "Food", isCorrect: false }, { text: "Poison from a bite or sting", isCorrect: true } ] },
                quiz3: { id: "page9-q24", question: "What does a scorpion use its claws (pincers) for?", options: [ { text: "Seeing", isCorrect: false }, { text: "Breathing", isCorrect: false }, { text: "Grabbing food", isCorrect: true } ] }
            },
            challenge: {
                 title: "Arachnid Examples & Venom <span aria-hidden='true'>☠️🕸️</span>",
                 paragraphs: [
                    "Spiders <span aria-hidden='true'>🕷️</span> are diverse predators; many spin silk webs <span aria-hidden='true'>🕸️</span> to trap prey, while others actively hunt.",
                    "Scorpions <span aria-hidden='true'>🦂</span> use their large pincers (pedipalps) to capture prey and their tail stinger (telson) for defense or subduing larger prey.",
                    "Some spiders and scorpions use venom <span aria-hidden='true'>☠️</span>, a poison that enters the body through a bite or a sting, to paralyze or kill their prey or for defense."
                 ],
                 quiz1: { id: "page9-q22", question: "What do spiders often use webs for?", options: [ { text: "Sleeping", isCorrect: false }, { text: "Catching food", isCorrect: true }, { text: "Hiding", isCorrect: false } ] },
                 quiz2: { id: "page9-q23", question: "What is venom?", options: [ { text: "Silk for webs", isCorrect: false }, { text: "A type of blood", isCorrect: false }, { text: "Poison from a bite or sting", isCorrect: true } ] },
                 quiz3: { id: "page9-q24", question: "What does a scorpion use its pincers for?", options: [ { text: "Seeing", isCorrect: false }, { text: "Breathing", isCorrect: false }, { text: "Grabbing prey", isCorrect: true } ] }
            }
        },
        page10: { // Comparing Insects & Arachnids (Plan 6.6)
             easy: {
                 title: "Insect <span aria-hidden='true'>🦋</span> or Arachnid <span aria-hidden='true'>🕷️</span>?",
                 paragraphs: ["How are they different? <span aria-hidden='true'>🤔</span>"], // Intro paragraph
                 comparisonList: [ // Using a specific key for the comparison list
                     "Legs: Insect = 6 legs <span aria-hidden='true'>🦵🦵🦵</span>. Arachnid = 8 legs <span aria-hidden='true'>🦵🦵🦵🦵</span>.",
                     "Body Parts: Insect = 3 parts. Arachnid = 2 parts.",
                     "Feelers (Antennae): Insect = YES <span aria-hidden='true'>👋</span>. Arachnid = NO <span aria-hidden='true'>🚫👋</span>."
                 ],
                 quiz1: { id: "page10-q25", question: "If it has 8 legs and NO feelers, it is a(n)...?", options: [ { text: "Insect", isCorrect: false }, { text: "Arachnid", isCorrect: true } ] },
                 quiz2: { id: "page10-q26", question: "Which one does NOT have feelers (antennae)?", options: [ { text: "Insect", isCorrect: false }, { text: "Arachnid", isCorrect: true } ] },
                 quiz3: { id: "page10-q27", question: "How many more legs does an arachnid have than an insect?", options: [ { text: "Two", isCorrect: true }, { text: "Four", isCorrect: false }, { text: "Six", isCorrect: false } ] }
             },
             challenge: {
                  title: "Comparing Insects <span aria-hidden='true'>🦋</span> and Arachnids <span aria-hidden='true'>🕷️</span>",
                  paragraphs: ["Key Differences: <span aria-hidden='true'>🤔</span>"], // Intro paragraph
                  comparisonList: [ // Using a specific key for the comparison list
                     "Legs: Insects have 6 <span aria-hidden='true'>🦵🦵🦵</span>; Arachnids have 8 <span aria-hidden='true'>🦵🦵🦵🦵</span>.",
                     "Body Sections: Insects have 3; Arachnids usually have 2.",
                     "Antennae: Insects have them <span aria-hidden='true'>👋</span>; Arachnids do not <span aria-hidden='true'>🚫👋</span>."
                  ],
                  quiz1: { id: "page10-q25", question: "If you find a creature with 6 legs and antennae, it is likely a(n)...?", options: [ { text: "Insect", isCorrect: true }, { text: "Arachnid", isCorrect: false } ] },
                  quiz2: { id: "page10-q26", question: "The absence of antennae is typical for...?", options: [ { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: true } ] },
                  quiz3: { id: "page10-q27", question: "How many more legs does an arachnid have than an insect?", options: [ { text: "Two", isCorrect: true }, { text: "Four", isCorrect: false }, { text: "Six", isCorrect: false } ] }
             }
         },
        page11: { // Introducing Mollusks
            easy: {
                title: "What are Mollusks? <span aria-hidden='true'>🐌🐙🐚</span>",
                paragraphs: [
                   "### What are <strong>Mollusks</strong>? <span aria-hidden='true'>🐌🐙🐚</span>",
                   "* They have NO backbone <span aria-hidden='true'>🚫🦴</span>.",
                   "* They have soft bodies <span aria-hidden='true'>😊</span>.",
                   "* Many have a hard shell <span aria-hidden='true'>🐚</span> outside for protection.",
                   "* A soft body part called the <strong>mantle</strong> makes the shell.",
                   "* Examples of mollusks are snails <span aria-hidden='true'>🐌</span>, clams <span aria-hidden='true'>🦪</span>, and octopuses <span aria-hidden='true'>🐙</span>."
               ],
                quiz1: { id: "page11-q28", question: "What part makes the hard shell on many mollusks?", options: [ { text: "Foot", isCorrect: false }, { text: "Mantle", isCorrect: true }, { text: "Head", isCorrect: false } ] },
                quiz2: { id: "page11-q29", question: "Soft bodies are important for...?", options: [ { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: false }, { text: "Mollusks", isCorrect: true } ] },
                quiz3: { id: "page11-q30", question: "Which mollusk does NOT have a shell outside?", options: [ { text: "Clam", isCorrect: false }, { text: "Snail", isCorrect: false }, { text: "Octopus", isCorrect: true } ] }
            },
            challenge: {
                 title: "Introducing Mollusks <span aria-hidden='true'>🐌🐙🐚</span>",
                 paragraphs: [
                    "Mollusks are another diverse invertebrate group (<span aria-hidden='true'>🚫🦴</span>), also lacking backbones.",
                    "They are usually cold-blooded <span aria-hidden='true'>🥶</span> and have characteristic soft bodies.",
                    "Many mollusks have an external shell <span aria-hidden='true'>🐚</span> for protection, which is made by a soft body covering called the mantle.",
                    "However, not all mollusks have an external shell (like octopus <span aria-hidden='true'>🐙</span>!). This group includes snails <span aria-hidden='true'>🐌</span>, clams, oysters <span aria-hidden='true'>🦪</span>, squid, and octopuses <span aria-hidden='true'>🐙</span>."
                 ],
                 quiz1: { id: "page11-q28", question: "What part makes the protective outer shell on many mollusks?", options: [ { text: "Foot", isCorrect: false }, { text: "Mantle", isCorrect: true }, { text: "Head", isCorrect: false } ] },
                 quiz2: { id: "page11-q29", question: "A soft body is a key feature of...?", options: [ { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: false }, { text: "Mollusks", isCorrect: true } ] },
                 quiz3: { id: "page11-q30", question: "Which mollusk usually does NOT have an outside shell?", options: [ { text: "Clam", isCorrect: false }, { text: "Snail", isCorrect: false }, { text: "Octopus", isCorrect: true } ] }
            }
        },
        page12: { // Mollusk Anatomy & Diversity
             easy: {
                 title: "More About Mollusks <span aria-hidden='true'>🦶💧🌳</span>",
                 paragraphs: [
                     "Many mollusks have one big foot <span aria-hidden='true'>🦶</span> on their belly side (ventral side <span aria-hidden='true'>👇</span>). They use it to move <span aria-hidden='true'>➡️</span>.",
                     "Some mollusks live on land <span aria-hidden='true'>🌳</span> (like snails <span aria-hidden='true'>🐌</span>).",
                     "Many live in water <span aria-hidden='true'>💧🌊</span> (like clams <span aria-hidden='true'>🦪</span> and octopuses <span aria-hidden='true'>🐙</span>). Mollusks usually lay eggs <span aria-hidden='true'>🥚</span>.", // Combined sentence for easy
                     "They are cold-blooded <span aria-hidden='true'>🥶</span>." // Separate sentence
                 ],
                 quiz1: { id: "page12-q31", question: "The part used for moving is the...?", options: [ { text: "Shell", isCorrect: false }, { text: "Head", isCorrect: false }, { text: "Foot", isCorrect: true } ] },
                 quiz2: { id: "page12-q32", question: "The foot is usually on the...?", options: [ { text: "Top side", isCorrect: false }, { text: "Belly side", isCorrect: true }, { text: "Back side", isCorrect: false } ] },
                 quiz3: { id: "page12-q33", question: "True or False: All mollusks live in water.", options: [ { text: "True", isCorrect: false }, { text: "False", isCorrect: true } ] }
             },
             challenge: {
                  title: "Mollusk Anatomy & Diversity <span aria-hidden='true'>🦶💧🌳</span>",
                  paragraphs: [
                     "A common feature is a muscular foot <span aria-hidden='true'>🦶</span>, often on the belly side (called ventral <span aria-hidden='true'>👇</span>), used for moving, clinging, or digging.",
                     "Mollusks live in many places: some on land <span aria-hidden='true'>🌳</span> (terrestrial, like snails <span aria-hidden='true'>🐌</span>), many in water <span aria-hidden='true'>💧</span> (aquatic - freshwater or ocean <span aria-hidden='true'>🌊</span>, like clams, octopuses <span aria-hidden='true'>🐙</span>).",
                     "Reproduction is typically oviparous (egg-laying <span aria-hidden='true'>🥚</span>)."
                  ],
                  quiz1: { id: "page12-q31", question: "The muscular part used for movement in many mollusks is the...?", options: [ { text: "Mantle", isCorrect: false }, { text: "Shell", isCorrect: false }, { text: "Foot", isCorrect: true } ] },
                  quiz2: { id: "page12-q32", question: "The word 'ventral' refers to which side?", options: [ { text: "Top", isCorrect: false }, { text: "Back", isCorrect: false }, { text: "Belly or lower", isCorrect: true } ] },
                  quiz3: { id: "page12-q33", question: "True or False: All mollusks live in the ocean.", options: [ { text: "True", isCorrect: false }, { text: "False", isCorrect: true } ] }
             }
         },
         page13: { // Gastropods (Snails & Slugs)
              easy: {
                  title: "Snails <span aria-hidden='true'>🐌</span> and Slugs <span aria-hidden='true'>🚫🐚</span>",
                  paragraphs: [
                     "Snails <span aria-hidden='true'>🐌</span> have a shell <span aria-hidden='true'>🐚</span>. Slugs do not have a shell <span aria-hidden='true'>🚫🐚</span>.",
                     "They are both mollusks (one kind called Gastropods).", // Simplified class name mention
                     "They move with their foot <span aria-hidden='true'>🦶</span> and make slime!",
                     "They eat <span aria-hidden='true'>😋</span> with a rough tongue."
                  ],
                  quiz1: { id: "page13-q34", question: "Snails and slugs are kinds of...?", options: [ { text: "Insects", isCorrect: false }, { text: "Mollusks", isCorrect: true }, { text: "Fish", isCorrect: false } ] },
                  quiz2: { id: "page13-q35", question: "What is the big difference between a snail and a slug?", options: [ { text: "How many feet", isCorrect: false }, { text: "Having a shell", isCorrect: true }, { text: "Color", isCorrect: false } ] },
                  quiz3: { id: "page13-q36", question: "How do snails move?", options: [ { text: "With legs", isCorrect: false }, { text: "With wings", isCorrect: false }, { text: "With their foot", isCorrect: true } ] }
              },
              challenge: {
                   title: "Focus: Gastropods (Snails <span aria-hidden='true'>🐌</span> & Slugs)",
                   paragraphs: [
                      "Snails <span aria-hidden='true'>🐌</span> and slugs belong to the Gastropod class of mollusks (one of the 3 kinds).",
                      "The main difference: snails have an external shell <span aria-hidden='true'>🐚</span>, slugs do not <span aria-hidden='true'>🚫🐚</span>.",
                      "They move using their ventral foot <span aria-hidden='true'>🦶</span>, often helped by mucus (slime!).",
                      "Many gastropods feed <span aria-hidden='true'>😋</span> using a radula (RAD-yoo-luh), a ribbon-like structure with tiny teeth for scraping food."
                   ],
                   quiz1: { id: "page13-q34", question: "Snails and slugs are examples of...?", options: [ { text: "Bivalves", isCorrect: false }, { text: "Cephalopods", isCorrect: false }, { text: "Gastropods", isCorrect: true } ] },
                   quiz2: { id: "page13-q35", question: "What is the main difference between a snail and a slug?", options: [ { text: "Number of legs", isCorrect: false }, { text: "Having a shell", isCorrect: true }, { text: "Color", isCorrect: false } ] },
                   quiz3: { id: "page13-q36", question: "The rough, tongue-like part used for eating is the...?", options: [ { text: "Foot", isCorrect: false }, { text: "Mantle", isCorrect: false }, { text: "Radula", isCorrect: true } ] }
              }
          },
          page14: { // Bivalves (Clams, Oysters)
               easy: {
                   title: "Clams <span aria-hidden='true'>🦪</span> and Oysters <span aria-hidden='true'>✌️🐚</span>",
                   paragraphs: [
                       "Clams <span aria-hidden='true'>🦪</span> and oysters are mollusks with two shells <span aria-hidden='true'>✌️🐚</span> (they are Bivalves).",
                       "They live in water <span aria-hidden='true'>💧</span>.",
                       "They eat tiny food <span aria-hidden='true'>😋</span> from the water.",
                       "They use tubes called siphons to suck water in and get the food."
                   ],
                   quiz1: { id: "page14-q37", question: "Clams and oysters are kinds of...?", options: [ { text: "Mollusks", isCorrect: true }, { text: "Insects", isCorrect: false }, { text: "Arachnids", isCorrect: false } ] },
                   quiz2: { id: "page14-q38", question: "Clams and oysters have...?", options: [ { text: "Two shells", isCorrect: true }, { text: "No shells", isCorrect: false }, { text: "One shell", isCorrect: false } ] },
                   quiz3: { id: "page14-q39", question: "Clams suck in water using tubes called...?", options: [ { text: "Feet", isCorrect: false }, { text: "Siphons", isCorrect: true }, { text: "Tongues", isCorrect: false } ] }
               },
               challenge: {
                    title: "Focus: Bivalves (Clams <span aria-hidden='true'>🦪</span>, Oysters, Mussels)",
                    paragraphs: [
                       "Clams <span aria-hidden='true'>🦪</span>, oysters, and mussels belong to the Bivalve class of mollusks (another of the 3 kinds).",
                       "Their key feature is having two shells <span aria-hidden='true'>🐚</span> (valves) joined by a hinge.",
                       "Most bivalves are aquatic (live in water <span aria-hidden='true'>💧</span>).",
                       "Many are filter-feeders <span aria-hidden='true'>😋</span>. They draw water in through tube-shaped organs called siphons to catch food particles."
                    ],
                    quiz1: { id: "page14-q37", question: "Clams and oysters are examples of...?", options: [ { text: "Bivalves", isCorrect: true }, { text: "Cephalopods", isCorrect: false }, { text: "Gastropods", isCorrect: false } ] },
                    quiz2: { id: "page14-q38", question: "What does \"Bivalve\" suggest?", options: [ { text: "Two shells", isCorrect: true }, { text: "Soft body", isCorrect: false }, { text: "Lives on land", isCorrect: false } ] },
                    quiz3: { id: "page14-q39", question: "The tubes used by clams to pull in water are...?", options: [ { text: "Feet", isCorrect: false }, { text: "Siphons", isCorrect: true }, { text: "Radulas", isCorrect: false } ] }
               }
           },
           page15: { // Activity: Mollusk Sort! (Plan 11) - No Quiz
                easy: {
                    title: "Activity: Shell <span aria-hidden='true'>🐚</span> or No Shell <span aria-hidden='true'>🚫🐚</span>?",
                    activityInstruction: "Look at the pictures <span aria-hidden='true'>👇</span>. Drag them to the right box! <span aria-hidden='true'>➡️</span>",
                    dropZoneTitle1: "Has Shell <span aria-hidden='true'>🐚</span>",
                    dropZoneTitle2: "No Shell <span aria-hidden='true'>🚫🐚</span>",
                    draggableItems: [ // Text and data-group
                        { text: "Snail <span aria-hidden='true'>🐌</span>", group: "shell" },
                        { text: "Slug", group: "no-shell" },
                        { text: "Clam <span aria-hidden='true'>🦪</span>", group: "shell" },
                        { text: "Octopus <span aria-hidden='true'>🐙</span>", group: "no-shell" }
                    ],
                    activityID: "mollusk-sort" // ID for JS targeting
                },
                challenge: {
                    title: "Activity: Mollusk Sort! <span aria-hidden='true'>➡️</span>",
                    activityInstruction: "Look at the mollusks below. Drag each one to the right box! <span aria-hidden='true'>👇</span>",
                    dropZoneTitle1: "Has Outer Shell(s) <span aria-hidden='true'>🐚</span>",
                    dropZoneTitle2: "No Outer Shell <span aria-hidden='true'>🚫🐚</span>",
                    draggableItems: [ // Text and data-group
                         { text: "Snail <span aria-hidden='true'>🐌</span>", group: "shell" },
                         { text: "Slug", group: "no-shell" },
                         { text: "Clam <span aria-hidden='true'>🦪</span>", group: "shell" },
                         { text: "Octopus <span aria-hidden='true'>🐙</span>", group: "no-shell" }
                     ],
                    activityID: "mollusk-sort" // ID for JS targeting
                }
                // No quizzes for this page
            },
            page16: { // Cephalopods (Octopus)
                 easy: {
                     title: "The Smart Octopus <span aria-hidden='true'>🐙🧠</span>",
                     paragraphs: [
                        "Octopuses <span aria-hidden='true'>🐙</span> are mollusks (they are Cephalopods).", // Simplified class name mention
                        "They are very smart! <span aria-hidden='true'>🧠</span> They have NO shell <span aria-hidden='true'>🚫🐚</span>.",
                        "They live in the ocean <span aria-hidden='true'>🌊</span>.",
                        "Octopuses have eight arms <span aria-hidden='true'>💪</span>. The arms have suckers to grab things <span aria-hidden='true'>👍</span>."
                     ],
                     quiz1: { id: "page16-q40", question: "Octopuses are a type of...?", options: [ { text: "Snail", isCorrect: false }, { text: "Clam", isCorrect: false }, { text: "Mollusk", isCorrect: true } ] },
                     quiz2: { id: "page16-q41", question: "Where do octopuses live?", options: [ { text: "Lakes", isCorrect: false }, { text: "Rivers", isCorrect: false }, { text: "Oceans", isCorrect: true } ] },
                     quiz3: { id: "page16-q42", question: "What is on an octopus's arms?", options: [ { text: "Claws", isCorrect: false }, { text: "Suckers", isCorrect: true }, { text: "Fur", isCorrect: false } ] }
                 },
                 challenge: {
                      title: "Focus: Cephalopods (The Intelligent Octopus <span aria-hidden='true'>🐙🧠</span>)",
                      paragraphs: [
                         "The octopus <span aria-hidden='true'>🐙</span> belongs to the Cephalopod (SEF-uh-luh-pod) class of mollusks (the third kind), known for their intelligence <span aria-hidden='true'>🧠</span>.",
                         "They lack an external shell <span aria-hidden='true'>🚫🐚</span>. These marine animals live only in oceans <span aria-hidden='true'>🌊</span>.",
                         "Octopuses show amazing problem-solving skills.",
                         "They possess eight arms <span aria-hidden='true'>💪</span> lined with suckers used for gripping and tasting <span aria-hidden='true'>😋</span>."
                      ],
                      quiz1: { id: "page16-q40", question: "Octopuses belong to which class of mollusks?", options: [ { text: "Gastropods", isCorrect: false }, { text: "Bivalves", isCorrect: false }, { text: "Cephalopods", isCorrect: true } ] },
                      quiz2: { id: "page16-q41", question: "Where do octopuses live?", options: [ { text: "Lakes", isCorrect: false }, { text: "Rivers", isCorrect: false }, { text: "Oceans", isCorrect: true } ] },
                      quiz3: { id: "page16-q42", question: "What special feature is on an octopus's arms?", options: [ { text: "Claws", isCorrect: false }, { text: "Suckers", isCorrect: true }, { text: "Fur", isCorrect: false } ] }
                 }
             },
             page17: { // Unique Octopus Adaptations
                  easy: {
                      title: "Cool Octopus Tricks <span aria-hidden='true'>🎨💨❤️</span>",
                      paragraphs: [
                         "Octopuses <span aria-hidden='true'>🐙</span> can change color to hide! <span aria-hidden='true'>🎨</span>",
                         "Their suckers can taste <span aria-hidden='true'>😋</span> things they touch <span aria-hidden='true'>👋</span>.",
                         "They can shoot ink <span aria-hidden='true'>💨</span> to hide from enemies.",
                         "Wow! Octopuses have three hearts! <span aria-hidden='true'>❤️❤️❤️</span>"
                      ],
                      quiz1: { id: "page17-q43", question: "Octopuses change color to...?", options: [ { text: "Hide", isCorrect: true }, { text: "Sleep", isCorrect: false }, { text: "Eat", isCorrect: false } ] },
                      quiz2: { id: "page17-q44", question: "Octopus suckers can taste by...?", options: [ { text: "Smelling", isCorrect: false }, { text: "Hearing", isCorrect: false }, { text: "Touching", isCorrect: true } ] },
                      quiz3: { id: "page17-q45", question: "Why do octopuses shoot ink?", options: [ { text: "To eat", isCorrect: false }, { text: "To stay safe", isCorrect: true }, { text: "To swim faster", isCorrect: false } ] }
                  },
                  challenge: {
                       title: "Unique Octopus Adaptations <span aria-hidden='true'>🎨💨</span>",
                       paragraphs: [
                          "Octopuses <span aria-hidden='true'>🐙</span> are masters of camouflage <span aria-hidden='true'>🎨</span>, rapidly changing skin color and texture to blend in.",
                          "Their suckers have chemical sensors, allowing them to \"taste\" <span aria-hidden='true'>😋</span> by touch <span aria-hidden='true'>👋</span>.",
                          "As a defense, they can eject ink <span aria-hidden='true'>💨</span> to create a \"smokescreen\" and confuse predators.",
                          "They have three hearts <span aria-hidden='true'>❤️❤️❤️</span>! Two pump blood to the gills (for breathing <span aria-hidden='true'>😮‍💨</span>), one pumps blood to the body."
                       ],
                       quiz1: { id: "page17-q43", question: "Changing color to hide is called...?", options: [ { text: "Camouflage", isCorrect: true }, { text: "Sleeping", isCorrect: false }, { text: "Eating", isCorrect: false } ] },
                       quiz2: { id: "page17-q44", question: "Octopus suckers can taste by...?", options: [ { text: "Smelling", isCorrect: false }, { text: "Hearing", isCorrect: false }, { text: "Touching", isCorrect: true } ] },
                       quiz3: { id: "page17-q45", question: "Why do octopuses shoot ink?", options: [ { text: "To eat", isCorrect: false }, { text: "To protect themselves", isCorrect: true }, { text: "To swim faster", isCorrect: false } ] }
                  }
              },
              page18: { // Where Do They Live? Activity (Plan 14) - No Quiz
                   easy: {
                       title: "Where Do They Live? <span aria-hidden='true'>🏠➡️</span>",
                       activityInstruction: "Activity: Where Do They Live? <span aria-hidden='true'>🏠</span> Match the animal to its home. Drag the animal picture <span aria-hidden='true'>➡️</span> to the home picture. <span aria-hidden='true'>👇</span>",
                       draggableItems: [ // Text and data-animal key
                           { text: "Ant <span aria-hidden='true'>🐜</span>", animal: "ant" },
                           { text: "Spider <span aria-hidden='true'>🕷️</span>", animal: "spider" },
                           { text: "Snail <span aria-hidden='true'>🐌</span>", animal: "snail" },
                           { text: "Octopus <span aria-hidden='true'>🐙</span>", animal: "octopus" },
                           { text: "Clam <span aria-hidden='true'>🦪</span>", animal: "clam" }
                       ],
                       habitatDropZones: [ // data-habitat key, image src, alt text, display name
                            { habitat: "ant", src: "https://img.icons8.com/external-prettycons-lineal-prettycons/49/000000/external-anthill-nature-prettycons-lineal-prettycons.png", alt:"Anthill/Soil", name:"Anthill/Soil <span aria-hidden='true'>🐜🏠</span>" },
                            { habitat: "spider", src: "https://img.icons8.com/ios/50/000000/spider-web.png", alt:"Spider Web", name:"Web <span aria-hidden='true'>🕸️</span>" },
                            { habitat: "snail", src: "https://img.icons8.com/external-wanicon-lineal-wanicon/64/000000/external-leaf-autumn-wanicon-lineal-wanicon.png", alt:"Leaf/Garden", name:"Leaf/Garden <span aria-hidden='true'>🐌🌿</span>" },
                            { habitat: "octopus", src: "https://img.icons8.com/external-vitaliy-gorbachev-lineal-vitaly-gorbachev/60/000000/external-coral-diving-vitaliy-gorbachev-lineal-vitaly-gorbachev.png", alt:"Ocean Floor", name:"Ocean <span aria-hidden='true'>🐙🌊</span>" },
                            { habitat: "clam", src: "https://img.icons8.com/ios/50/000000/sand.png", alt:"Underwater Sand/Mud", name:"Sand/Mud (Water) <span aria-hidden='true'>🦪💧</span>" }
                       ],
                       activityID: "habitat-match" // ID for JS targeting
                   },
                   challenge: {
                        title: "Where Do They Live? <span aria-hidden='true'>🏠</span>",
                        activityInstruction: "Match the animal to its home! <span aria-hidden='true'>🏠</span> Drag the animal to the picture of where it usually lives. <span aria-hidden='true'>👇➡️</span>",
                        draggableItems: [ // Text and data-animal key
                           { text: "Ant <span aria-hidden='true'>🐜</span>", animal: "ant" },
                           { text: "Spider <span aria-hidden='true'>🕷️</span>", animal: "spider" },
                           { text: "Snail <span aria-hidden='true'>🐌</span>", animal: "snail" },
                           { text: "Octopus <span aria-hidden='true'>🐙</span>", animal: "octopus" },
                           { text: "Clam <span aria-hidden='true'>🦪</span>", animal: "clam" }
                        ],
                       habitatDropZones: [ // data-habitat key, image src, alt text, display name
                            { habitat: "ant", src: "https://img.icons8.com/external-prettycons-lineal-prettycons/49/000000/external-anthill-nature-prettycons-lineal-prettycons.png", alt:"Anthill/Soil", name:"Soil/Anthill <span aria-hidden='true'>🐜🏠</span>" },
                            { habitat: "spider", src: "https://img.icons8.com/ios/50/000000/spider-web.png", alt:"Spider Web", name:"A Web <span aria-hidden='true'>🕸️</span>" },
                            { habitat: "snail", src: "https://img.icons8.com/external-wanicon-lineal-wanicon/64/000000/external-leaf-autumn-wanicon-lineal-wanicon.png", alt:"Garden Leaf/Ground", name:"Garden/Ground <span aria-hidden='true'>🐌🌿</span>" },
                            { habitat: "octopus", src: "https://img.icons8.com/external-vitaliy-gorbachev-lineal-vitaly-gorbachev/60/000000/external-coral-diving-vitaliy-gorbachev-lineal-vitaly-gorbachev.png", alt:"Ocean Floor", name:"Ocean Floor <span aria-hidden='true'>🐙🌊</span>" },
                            { habitat: "clam", src: "https://img.icons8.com/ios/50/000000/sand.png", alt:"Underwater Sand/Mud", name:"Sand/Mud (Water) <span aria-hidden='true'>🦪💧</span>" }
                       ],
                        activityID: "habitat-match" // ID for JS targeting
                   }
                   // No quizzes for this page
               },
                page19: { // Transition Separator Page - No Content needed here, static HTML
                    easy: { title: "Transition" }, challenge: { title: "Transition" }
                },
                page20: { // Introducing Microorganisms
                     easy: {
                         title: "Very Little Living Things <span aria-hidden='true'>🔬🦠</span>",
                         paragraphs: [
                            "Some living things are too small to see! <span aria-hidden='true'>👀</span> They are called microorganisms (MY-kroh-OR-gan-iz-ums) <span aria-hidden='true'>🦠</span>.",
                            "We need a tool called a microscope (MY-kroh-skohp) <span aria-hidden='true'>🔬</span> to see them.",
                            "These tiny living things are everywhere! <span aria-hidden='true'>🌍</span>",
                            "Many are made of only one cell <span aria-hidden='true'>1️⃣</span>. A cell is the smallest tiny part of a living thing <span aria-hidden='true'>✨</span>."
                         ],
                         quiz1: { id: "page20-q46", question: "What does 'one cell' mean?", options: [ { text: "Very small", isCorrect: false }, { text: "Made of one tiny part", isCorrect: true }, { text: "Lives everywhere", isCorrect: false } ] },
                         quiz2: { id: "page20-q47", question: "What tool helps us see tiny things?", options: [ { text: "Glasses", isCorrect: false }, { text: "Magnifying glass", isCorrect: false }, { text: "Microscope", isCorrect: true } ] },
                         quiz3: { id: "page20-q48", question: "Are microorganisms alive?", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false }, { text: "Sometimes", isCorrect: false } ] }
                     },
                     challenge: {
                          title: "Introducing Microorganisms <span aria-hidden='true'>🔬🦠</span>",
                          paragraphs: [
                             "Microorganisms <span aria-hidden='true'>🦠</span> are living things that are tiny! Humans need to use a special tool called a microscope <span aria-hidden='true'>🔬</span> to see most of them.",
                             "They live almost everywhere on Earth <span aria-hidden='true'>🌍</span>!",
                             "Many microorganisms are made of only one single cell (unicellular).",
                             "A cell is the smallest unit of life <span aria-hidden='true'>✨</span>."
                          ],
                          quiz1: { id: "page20-q46", question: "What does unicellular mean?", options: [ { text: "Very small", isCorrect: false }, { text: "Made of one cell", isCorrect: true }, { text: "Lives everywhere", isCorrect: false } ] },
                          quiz2: { id: "page20-q47", question: "What tool do you need to see most microorganisms?", options: [ { text: "Telescope", isCorrect: false }, { text: "Magnifying glass", isCorrect: false }, { text: "Microscope", isCorrect: true } ] },
                          quiz3: { id: "page20-q48", question: "What is the smallest unit of life called?", options: [ { text: "Microorganism", isCorrect: false }, { text: "Microscope", isCorrect: false }, { text: "Cell", isCorrect: true } ] }
                     }
                 },
                 page21: { // Focus on Bacteria
                      easy: {
                          title: "Bacteria are Tiny <span aria-hidden='true'>🦠⚪|~</span>",
                          paragraphs: [
                              "Bacteria (back-TEER-ee-uh) <span aria-hidden='true'>🦠</span> are one kind of tiny microorganism <span aria-hidden='true'>🦠</span>. They are made of one cell <span aria-hidden='true'>1️⃣</span>.",
                              "Bacteria can be round <span aria-hidden='true'>⚪</span>, long |, or twisty ~ shapes.",
                              "One bacterium can split into two <span aria-hidden='true'>➡️✌️</span> to make more bacteria!",
                              "Bacteria live in many places, even harsh places like very hot water <span aria-hidden='true'>🔥💧</span>. They live in dirt, water, and even inside us! <span aria-hidden='true'>😊</span>",
                              "Because they have no backbone <span aria-hidden='true'>🚫🦴</span>, they are invertebrates too!"
                          ],
                          quiz1: { id: "page21-q49", question: "Which is NOT a shape of bacteria?", options: [ { text: "Round", isCorrect: false }, { text: "Long |", isCorrect: false }, { text: "Square", isCorrect: true } ] },
                          quiz2: { id: "page21-q50", question: "How do bacteria make more bacteria?", options: [ { text: "Laying eggs", isCorrect: false }, { text: "Splitting in two", isCorrect: true }, { text: "Growing bigger", isCorrect: false } ] },
                          quiz3: { id: "page21-q51", question: "Can bacteria live in hot places?", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false }, { text: "Only cold places", isCorrect: false } ] }
                      },
                      challenge: {
                           title: "Focus on Bacteria <span aria-hidden='true'>🦠</span>",
                           paragraphs: [
                              "Bacteria <span aria-hidden='true'>🦠</span> are one type of microorganism <span aria-hidden='true'>🦠</span>. They are usually made of just a single cell <span aria-hidden='true'>1️⃣</span>.",
                              "Bacteria come in different shapes, like spheres (balls <span aria-hidden='true'>⚪</span>), rods (sticks | ), or spirals (twisty ~).",
                              "Most reproduce by splitting into two <span aria-hidden='true'>✌️</span> (binary fission).",
                              "Bacteria can live in many different places, including harsh environments <span aria-hidden='true'>🔥💧</span> like hot springs, as well as soil, water, and inside other living things (like us!).",
                              "Because they have no backbone <span aria-hidden='true'>🚫🦴</span>, they are technically invertebrates, but usually studied separately due to being microorganisms."
                           ],
                           quiz1: { id: "page21-q49", question: "Which is NOT a main shape for bacteria?", options: [ { text: "Sphere (ball)", isCorrect: false }, { text: "Rod |", isCorrect: false }, { text: "Square", isCorrect: true } ] },
                           quiz2: { id: "page21-q50", question: "What is the process where one bacterium splits into two called?", options: [ { text: "Growing", isCorrect: false }, { text: "Binary fission", isCorrect: true }, { text: "Eating", isCorrect: false } ] },
                           quiz3: { id: "page21-q51", question: "True or False: Bacteria can survive in harsh places like hot springs.", options: [ { text: "True", isCorrect: true }, { text: "False", isCorrect: false } ] }
                      }
                  },
                  page22: { // Good vs. Bad Bacteria
                       easy: {
                           title: "Good <span aria-hidden='true'>👍</span> Bacteria, Bad <span aria-hidden='true'>👎</span> Bacteria",
                           paragraphs: [
                              "Some bacteria <span aria-hidden='true'>🦠</span> are good! <span aria-hidden='true'>👍</span> Good bacteria help our tummy break down food <span aria-hidden='true'>😋</span>.",
                              "We use good bacteria to make yogurt <span aria-hidden='true'>🍦</span>.",
                              "Some bacteria are bad <span aria-hidden='true'>👎</span>. Bad bacteria can make you sick <span aria-hidden='true'>🤒</span>. Wash your hands <span aria-hidden='true'>🧼</span> to stop bad bacteria!"
                           ],
                           quiz1: { id: "page22-q52", question: "Good bacteria...?", options: [ { text: "Always make you sick", isCorrect: false }, { text: "Can help you", isCorrect: true }, { text: "Are not alive", isCorrect: false } ] },
                           quiz2: { id: "page22-q53", question: "Bad bacteria...?", options: [ { text: "Help make yogurt", isCorrect: false }, { text: "Can make you sick", isCorrect: true }, { text: "Live only in dirt", isCorrect: false } ] },
                           quiz3: { id: "page22-q54", question: "Good bacteria in our tummy help us...?", options: [ { text: "Break down food", isCorrect: true }, { text: "See better", isCorrect: false }, { text: "Run faster", isCorrect: false } ] }
                       },
                       challenge: {
                            title: "Good <span aria-hidden='true'>👍</span> vs. Bad <span aria-hidden='true'>👎</span> Bacteria",
                            paragraphs: [
                               "Not all bacteria <span aria-hidden='true'>🦠</span> are harmful. Some bacteria are helpful <span aria-hidden='true'>👍</span> (beneficial).",
                               "They help us digest food <span aria-hidden='true'>😋</span> and are used to make foods like yogurt <span aria-hidden='true'>🍦</span>.",
                               "Other bacteria are harmful <span aria-hidden='true'>👎</span> (pathogenic). They can cause sickness <span aria-hidden='true'>🤒</span>. Washing your hands <span aria-hidden='true'>🧼</span> well helps stop the spread of harmful bacteria."
                            ],
                            quiz1: { id: "page22-q52", question: "What is another word for helpful bacteria?", options: [ { text: "Pathogenic", isCorrect: false }, { text: "Beneficial", isCorrect: true }, { text: "Viral", isCorrect: false } ] },
                            quiz2: { id: "page22-q53", question: "What is another word for bacteria that cause disease?", options: [ { text: "Beneficial", isCorrect: false }, { text: "Probiotic", isCorrect: false }, { text: "Pathogenic", isCorrect: true } ] },
                            quiz3: { id: "page22-q54", question: "What important job do helpful bacteria do inside our bodies?", options: [ { text: "Help digest food", isCorrect: true }, { text: "Make us sneeze", isCorrect: false }, { text: "Build muscles", isCorrect: false } ] }
                       }
                   },
                    page23: { // Bonus Section Separator - Static HTML
                        easy: { title: "Bonus Topic" }, challenge: { title: "Bonus Topic" }
                    },
                  page24: {
                      easy: {
                          title: "What are Viruses? <span aria-hidden='true'>🦠</span>",
                          paragraphs: [
                              "Viruses (VY-rus-iz) <span aria-hidden='true'>🦠</span> are even smaller than bacteria!",
                              "Viruses can't make more viruses by themselves <span aria-hidden='true'>🤔</span>.",
                              "They need to be inside a living thing (like you! <span aria-hidden='true'>😊</span>) to make more <span aria-hidden='true'>➡️👥</span>. We call the living thing a host cell <span aria-hidden='true'>🏠</span>.",
                              "Viruses can make you sick <span aria-hidden='true'>🤒</span> (like a cold <span aria-hidden='true'>🤧</span>)."
                          ],
                          quiz1: { id: "page24-q59", question: "What does a virus need to make more?", options: [
                              { text: "Water", isCorrect: false },
                              { text: "Food", isCorrect: false },
                              { text: "To be inside a living thing/host cell", isCorrect: true }
                          ]},
                          quiz2: { id: "page24-q60", question: "Are viruses like bacteria?", options: [
                              { text: "Yes, they are the same", isCorrect: false },
                              { text: "No, viruses are smaller and need help", isCorrect: true },
                              { text: "No, bacteria are smaller", isCorrect: false }
                          ]}
                      },
                      challenge: {
                          title: "Understanding Viruses <span aria-hidden='true'>🦠</span>",
                          paragraphs: [
                              "Viruses <span aria-hidden='true'>🦠</span> are even smaller than bacteria!",
                              "Scientists debate if they are truly 'alive' <span aria-hidden='true'>🤔</span> because they cannot reproduce on their own.",
                              "Viruses need to get inside a living cell (a host cell) to make copies of themselves (replicate). They take over the host cell to make more viruses.",
                              "Viruses often cause sicknesses, like the cold or the flu."
                          ],
                          quiz1: { id: "page24-q59", question: "What does a virus need to make copies of itself?", options: [
                              { text: "Water", isCorrect: false },
                              { text: "Sunlight", isCorrect: false },
                              { text: "A host cell", isCorrect: true }
                          ]},
                          quiz2: { id: "page24-q60", question: "Are viruses considered fully living organisms by all scientists?", options: [
                              { text: "Yes", isCorrect: false },
                              { text: "No, because they need a host to reproduce", isCorrect: true },
                              { text: "Yes, because they cause disease", isCorrect: false }
                          ]}
                      }
                  },
                   page25: { // Review General Invertebrates & Insects
                       easy: {
                           title: "Review: What are Invertebrates? <span aria-hidden='true'>⭐👍</span>",
                           reviewContent: [
                               "**Invertebrates** are animals with NO backbone <span aria-hidden='true'>🚫🦴</span>",
                               "Many have a hard outside cover (exoskeleton) <span aria-hidden='true'>💪</span>",
                               "**Insects** are one type of invertebrate <span aria-hidden='true'>🦋</span>",
                               "Insects have 6 legs <span aria-hidden='true'>🦵</span>",
                               "They have 3 main body parts",
                               "They have antennae (feelers) on their head <span aria-hidden='true'>👋</span>",
                               "They are cold-blooded <span aria-hidden='true'>🥶</span>",
                               "They usually lay eggs <span aria-hidden='true'>🥚</span>"
                           ],
                           quiz1: { id: "page25-q55", question: "An animal with 6 legs and 3 body parts is a(n)...?", options: [ { text: "Arachnid", isCorrect: false }, { text: "Insect", isCorrect: true }, { text: "Mollusk", isCorrect: false } ] },
                           quiz2: { id: "page25-q56", question: "What is the smallest tiny part of a living thing called?", options: [ { text: "Tiny", isCorrect: false }, { text: "Cell", isCorrect: true }, { text: "Bad", isCorrect: false } ] }
                       },
                       challenge: {
                           title: "Review: What are Invertebrates? <span aria-hidden='true'>⭐</span>",
                           reviewContent: [
                               "Invertebrates are animals without backbones <span aria-hidden='true'>🚫🦴</span>",
                               "Many possess an exoskeleton for support/protection <span aria-hidden='true'>💪</span>",
                               "Insects are a class of invertebrates <span aria-hidden='true'>🦋</span>",
                               "Insects have 6 legs (three pairs) <span aria-hidden='true'>🦵</span>",
                               "Insects have 3 body segments (head, thorax, abdomen)",
                               "Insects have antennae for sensing <span aria-hidden='true'>👋</span>",
                               "Insects are cold-blooded (ectothermic) <span aria-hidden='true'>🥶</span>",
                               "Insects are oviparous (lay eggs) <span aria-hidden='true'>🥚</span>"
                           ],
                           quiz1: { id: "page25-q55", question: "An invertebrate with 6 legs and 3 body parts is a(n)...?", options: [ { text: "Arachnid", isCorrect: false }, { text: "Insect", isCorrect: true }, { text: "Mollusk", isCorrect: false } ] },
                           quiz2: { id: "page25-q56", question: "What is the term for an organism made of only one cell?", options: [ { text: "Microscopic", isCorrect: false }, { text: "Unicellular", isCorrect: true }, { text: "Pathogenic", isCorrect: false } ] }
                       }
                  },
                  page26: { // Review Arachnids & Mollusks
                      easy: {
                          title: "Review: Spiders & Snails <span aria-hidden='true'>🕷️🐌</span>",
                          reviewContent: [
                              "**Arachnids** are a group including spiders <span aria-hidden='true'>🕷️</span>",
                              "Arachnids have 8 legs <span aria-hidden='true'>🦵</span>",
                              "They have 2 main body parts",
                              "They do NOT have antennae (feelers) <span aria-hidden='true'>🚫👋</span>",
                              "Some can use venom (poison) <span aria-hidden='true'>☠️</span>",
                              "**Mollusks** are a group including snails <span aria-hidden='true'>🐌</span> & octopuses <span aria-hidden='true'>🐙</span>",
                              "Mollusks have soft bodies <span aria-hidden='true'>😊</span>",
                              "Many have a hard shell <span aria-hidden='true'>🐚</span>",
                              "A body part called the mantle makes the shell",
                              "Many use a 'foot' part to move <span aria-hidden='true'>🦶</span>",
                              "Examples: Snails <span aria-hidden='true'>🐌</span>, Clams <span aria-hidden='true'>🦪</span>, Octopuses <span aria-hidden='true'>🐙</span>"
                          ],
                          quiz1: { id: "page26-q57", question: "An animal with 8 legs and no antennae is a(n)...?", options: [ { text: "Insect", isCorrect: false }, { text: "Arachnid", isCorrect: true }, { text: "Mollusk", isCorrect: false } ] },
                          quiz2: { id: "page26-q58", question: "Which group includes snails and octopuses?", options: [ { text: "Insects", isCorrect: false }, { text: "Mollusks", isCorrect: true }, { text: "Arachnids", isCorrect: false } ] }
                      },
                      challenge: {
                          title: "Review: Spiders & Snails <span aria-hidden='true'>🕷️🐌</span>",
                          reviewContent: [
                              "Arachnids are a class of invertebrates (e.g., spiders <span aria-hidden='true'>🕷️</span>)",
                              "Arachnids have 8 legs (four pairs) <span aria-hidden='true'>🦵</span>",
                              "Arachnids have 2 body segments (cephalothorax, abdomen)",
                              "Arachnids lack antennae <span aria-hidden='true'>🚫👋</span>",
                              "Many breathe using book lungs <span aria-hidden='true'>😮‍💨</span>",
                              "Some utilize venom <span aria-hidden='true'>☠️</span>",
                              "Mollusks are a diverse invertebrate group <span aria-hidden='true'>🐌🐙🐚</span>",
                              "Mollusks have soft bodies",
                              "A mantle often secretes a shell <span aria-hidden='true'>🐚</span>",
                              "Most have a muscular ventral foot <span aria-hidden='true'>🦶👇</span>",
                              "Include Gastropods, Bivalves, Cephalopods"
                          ],
                          quiz1: { id: "page26-q57", question: "An invertebrate with 8 legs and a cephalothorax is a(n)...?", options: [ { text: "Insect", isCorrect: false }, { text: "Arachnid", isCorrect: true }, { text: "Mollusk", isCorrect: false } ] },
                          quiz2: { id: "page26-q58", question: "Which group includes snails, clams, and octopuses?", options: [ { text: "Insects", isCorrect: false }, { text: "Mollusks", isCorrect: true }, { text: "Arachnids", isCorrect: false } ] }
                      }
                  },
                  page27: { // Review Microorganisms
                      easy: {
                          title: "Review: Tiny Life <span aria-hidden='true'>🔬🦠</span>",
                          reviewContent: [
                              "Microorganisms are tiny living things <span aria-hidden='true'>🔬🦠</span>",
                              "We need a microscope to see most of them <span aria-hidden='true'>🔬</span>",
                              "They are made of tiny parts called cells <span aria-hidden='true'>1️⃣</span>",
                              "**Bacteria** are one type <span aria-hidden='true'>🦠</span>",
                              "They are tiny and made of one cell <span aria-hidden='true'>1️⃣</span>",
                              "They have shapes, like round or long <span aria-hidden='true'>⚪ | ~</span>",
                              "They split in two to make more <span aria-hidden='true'>➡️✌️</span>",
                              "They can live in very tough places <span aria-hidden='true'>🔥</span>",
                              "Some bacteria are helpful (good) <span aria-hidden='true'>👍</span>",
                              "Some bacteria are harmful (bad) <span aria-hidden='true'>👎</span>",
                              "**Viruses** are another tiny type <span aria-hidden='true'>🦠</span>",
                              "Viruses are even smaller than bacteria!",
                              "They need to be inside a living 'host' cell to make copies <span aria-hidden='true'>🏠➡️👥</span>",
                              "Viruses often make us sick <span aria-hidden='true'>🤒</span>"
                          ],
                          quiz1: { id: "page27-q59", question: "What tiny living thing is made of one cell?", options: [ { text: "Bacteria", isCorrect: true }, { text: "Virus", isCorrect: false }, { text: "Insect", isCorrect: false } ] },
                          quiz2: { id: "page27-q60", question: "What needs a host cell to make more of itself?", options: [ { text: "Bacteria", isCorrect: false }, { text: "Virus", isCorrect: true }, { text: "Mollusk", isCorrect: false } ] }
                      },
                      challenge: {
                          title: "Review: Tiny Life <span aria-hidden='true'>🔬🦠</span>",
                          reviewContent: [
                              "Microorganisms are microscopic living things <span aria-hidden='true'>🔬🦠</span>",
                              "Most require a microscope to be seen <span aria-hidden='true'>🔬</span>",
                              "The basic unit is the cell <span aria-hidden='true'>1️⃣</span>",
                              "Bacteria are single-celled microorganisms <span aria-hidden='true'>🦠</span>",
                              "Common shapes include spheres, rods, spirals <span aria-hidden='true'>⚪|~</span>",
                              "Reproduce mainly by binary fission <span aria-hidden='true'>➡️✌️</span>",
                              "Can inhabit extreme environments <span aria-hidden='true'>🔥</span>",
                              "Can be beneficial (helpful) <span aria-hidden='true'>👍</span>",
                              "Can be pathogenic (harmful) <span aria-hidden='true'>👎</span>",
                              "Viruses are infectious agents <span aria-hidden='true'>🦠</span>",
                              "Viruses are smaller than bacteria",
                              "Require a host cell to replicate <span aria-hidden='true'>🏠➡️👥</span>",
                              "Often cause diseases <span aria-hidden='true'>🤒</span>"
                          ],
                          quiz1: { id: "page27-q59", question: "What is a tiny living thing made of one cell?", options: [ { text: "Bacteria", isCorrect: true }, { text: "Virus", isCorrect: false }, { text: "Mollusk", isCorrect: false } ] },
                          quiz2: { id: "page27-q60", question: "What MUST a virus have to replicate?", options: [ { text: "Oxygen", isCorrect: false }, { text: "A host cell", isCorrect: true }, { text: "Sunlight", isCorrect: false } ] }
                      }
                  }
        // Page 26 (Finish Screen) is static HTML updated by JS
    };


    // --- DOM Elements ---
    const scoreDisplay = document.getElementById('current-score');
    const finalScoreDisplay = document.getElementById('final-score');
    const totalPossibleScoreDisplay = document.getElementById('total-possible-score');
    const scoreAreaContainer = document.getElementById('score-area-container');
    const lessonContainer = document.getElementById('lesson-container');
    const mainHeaderTitle = document.getElementById('main-header-title');
    const plusOneTemplate = document.getElementById('plus-one-template');
    const quizOptionTemplate = document.getElementById('quiz-option-template');
    const listItemTemplate = document.getElementById('list-item-template'); // Template for list items
    const draggableItemTemplate = document.getElementById('draggable-item-template'); // Template for draggable items
    const habitatDropZoneTemplate = document.getElementById('habitat-drop-zone-template'); // Template for habitat drop zones
    const ttsSpeedSlider = document.getElementById('tts-speed');
    const speedValueDisplay = document.getElementById('speed-value');
    const ttsStopButton = document.getElementById('tts-stop');
    const backButton = document.getElementById('back-button');
    const nextButton = document.getElementById('next-button');
    const navigationControls = document.getElementById('navigation-controls');
    // Finish screen text elements
    const finishTitle = document.getElementById('finish-title');
    const finishSubtitle = document.getElementById('finish-subtitle');
    const finishEncouragement = document.getElementById('finish-encouragement');


    // --- Speech Synthesis ---
    const synth = window.speechSynthesis;
    let currentUtterance = null;
    let highlightedElement = null;

    // --- Helper: Clean Text ---
    function getCleanText(segmentElement) {
         if (!segmentElement) return '';
         const clone = segmentElement.cloneNode(true);
         // Remove icons, controls, and aria-hidden elements
         clone.querySelectorAll('[aria-hidden="true"], .hidden-emoji, .option-icons, .tts-translate-wrapper, .ell-controls, i.fas, i.fab, i.far').forEach(el => el.remove());
         let cleanText = clone.textContent || clone.innerText || '';
         cleanText = cleanText.trim();
         // Remove emojis more comprehensively (if any remain)
         const emojiRegex = /[\u{1F300}-\u{1F5FF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}\u{FE00}-\u{FE0F}\u{200D}]/gu;
         cleanText = cleanText.replace(emojiRegex, '').replace(/\s+/g, ' ').trim();
         // Remove placeholder prefixes like (a), (b), etc.
         cleanText = cleanText.replace(/^\([a-zA-Z]\)\s*/, '');
         // Remove list bullets like '1.', '•' etc. if they get included accidentally
         cleanText = cleanText.replace(/^(\d+\.|•)\s*/, '');
         // Remove specific pronunciation guides (add any new ones if needed)
         cleanText = cleanText.replace(/\(oh-VIP-uh-rus\)/gi, '');
         cleanText = cleanText.replace(/\(met-uh-MORF-uh-sis\)/gi, '');
         cleanText = cleanText.replace(/\(pro-BOSS-iss\)/gi, '');
         cleanText = cleanText.replace(/\(uh-RACK-nids\)/gi, '');
         cleanText = cleanText.replace(/\(sef-uh-lo-THOR-ax\)/gi, '');
         cleanText = cleanText.replace(/\(MOLL-usks\)/gi, '');
         cleanText = cleanText.replace(/\(RAD-yoo-luh\)/gi, '');
         cleanText = cleanText.replace(/\(SEF-uh-luh-pod\)/gi, '');
         cleanText = cleanText.replace(/\(MY-kroh-OR-gan-iz-ums\)/gi, '');
         cleanText = cleanText.replace(/\(MY-kroh-skohp\)/gi, '');
         cleanText = cleanText.replace(/\(back-TEER-ee-uh\)/gi, '');
         cleanText = cleanText.replace(/\(VY-rus-iz\)/gi, '');

         return cleanText.trim();
    }

    // --- Helper: Find Associated Segment ---
    function findAssociatedSegment(buttonElement) {
         let segment = null;

        // --- Check 1: Quiz/Option Buttons ---
        const optionIconsWrapper = buttonElement.closest('.option-icons');
        if (optionIconsWrapper) {
            const optionGroup = optionIconsWrapper.closest('.option-group');
            if (optionGroup) {
                const mainButton = optionGroup.querySelector('.quiz-option-button');
                if (mainButton) { segment = mainButton.querySelector('.translatable-segment'); if (segment) return segment; }
            }
        }
         const ttsTranslateWrapper = buttonElement.closest('.tts-translate-wrapper');
        if (ttsTranslateWrapper) {
            const segmentSibling = ttsTranslateWrapper.previousElementSibling;
            if (segmentSibling && segmentSibling.matches('.translatable-segment')) { return segmentSibling; }
            const ancestor = ttsTranslateWrapper.closest('.quiz-question, .quiz-feedback, .finish-screen-content p, .finish-screen-content h2');
            if (ancestor) { segment = ancestor.querySelector('.translatable-segment'); if (segment) return segment; }
        }
         if (buttonElement.classList.contains('quiz-option-button')) {
             segment = buttonElement.querySelector('.translatable-segment'); if (segment) return segment;
         }

        // --- Check 2: General ELL Controls (Paragraphs, List Items, Activities, Finish Screen) ---
        const ellControlsWrapper = buttonElement.closest('.ell-controls');
        if (ellControlsWrapper) {
            const listItem = ellControlsWrapper.closest('li'); // List item check first
            if (listItem) { segment = listItem.querySelector(':scope > .translatable-segment'); if (segment) return segment; }

            const blockContainer = ellControlsWrapper.closest('.block-container'); // Standard block
             if (blockContainer) {
                 const contentWrapper = blockContainer.querySelector('.content-wrapper');
                 if (contentWrapper) { segment = contentWrapper.querySelector('.translatable-segment'); if (segment) return segment; }
             }

            const activityDesc = ellControlsWrapper.closest('.activity-description .block-container'); // Activity description
            if(activityDesc){
                const contentWrapper = activityDesc.querySelector('.content-wrapper');
                 if (contentWrapper) { segment = contentWrapper.querySelector('.translatable-segment'); if (segment) return segment; }
            }
             const transitionText = ellControlsWrapper.closest('.transition-text .block-container'); // Transition page
            if(transitionText){
                const contentWrapper = transitionText.querySelector('.content-wrapper');
                 if (contentWrapper) { segment = contentWrapper.querySelector('.translatable-segment'); if (segment) return segment; }
            }

            // Check finish screen structure (might be inside a block container already covered)
             const finishContainer = ellControlsWrapper.closest('.finish-screen-content');
             if (finishContainer && !blockContainer) { // Only if not already found via block-container
                 const wrapper = ellControlsWrapper.closest('.block-container'); // Find the container again
                 if (wrapper) {
                      const contentWrapper = wrapper.querySelector('.content-wrapper');
                       if(contentWrapper) { segment = contentWrapper.querySelector('.translatable-segment'); if (segment) return segment; }
                 }
             }
        }


        // --- If no segment found after all checks ---
        console.warn("Could not find associated segment for button:", buttonElement);
        return null;
    }

    // --- TTS Functions ---
    function speakText(buttonElement) {
         if (!synth) return;
         const segmentElement = findAssociatedSegment(buttonElement);
         if (!segmentElement) { console.warn("Speak: No segment found", buttonElement); return; }
         const textToSpeak = getCleanText(segmentElement);
         if (!textToSpeak) { console.warn("TTS: Empty text", segmentElement); return; }
         stopTTS();
         currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
         currentUtterance.rate = parseFloat(sessionStorage.getItem('ttsSpeed') || ttsSpeedSlider.value || '1');
         currentUtterance.lang = 'en-US'; // Or allow language selection
         currentUtterance.onstart = () => { removeHighlight(); segmentElement.classList.add('highlight'); highlightedElement = segmentElement; };
         currentUtterance.onend = () => { removeHighlight(); currentUtterance = null; highlightedElement = null; };
         currentUtterance.onerror = (event) => { console.error('TTS error:', event.error); removeHighlight(); currentUtterance = null; highlightedElement = null; };
         setTimeout(() => { if (synth && currentUtterance) synth.speak(currentUtterance); }, 50);
    }

    function stopTTS() {
        if (synth && synth.speaking) synth.cancel();
        removeHighlight();
        if (currentUtterance) { currentUtterance.onstart = null; currentUtterance.onend = null; currentUtterance.onerror = null; currentUtterance = null; }
        highlightedElement = null;
    }

    function removeHighlight() {
         document.querySelectorAll('.translatable-segment.highlight').forEach(el => el.classList.remove('highlight'));
         highlightedElement = null;
    }

    // --- Translation Function ---
    function translateSegment(buttonElement) {
         const segmentElement = findAssociatedSegment(buttonElement);
         if (!segmentElement) { console.warn("Translate: No segment found", buttonElement); return; }
         const textToTranslate = getCleanText(segmentElement); // Use cleaned text for translation
         if (!textToTranslate) { console.warn("Translate: Empty text", segmentElement); return; }
         const targetLang = 'th'; // Example: Thai
         const translateUrl = `https://translate.google.com/?sl=en&tl=${targetLang}&text=${encodeURIComponent(textToTranslate)}&op=translate`;
         window.open(translateUrl, TRANSLATE_WINDOW_NAME, 'noopener,noreferrer');
    }

    // --- Word Translation (Double Click) ---
    function handleDoubleClick(event) {
          const targetSegment = event.target.closest('.translatable-segment');
          if (targetSegment && !event.target.closest('button')) { // Ensure not clicking a button
              setTimeout(() => { // Allow selection to register
                 const selection = window.getSelection();
                 const selectedText = selection.toString().trim();
                 if (selectedText.length > 0 && selectedText.length < 50) {
                      if (selection.rangeCount > 0) {
                          const range = selection.getRangeAt(0);
                          if (targetSegment.contains(range.commonAncestorContainer)) {
                              const tempNode = document.createElement('span'); tempNode.textContent = selectedText;
                              const cleanSelectedText = getCleanText(tempNode); // Reuse cleaner
                              if (cleanSelectedText) {
                                  const targetLang = 'th'; // Example: Thai
                                  const translateUrl = `https://translate.google.com/?sl=en&tl=${targetLang}&text=${encodeURIComponent(cleanSelectedText)}&op=translate`;
                                  window.open(translateUrl, TRANSLATE_WINDOW_NAME, 'noopener,noreferrer');
                              }
                          }
                      }
                 }
             }, 50);
          }
    }

    // --- Gamification (+1 Effect) ---
    function showPlusOne(element) {
         if (!plusOneTemplate || !lessonContainer) return;
         const plusOne = plusOneTemplate.cloneNode(true);
         plusOne.style.display = 'block';
         const targetElement = element.closest('button') || element;
         lessonContainer.appendChild(plusOne);
         const rect = targetElement.getBoundingClientRect();
         const containerRect = lessonContainer.getBoundingClientRect();
         plusOne.style.left = `${rect.left - containerRect.left + targetElement.offsetWidth / 2}px`;
         plusOne.style.top = `${rect.top - containerRect.top - 10}px`;
         plusOne.style.position = 'absolute';
         setTimeout(() => { if (plusOne.parentNode === lessonContainer) lessonContainer.removeChild(plusOne); }, 1000);
    }

    // --- Difficulty Selection ---
    function selectDifficulty(selectedDifficulty) {
        difficulty = selectedDifficulty;
        sessionStorage.setItem('lessonDifficulty', difficulty);
        currentPage = 1; // Move to the first content page (page-1)
        sessionStorage.setItem('lessonCurrentPage', currentPage);
        scoreAreaContainer.style.display = 'block';
        navigationControls.style.display = 'flex';
        showPage();
    }

    // --- Dynamic Content Injection ---
    function injectPageContent(pageElement, pageNum, currentDifficulty) {
        const contentData = pageContent[`page${pageNum}`]?.[currentDifficulty];
        if (!contentData) { console.error(`No content found for page ${pageNum}, difficulty ${currentDifficulty}`); return; }

        // Reset page-specific activity completion state when injecting content
        delete activityCompletedState[pageNum];
        sessionStorage.removeItem(`activity_page${pageNum}_completed`);


        // --- Update Title ---
        const titleElement = pageElement.querySelector('.content-area .block-container h2.translatable-segment');
        if (titleElement && contentData.title) { titleElement.innerHTML = contentData.title; }
        else if (titleElement) { titleElement.innerHTML = ''; }
        else { console.warn(`Title element not found on page ${pageNum}`); }

        // --- Update Paragraphs ---
        const contentWrapperDivId = 'content-page' + pageNum;
        const contentWrapperDiv = pageElement.querySelector('#' + contentWrapperDivId);

        if (contentWrapperDiv && contentData.paragraphs && Array.isArray(contentData.paragraphs)) {
            contentWrapperDiv.innerHTML = '';
            let currentListElement = null;

            contentData.paragraphs.forEach(paragraphText => {
                if (!paragraphText || typeof paragraphText !== 'string') return;

                const isHeading = paragraphText.startsWith('### ');
                const isListItem = paragraphText.startsWith('* ');
                const isCallout = paragraphText.startsWith('!!! ');
                let cleanText = paragraphText;

                let container = document.createElement('div');
                container.className = 'block-container content-section';
                let textElement;
                let textWrapper = document.createElement('div');
                textWrapper.className = 'content-wrapper';

                if (isHeading) {
                    if (currentListElement) {
                        contentWrapperDiv.appendChild(currentListElement);
                        currentListElement = null;
                    }
                    cleanText = paragraphText.substring(4).trim();
                    container.classList.add('content-subheading-container');
                    textElement = document.createElement('h3');
                    textElement.className = 'content-subheading translatable-segment';

                } else if (isListItem) {
                    if (!currentListElement) {
                        currentListElement = document.createElement('ul');
                        currentListElement.className = 'content-list';
                        contentWrapperDiv.appendChild(currentListElement);
                    }
                    cleanText = paragraphText.substring(2).trim();
         console.log("injectPageContent called for pageNum:", pageNum, "difficulty:", currentDifficulty);
         if (contentData && contentData.paragraphs) {
             console.log("paragraphs for page", pageNum, ":", contentData.paragraphs);
         } else {
             console.log("No paragraphs found for page", pageNum);
         }
                    container = document.createElement('li');
                    container.className = 'block-container content-list-item';
                    textElement = document.createElement('p');
                    textElement.className = 'translatable-segment';

                } else if (isCallout) {
                    if (currentListElement) {
                        contentWrapperDiv.appendChild(currentListElement);
                        currentListElement = null;
                    }
                    cleanText = paragraphText.substring(4).trim();
                    container.classList.add('content-callout-container');
                    textWrapper = null;
                    textElement = document.createElement('blockquote');
                    textElement.className = 'content-callout translatable-segment';

                } else {
                    if (currentListElement) {
                        contentWrapperDiv.appendChild(currentListElement);
                        currentListElement = null;
                    }
                    cleanText = paragraphText.trim();
                    container.classList.add('standard-paragraph-block');
                    textElement = document.createElement('p');
                    textElement.className = 'translatable-segment';
                }

                textElement.innerHTML = cleanText;

                if (textWrapper) {
                    textWrapper.appendChild(textElement);
                    container.appendChild(textWrapper);
                } else {
                    container.appendChild(textElement);
                }

                const controls = document.createElement('div');
                controls.className = 'ell-controls';
                controls.innerHTML = `<button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>`;
                container.appendChild(controls);

                if (isListItem && currentListElement) {
                    currentListElement.appendChild(container);
                } else {
                    contentWrapperDiv.appendChild(container);
                }
            });

            if (currentListElement) {
                contentWrapperDiv.appendChild(currentListElement);
            }
        } else if (contentWrapperDiv) {
            contentWrapperDiv.innerHTML = '';
        }

         // --- Update Activity Instructions (Pages 6, 15, 18) ---
         if (contentData.activityInstruction) {
            const instructionContainer = pageElement.querySelector('.activity-description .block-container');
            if(instructionContainer){
                const instructionSegment = instructionContainer.querySelector('.translatable-segment');
                if (instructionSegment) instructionSegment.innerHTML = contentData.activityInstruction;
                instructionContainer.closest('.activity-description').style.display = 'block';
            }
         } else if ([6, 15, 18].includes(pageNum)) { // Hide container if no instruction on these pages
             const descContainer = pageElement.querySelector('.activity-description');
             if(descContainer) descContainer.style.display = 'none';
         }


         // --- Update Checklists (Page 6 - Insect Draw) or Comparison Lists (Page 10) ---
         if (pageNum === 6 && contentData.activityChecklist) {
             const listElement = pageElement.querySelector('#activity-checklist-page6');
             populateList(listElement, contentData.activityChecklist);
         } else if (pageNum === 10 && contentData.comparisonList) {
             const listElement = pageElement.querySelector('#comparison-list-page10');
             populateList(listElement, contentData.comparisonList);
         }

         // --- Setup Activities (Page 15 - Mollusk Sort, Page 18 - Habitat Match) ---
          if (pageNum === 15 && contentData.activityID === 'mollusk-sort') {
              setupMolluskSortActivity(pageElement, contentData);
          } else if (pageNum === 18 && contentData.activityID === 'habitat-match') {
              setupHabitatMatchActivity(pageElement, contentData);
          }

         // --- Inject Review Content (Page 25) ---
         if ((pageNum === 25 || pageNum === 26 || pageNum === 27) && contentData.reviewContent) {
             const reviewContainer = pageElement.querySelector('#review-content-page' + pageNum);
             if (reviewContainer) {
                 reviewContainer.innerHTML = '';
                 let currentListElement = null;

                 contentData.reviewContent.forEach(factText => {
                     const isHeading = factText.startsWith('**');
                     const cleanText = factText.replace(/\*\*/g, '').trim();

                     if (isHeading) {
                         if (currentListElement) {
                             reviewContainer.appendChild(currentListElement);
                             currentListElement = null;
                         }

                         const headingContainer = document.createElement('div');
                         headingContainer.className = 'block-container review-heading-container';

                         const headingWrapper = document.createElement('div');
                         headingWrapper.className = 'content-wrapper';

                         const headingElement = document.createElement('h3');
                         headingElement.className = 'review-heading translatable-segment';
                         headingElement.innerHTML = cleanText;
                         headingWrapper.appendChild(headingElement);
                         headingContainer.appendChild(headingWrapper);

                         const controls = document.createElement('div');
                         controls.className = 'ell-controls';
                         controls.innerHTML = `<button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>`;
                         headingContainer.appendChild(controls);

                         reviewContainer.appendChild(headingContainer);
                     } else {
                         if (!currentListElement) {
                             currentListElement = document.createElement('ul');
                             currentListElement.className = 'review-list';
                         }

                         const listItemContainer = document.createElement('li');
                         listItemContainer.className = 'block-container review-list-item';

                         const itemWrapper = document.createElement('div');
                         itemWrapper.className = 'content-wrapper';

                         const itemElement = document.createElement('p');
                         itemElement.className = 'translatable-segment';
                         itemElement.innerHTML = cleanText;
                         itemWrapper.appendChild(itemElement);
                         listItemContainer.appendChild(itemWrapper);

                         const controls = document.createElement('div');
                         controls.className = 'ell-controls';
                         controls.innerHTML = `<button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>`;
                         listItemContainer.appendChild(controls);

                         currentListElement.appendChild(listItemContainer);
                     }
                 });

                 if (currentListElement) {
                     reviewContainer.appendChild(currentListElement);
                 }
             }
         }

        // --- Update Quizzes (Standard & Optional) ---
        const quizBlocks = pageElement.querySelectorAll('.quiz-container .quiz-block');
        let quizIndex = 1;
        const availableQuizKeys = Object.keys(contentData).filter(key => key.startsWith('quiz')); // Scored quizzes
        const availableOptionalQuizKeys = Object.keys(contentData).filter(key => key.startsWith('optionalQuiz')); // Optional quizzes

        quizBlocks.forEach((quizBlock) => {
             // Determine if this block is for a standard quiz or an optional one
             const isOptional = quizBlock.dataset.quizId?.includes('-opt');
             let quizData = null;
             let quizKey = '';

             if (isOptional) {
                  quizKey = `optionalQuiz${quizIndex}`;
                  quizData = contentData[quizKey];
                   // Update optional quiz block ID for consistency if needed
                  if(quizData) quizBlock.dataset.quizId = quizData.id;

             } else {
                 quizKey = `quiz${quizIndex}`;
                 quizData = contentData[quizKey];
                 if (quizData) quizBlock.dataset.quizId = quizData.id; // Update the real quiz ID
             }

            if (quizData) {
                quizBlock.style.display = 'block';
                const questionSegment = quizBlock.querySelector('.quiz-question .translatable-segment');
                if (questionSegment) questionSegment.innerHTML = quizData.question;

                const optionsContainer = quizBlock.querySelector('.quiz-options');
                if (optionsContainer && quizOptionTemplate) {
                    optionsContainer.innerHTML = ''; // Clear existing
                    quizData.options.forEach(option => {
                        const optionClone = quizOptionTemplate.content.cloneNode(true);
                        const group = optionClone.querySelector('.option-group');
                        const button = optionClone.querySelector('.quiz-option-button');
                        const segment = button.querySelector('.translatable-segment');
                        const ttsButton = optionClone.querySelector('.tts-button');

                        segment.innerHTML = option.text;
                        // For standard quizzes, mark correctness
                        if (!isOptional && option.isCorrect) {
                            group.dataset.correct = 'true';
                        }
                        // For optional quizzes, just add the text, no correctness needed
                        // --- Standard Quiz Button Click Handler for ALL quizzes ---
                        button.onclick = () => handleQuizAnswer(button);

                        ttsButton.setAttribute('aria-label', `Read option: ${getCleanText(segment)}`);
                        optionsContainer.appendChild(optionClone);
                    });
                }
                // Clear feedback area (only for standard quizzes)
                 if (!isOptional) {
                     const feedbackSegment = quizBlock.querySelector('.quiz-feedback .translatable-segment');
                     const feedbackWrapper = quizBlock.querySelector('.quiz-feedback');
                     if (feedbackSegment) feedbackSegment.textContent = '';
                     if (feedbackWrapper) { feedbackWrapper.style.display = 'none'; feedbackWrapper.className = 'quiz-feedback'; }
                 }

                 quizIndex++; // Increment based on finding data for this block
            } else {
                 quizBlock.style.display = 'none'; // Hide if no data
                 // Keep existing data-quiz-id or set a placeholder
                 if(!quizBlock.dataset.quizId || quizBlock.dataset.quizId === ''){
                     quizBlock.dataset.quizId = `page${pageNum}-q${quizIndex}-nodata`;
                 }
            }
        });


         // Hide difficulty-specific elements NOT matching current difficulty
         pageElement.querySelectorAll('[data-easy-only]').forEach(el => el.style.display = (currentDifficulty === 'easy') ? (el.tagName === 'UL' ? 'block' : 'flex') : 'none');
         pageElement.querySelectorAll('[data-challenge-only]').forEach(el => el.style.display = (currentDifficulty === 'challenge') ? (el.tagName === 'UL' ? 'block' : 'flex') : 'none');
    }

    // Helper function to populate lists (Checklists, Comparison)
    function populateList(listElement, items) {
        if (listElement && listItemTemplate && items && items.length > 0) {
            listElement.innerHTML = ''; // Clear existing
            items.forEach(itemText => {
                const liClone = listItemTemplate.content.cloneNode(true);
                liClone.querySelector('.translatable-segment').innerHTML = itemText;
                listElement.appendChild(liClone);
            });
            listElement.style.display = 'block'; // Make sure UL is visible
        } else if (listElement) {
            listElement.style.display = 'none'; // Hide if no data or template
        }
    }

    // --- Navigation ---
    function showPage() {
        if (!difficulty && currentPage > 0) { // Check against page 0 (welcome)
             console.error("Difficulty not set!");
             difficulty = null; currentPage = 0;
             sessionStorage.removeItem('lessonDifficulty'); sessionStorage.removeItem('lessonCurrentPage');
        }

        stopTTS();
        quizAnsweredState = {}; // Reset page-specific answered state
        // Do NOT reset activityCompletedState here, keep it persistent for the session

        document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active'));

        let pageIdToShow = `page-${currentPage}`;
        let pageToShow = document.getElementById(pageIdToShow);

        if (currentPage === 0) { // Welcome screen
            navigationControls.style.display = 'none';
            scoreAreaContainer.style.display = 'none';
            mainHeaderTitle.textContent = "Invertebrates & Microorganisms"; // Reset title
        } else if (currentPage === totalPages - 1) { // Finish page (index 25, totalPages is 26)
             pageIdToShow = `page-${totalPages - 1}`; // Explicitly target finish page ID
             pageToShow = document.getElementById(pageIdToShow);
             navigationControls.style.display = 'flex'; // Show nav but Next should be disabled
            if(pageToShow) updateFinishScreen();
        } else {
            // Content page (1 to totalPages - 2)
            if (pageToShow && difficulty) {
                 injectPageContent(pageToShow, currentPage, difficulty);
                 navigationControls.style.display = 'flex';
                 // Check if activity state needs restoring (from session storage)
                 if(sessionStorage.getItem(`activity_page${currentPage}_completed`)) {
                     activityCompletedState[currentPage] = true;
                     // Optionally provide visual feedback that activity was completed (e.g., disable button)
                      const activityButton = pageToShow.querySelector('.activity-container button');
                      if(activityButton && activityButton.id.startsWith('check-')){
                           activityButton.disabled = true;
                           activityButton.textContent = "Checked!";
                      }
                 }

            } else if (!difficulty) {
                 console.error("Difficulty not selected, cannot show content page.");
                 currentPage = 0; pageIdToShow = 'page-0'; pageToShow = document.getElementById(pageIdToShow);
                 navigationControls.style.display = 'none'; scoreAreaContainer.style.display = 'none';
            }
        }

        if (pageToShow) {
            pageToShow.classList.add('active');
            mainHeaderTitle.textContent = pageToShow.dataset.title || "Invertebrates Lesson";
            lessonContainer.scrollTop = 0; // Scroll content area to top
            window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll window to top
            if (currentPage > 0 && currentPage < totalPages - 1) { // Don't restore quiz states on welcome/finish
                 restoreQuizStatesForPage(pageToShow);
            }
            updateNavigationButtons();
        } else {
            console.error(`Page structure not found: ${pageIdToShow}`);
            currentPage = 0; difficulty = null;
            sessionStorage.removeItem('lessonDifficulty'); sessionStorage.removeItem('lessonCurrentPage');
            showPage(); // Recover to page 0
        }
    }

    function nextPage() {
        // Allow moving from bonus page (24) even without quiz/activity
         const allowNext = (currentPage === 24) || checkCompletion();

        if (currentPage < totalPages - 1 && allowNext) { // Stop before finish page index
            currentPage++;
            sessionStorage.setItem('lessonCurrentPage', currentPage);
            showPage();
        } else if (!allowNext) {
             console.warn("Next button clicked, but page not complete.");
             // Optional feedback: alert('Please answer all questions or complete the activity on this page first.');
        }
    }

    function prevPage() {
        stopTTS();
        if (currentPage > 0) { // Can go back from page 1 to 0
            currentPage--;
            sessionStorage.setItem('lessonCurrentPage', currentPage);
             if (currentPage === 0) { // If returning to welcome page
                difficulty = null;
                sessionStorage.removeItem('lessonDifficulty');
             }
            showPage();
        }
    }

function updateNavigationButtons() {
     backButton.disabled = (currentPage <= 0); // Disable back on page 0

     // Determine if the current page completion requirements are met
     const isComplete = checkCompletion(); // Call the potentially complex check
     console.log(`==> updateNavigationButtons: checkCompletion() returned: ${isComplete} for page ${currentPage}`);

     // Determine if this is the last content page before the finish screen
     // totalPages = 27 (0-26), finish is 26. Last content page is 25.
     const isLastContentPage = currentPage >= totalPages - 1; // Only the finish page disables Next
     console.log(`==> updateNavigationButtons: isLastContentPage = ${isLastContentPage} (current: ${currentPage}, totalPages-2: ${totalPages-2})`);


     // Disable 'Next' if we are on the last content page OR if the current page is not complete
     nextButton.disabled = isLastContentPage || !isComplete;

     // Set the tooltip title for the Next button
     nextButton.title = nextButton.disabled
                           ? (isLastContentPage ? "End of lesson" : "Please answer all required questions or complete the activity first")
                           : "Go to the next page";

    console.log(`==> updateNavigationButtons: Final state -> Back disabled=${backButton.disabled}, Next disabled=${nextButton.disabled}, Title='${nextButton.title}'`);
}


    // --- Quiz Handling ---
    function handleQuizAnswer(button) {
        const optionGroup = button.closest('.option-group');
        const quizBlock = button.closest('.quiz-block');
        if (!optionGroup || !quizBlock || !button.classList.contains('quiz-option-button')) return;

        const quizId = quizBlock.dataset.quizId;
        if (!quizId || quizId.endsWith('-nodata') || quizId.includes('-opt')) { // Ignore optional questions here
            console.warn("Attempted to score non-standard quiz:", quizBlock);
            return;
        }

        if (quizAnsweredState[quizId] || sessionStorage.getItem(quizId + '_answered')) {
            console.log(`Quiz ${quizId} already answered.`); return;
        }

        stopTTS();
        quizBlock.classList.add('answered');
        quizAnsweredState[quizId] = true; // Mark answered for this page load
        sessionStorage.setItem(quizId + '_answered', 'true'); // Mark persistently

        const isCorrect = optionGroup.dataset.correct === 'true';
        const feedbackElement = quizBlock.querySelector('.quiz-feedback');
        const feedbackSegment = feedbackElement ? feedbackElement.querySelector('.translatable-segment') : null;

        quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => btn.disabled = true);

        if (isCorrect) {
            button.classList.add('correct');
            let score = parseInt(sessionStorage.getItem('lessonScore') || '0');
            score++;
            sessionStorage.setItem('lessonScore', score);
            currentScore = score;
            updateScoreDisplay();
            showPlusOne(button);
            if (feedbackSegment) feedbackSegment.textContent = "Correct! 🎉";
            if (feedbackElement) feedbackElement.className = 'quiz-feedback correct';
        } else {
            button.classList.add('incorrect');
            const correctOptionBtn = quizBlock.querySelector('.option-group[data-correct="true"] .quiz-option-button');
            if (correctOptionBtn) correctOptionBtn.classList.add('correct');
            if (feedbackSegment) feedbackSegment.textContent = "Not quite. The correct answer is highlighted green.";
            if (feedbackElement) feedbackElement.className = 'quiz-feedback incorrect';
        }

        if(feedbackElement) feedbackElement.style.display = 'flex';

        updateNavigationButtons(); // Re-check completion status
    }

     function updateScoreDisplay() {
        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        if (scoreDisplay) scoreDisplay.textContent = currentScore;
        if (finalScoreDisplay) finalScoreDisplay.textContent = currentScore;
        if (totalPossibleScoreDisplay) totalPossibleScoreDisplay.textContent = totalQuizzes;
    }

    function updateFinishScreen() {
        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        if (finalScoreDisplay) finalScoreDisplay.textContent = currentScore;
        if (totalPossibleScoreDisplay) totalPossibleScoreDisplay.textContent = totalQuizzes;

        const savedDifficulty = sessionStorage.getItem('lessonDifficulty');
        if (finishTitle && finishSubtitle && finishEncouragement) {
             if (savedDifficulty === 'easy') {
                 finishTitle.innerHTML = "🎉 All Done! 🥳";
                 finishSubtitle.textContent = "Good job! You learned a lot today!";
                 finishEncouragement.innerHTML = "Keep exploring the amazing world of tiny creatures! <span aria-hidden='true'>✨👍</span>";
             } else { // challenge
                 finishTitle.innerHTML = "🏆 Lesson Complete!";
                 finishSubtitle.textContent = "Great job learning about invertebrates and tiny microorganisms!";
                 finishEncouragement.innerHTML = "Keep learning and discovering! <span aria-hidden='true'>🧠✨</span>";
             }
        }
    }

     // --- Activity Handling (Placeholders) ---
     // These need actual drag/drop implementation later if required
     let draggedItem = null;

     function setupMolluskSortActivity(pageElement, contentData) {
         const draggableContainer = pageElement.querySelector('#draggable-mollusks');
         const dropZoneShell = pageElement.querySelector('#drop-zone-shell');
         const dropZoneNoShell = pageElement.querySelector('#drop-zone-no-shell');
         const checkButton = pageElement.querySelector('#check-sort-button');
         const feedbackEl = pageElement.querySelector('#sort-feedback');

         if (!draggableContainer || !dropZoneShell || !dropZoneNoShell || !checkButton || !feedbackEl || !draggableItemTemplate) return;

         // Clear previous items
         draggableContainer.innerHTML = '';
         dropZoneShell.innerHTML = `<h4>${contentData.dropZoneTitle1 || 'Has Shell'}</h4>`; // Add titles back
         dropZoneNoShell.innerHTML = `<h4>${contentData.dropZoneTitle2 || 'No Shell'}</h4>`;
         feedbackEl.textContent = '';
         checkButton.disabled = false;
         checkButton.textContent = "Check Answers";

         contentData.draggableItems.forEach(item => {
             const itemClone = draggableItemTemplate.content.cloneNode(true);
             const span = itemClone.querySelector('span');
             span.innerHTML = item.text;
             span.dataset.group = item.group;
             draggableContainer.appendChild(itemClone);
         });

         addDragDropListeners(pageElement);
     }

     function setupHabitatMatchActivity(pageElement, contentData) {
         const draggableContainer = pageElement.querySelector('#draggable-animals');
         const dropZoneContainer = pageElement.querySelector('#habitat-drop-zones');
         const checkButton = pageElement.querySelector('#check-habitat-button');
         const feedbackEl = pageElement.querySelector('#habitat-feedback');

          if (!draggableContainer || !dropZoneContainer || !checkButton || !feedbackEl || !draggableItemTemplate || !habitatDropZoneTemplate) return;

          // Clear previous items
         draggableContainer.innerHTML = '';
         dropZoneContainer.innerHTML = '';
         feedbackEl.textContent = '';
         checkButton.disabled = false;
         checkButton.textContent = "Check Answers";


         contentData.draggableItems.forEach(item => {
             const itemClone = draggableItemTemplate.content.cloneNode(true);
             const span = itemClone.querySelector('span');
             span.innerHTML = item.text;
             span.dataset.animal = item.animal;
             draggableContainer.appendChild(itemClone);
         });

          contentData.habitatDropZones.forEach(zone => {
                const zoneClone = habitatDropZoneTemplate.content.cloneNode(true);
                const div = zoneClone.querySelector('.habitat-zone');
                const img = zoneClone.querySelector('.habitat-image');
                const h4 = zoneClone.querySelector('.habitat-name');

                div.dataset.habitat = zone.habitat;
                img.src = zone.src;
                img.alt = zone.alt;
                h4.innerHTML = zone.name;
                dropZoneContainer.appendChild(zoneClone);
          });

         addDragDropListeners(pageElement);
     }

     function addDragDropListeners(pageElement) {
         const draggables = pageElement.querySelectorAll('.draggable-item');
         const dropZones = pageElement.querySelectorAll('.drop-zone');

         draggables.forEach(draggable => {
             draggable.addEventListener('dragstart', (e) => {
                 draggedItem = e.target;
                 setTimeout(() => e.target.style.opacity = '0.5', 0);
             });
             draggable.addEventListener('dragend', (e) => {
                 e.target.style.opacity = '1';
                 draggedItem = null;
             });
         });

         dropZones.forEach(zone => {
             zone.addEventListener('dragover', (e) => {
                 e.preventDefault();
                 zone.classList.add('drag-over');
             });
             zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
             zone.addEventListener('drop', (e) => {
                 e.preventDefault();
                 zone.classList.remove('drag-over');
                 if (draggedItem) {
                     // Prevent dropping into a zone that already has an item for habitat match
                      if (zone.classList.contains('habitat-zone') && zone.querySelector('.draggable-item')) {
                           // Optionally provide feedback: cannot drop here
                           return;
                      }
                      // Allow multiple items in mollusk sort zones
                      zone.appendChild(draggedItem);
                 }
             });
         });
     }


     function checkMolluskSort() {
         const dropZoneShell = document.getElementById('drop-zone-shell');
         const dropZoneNoShell = document.getElementById('drop-zone-no-shell');
         const feedbackEl = document.getElementById('sort-feedback');
         const checkButton = document.getElementById('check-sort-button');

         if (!dropZoneShell || !dropZoneNoShell || !feedbackEl || !checkButton) return;

         let correct = true;
         dropZoneShell.querySelectorAll('.draggable-item').forEach(item => { if (item.dataset.group !== 'shell') correct = false; });
         dropZoneNoShell.querySelectorAll('.draggable-item').forEach(item => { if (item.dataset.group !== 'no-shell') correct = false; });

         // Also check if any items are left undragged
         const remaining = document.querySelector('#draggable-mollusks .draggable-item');
         if(remaining) correct = false;


         if (correct) {
             feedbackEl.textContent = "Correct! Great sorting! 👍";
             feedbackEl.style.color = 'var(--color-accent-success)';
             activityCompletedState[currentPage] = true; // Mark activity as completed
             sessionStorage.setItem(`activity_page${currentPage}_completed`, 'true');
             checkButton.disabled = true;
             updateNavigationButtons(); // Enable next button
         } else {
             feedbackEl.textContent = "Not quite right. Try moving the animals again. 🤔";
             feedbackEl.style.color = 'var(--color-accent-error)';
         }
     }

      function checkHabitatMatch() {
         const dropZones = document.querySelectorAll('#habitat-match-activity .habitat-zone');
         const feedbackEl = document.getElementById('habitat-feedback');
         const checkButton = document.getElementById('check-habitat-button');

          if (!dropZones.length || !feedbackEl || !checkButton) return;

         let correct = true;
         dropZones.forEach(zone => {
             const droppedItem = zone.querySelector('.draggable-item');
             const expectedHabitat = zone.dataset.habitat;
             if (!droppedItem || droppedItem.dataset.animal !== expectedHabitat) {
                 correct = false;
             }
         });

          // Also check if any items are left undragged
          const remaining = document.querySelector('#draggable-animals .draggable-item');
          if(remaining) correct = false;

         if (correct) {
             feedbackEl.textContent = "Correct! You matched them all! 🏠✅";
             feedbackEl.style.color = 'var(--color-accent-success)';
             activityCompletedState[currentPage] = true; // Mark activity as completed
             sessionStorage.setItem(`activity_page${currentPage}_completed`, 'true');
             checkButton.disabled = true;
             updateNavigationButtons(); // Enable next button
         } else {
             feedbackEl.textContent = "Some matches aren't quite right. Try again! 🤔";
             feedbackEl.style.color = 'var(--color-accent-error)';
         }
     }

    // --- Function to restore state on load ---
    function initializeLesson() {
        const savedDifficulty = sessionStorage.getItem('lessonDifficulty');
        const savedPage = parseInt(sessionStorage.getItem('lessonCurrentPage') || '0'); // Start check from 0

        if ((!savedDifficulty && savedPage > 0) || savedPage >= totalPages || savedPage < 0) {
             console.warn("Inconsistent state found, resetting.");
             resetProgress(); return;
        }

        if (savedDifficulty && savedPage > 0) {
            difficulty = savedDifficulty;
            currentPage = savedPage;
            scoreAreaContainer.style.display = 'block';
            navigationControls.style.display = 'flex';
        } else {
            currentPage = 0; difficulty = null;
            scoreAreaContainer.style.display = 'none';
            navigationControls.style.display = 'none';
        }

        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        updateScoreDisplay();

        const savedSpeed = sessionStorage.getItem('ttsSpeed') || '1';
        ttsSpeedSlider.value = savedSpeed;
        speedValueDisplay.textContent = parseFloat(savedSpeed).toFixed(1) + 'x';

        // Restore activity states from session storage
         for (let i = 1; i < totalPages -1; i++) { // Check potential activity pages
             if (sessionStorage.getItem(`activity_page${i}_completed`)) {
                 activityCompletedState[i] = true;
             }
         }


        showPage(); // Handles content injection and quiz/activity state restoration
    }

     // --- Restore Quiz States for the CURRENTLY VISIBLE page ---
function restoreQuizStatesForPage(pageElement) {
     if (!pageElement) return;
     pageElement.querySelectorAll('.quiz-container .quiz-block').forEach(quizBlock => {
         const quizId = quizBlock.dataset.quizId;
         // Check visibility *before* proceeding
         const isVisible = window.getComputedStyle(quizBlock).display !== 'none';
         const isOptional = quizId?.includes('-opt');

         // Skip if not visible, no ID, or placeholder ID
         if (!isVisible || !quizId || quizId.endsWith('-nodata')) {
             return;
         }

        if (sessionStorage.getItem(quizId + '_answered')) {
            // Logic for ALL Previously Answered Blocks (Standard & Former Optional)
            quizBlock.classList.add('answered');
            quizAnsweredState[quizId] = true; // Mark page state as answered
            const buttons = quizBlock.querySelectorAll('.quiz-option-button');
            buttons.forEach(btn => btn.disabled = true); // Disable buttons for ALL answered quizzes
            const correctOptionGroup = quizBlock.querySelector('.option-group[data-correct="true"]');
            const correctButton = correctOptionGroup?.querySelector('.quiz-option-button');
            if (correctButton) correctButton.classList.add('correct'); // Show correct answer
            const feedbackElement = quizBlock.querySelector('.quiz-feedback');
            if (feedbackElement) feedbackElement.style.display = 'none'; // Hide feedback on restore
        } else {
             // --- Logic for Not Yet Answered Blocks ---
             quizBlock.classList.remove('answered');
             if (!isOptional) quizAnsweredState[quizId] = false; // Reset page state variable
             quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => {
                  btn.disabled = false; // Ensure buttons are enabled
                  btn.classList.remove('correct', 'incorrect'); // Clear standard quiz styling
                  btn.style.backgroundColor = ''; // Clear optional highlight styling
              });
             if (!isOptional) {
                  const feedbackElement = quizBlock.querySelector('.quiz-feedback');
                  if (feedbackElement) feedbackElement.style.display = 'none'; // Ensure feedback is hidden
             }
         }
     });
     // Update nav buttons AFTER checking all blocks on the page
     updateNavigationButtons();
 }


     // --- Function to check if all VISIBLE quizzes or activities on the CURRENT page are complete ---
function checkCompletion() {
     const activePage = document.querySelector('.page-content.active');
     // Pages that are always complete (Welcome, Finish, Transitions)
     if (!activePage || currentPage === 0 || currentPage === totalPages - 1 || [19, 23].includes(currentPage)) {
         console.log(`Page ${currentPage} completion check: true (Welcome/Finish/Transition page)`);
         return true;
     }

     // Check for Activities first (only if not page 24)
     if (currentPage !== 24) {
          const activityContainer = activePage.querySelector('.activity-container');
          if (activityContainer && window.getComputedStyle(activityContainer).display !== 'none') {
               const activityDone = !!sessionStorage.getItem(`activity_page${currentPage}_completed`);
                console.log(`Page ${currentPage} activity completion check: ${activityDone} (Activity found)`);
                return activityDone;
          }
     }

    // --- Quiz Checking Logic ---
    const quizBlocksOnPage = activePage.querySelectorAll('.quiz-container .quiz-block');
    let requiredQuizIds = []; // Store IDs of quizzes that MUST be answered on this page

    quizBlocksOnPage.forEach(block => {
        const quizId = block.dataset.quizId;
        const isVisible = window.getComputedStyle(block).display !== 'none';

        // Filter out non-visible blocks or blocks without a proper ID
        if (!isVisible || !quizId || quizId.endsWith('-nodata')) {
            return;
        }

        const isOptional = quizId.includes('-opt');

        // Determine if this quiz block is required for *this specific page*
        if (currentPage === 24) {
            // On page 24, ONLY optional quizzes are required
            if (isOptional) {
                requiredQuizIds.push(quizId);
            }
        } else {
            // On all other content pages, ONLY standard (non-optional) quizzes are required
            if (!isOptional) {
                 requiredQuizIds.push(quizId);
            }
        }
    });

    // Log which quizzes are being checked for completion on this specific page load
    console.log(`Page ${currentPage} - Required Quiz IDs for completion check:`, requiredQuizIds);

    if (requiredQuizIds.length === 0) {
         // This handles pages with no required quizzes (e.g., activity-only pages after activity is done, or pages where all quizzes are hidden/not applicable)
         console.log(`Page ${currentPage} completion check: true (No required quiz blocks found/visible for this page)`);
         return true;
    }

    // Check if *all* required quizzes for *this page* are answered in sessionStorage
    let allRequiredAnswered = true;
    for (const reqQuizId of requiredQuizIds) {
        if (!sessionStorage.getItem(reqQuizId + '_answered')) {
             allRequiredAnswered = false;
             console.log(`Page ${currentPage} completion check: Required quiz ${reqQuizId} is NOT answered in sessionStorage.`);
             break; // No need to check further if one is missing
        } else {
             console.log(`Page ${currentPage} completion check: Required quiz ${reqQuizId} IS answered in sessionStorage.`);
        }
    }

    console.log(`Page ${currentPage} final completion check result: ${allRequiredAnswered}`);
    return allRequiredAnswered;
 }

    // --- Utility to reset progress ---
    function resetProgress() {
        console.log('Resetting lesson progress...');
        stopTTS();
        sessionStorage.removeItem('lessonDifficulty');
        sessionStorage.removeItem('lessonCurrentPage');
        sessionStorage.removeItem('lessonScore');

        // Clear all quiz answered flags (q1 to q58) and activity flags
        for (const pageKey in pageContent) {
            if (pageContent.hasOwnProperty(pageKey)) {
                // Clear activity state if this page might have one
                 const pageNum = parseInt(pageKey.replace('page',''));
                 if(!isNaN(pageNum)) sessionStorage.removeItem(`activity_page${pageNum}_completed`);

                ['easy', 'challenge'].forEach(diff => {
                    const pageData = pageContent[pageKey][diff];
                    if (pageData) {
                        for (const itemKey in pageData) {
                             // Clear standard quizzes
                            if (itemKey.startsWith('quiz') && pageData[itemKey] && pageData[itemKey].id) {
                                sessionStorage.removeItem(pageData[itemKey].id + '_answered');
                            }
                             // Could also clear optional quiz states if needed, but they aren't stored now
                        }
                    }
                });
            }
        }


        difficulty = null;
        currentPage = 0;
        currentScore = 0;
        quizAnsweredState = {};
        activityCompletedState = {};

        window.location.reload(); // Reload to apply reset
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', function() {
        initializeLesson();

        // TTS Speed Control
        ttsSpeedSlider.addEventListener('input', function() {
            const speed = parseFloat(this.value).toFixed(1);
            speedValueDisplay.textContent = speed + 'x';
            sessionStorage.setItem('ttsSpeed', speed);
            if (currentUtterance && synth.speaking) stopTTS();
        });

        // TTS Stop Button
        ttsStopButton.addEventListener('click', stopTTS);

        // Delegated Click Listener for Quiz Answers
        lessonContainer.addEventListener('click', (event) => {
            const target = event.target;
            const clickedQuizButton = target.closest('.quiz-option-button');

            if (clickedQuizButton && !clickedQuizButton.disabled) {
                 const clickedDirectlyOnIcon = target.closest('.option-icons button');
                 const isOptional = clickedQuizButton.closest('.quiz-block')?.dataset?.quizId?.includes('-opt');
                 // Only handle standard quiz answers here
                 if (!clickedDirectlyOnIcon && !isOptional) {
                     handleQuizAnswer(clickedQuizButton);
                 }
                 // Optional questions might have their own simple click handler added during injection
            }

            // Handle Activity Check Buttons (example - could be more specific)
             if (target.matches('#check-sort-button')) {
                 checkMolluskSort();
             } else if (target.matches('#check-habitat-button')) {
                 checkHabitatMatch();
             }
        });

        // Delegated Double Click Listener for Word Translation
        lessonContainer.addEventListener('dblclick', handleDoubleClick);

    }); // End DOMContentLoaded

    // Stop speech on page unload/close
    window.addEventListener('beforeunload', stopTTS);

</script>

</body>
</html>