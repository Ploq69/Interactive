<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <!-- **** CHANGED TITLE **** -->
    <title>All About Matter - Interactive Lesson</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
    <style>
/* === Enhanced Review Page Formatting === */

/* Container for each heading + its controls */
.review-heading-container {
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    padding-bottom: 0.25rem;
    border-bottom: 2px solid var(--color-primary);
}
.review-heading-container:first-child {
     margin-top: 0.5rem;
}

/* The actual H3 heading text */
.review-heading {
    font-weight: 700;
    font-size: 1.3em;
    color: var(--color-primary-dark);
    line-height: 1.3;
}
.review-heading .translatable-segment {
    font-weight: 700;
    font-size: 1em;
    color: var(--color-primary-dark);
}

/* The UL list container */
.review-list {
    list-style: none;
    padding-left: 0;
    margin-left: 1rem;
    margin-bottom: 1.5rem;
}

/* Each LI list item (using block-container structure) */
.review-list-item {
    padding-left: 1.75rem;
    margin-bottom: 0.6rem;
    position: relative;
    align-items: center;
}

/* Custom Bullet Point Styling */
.review-list-item::before {
    content: "✓";
    position: absolute;
    left: 0.25rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-primary);
    font-weight: bold;
    font-size: 1.1em;
    line-height: 1;
}

/* Ensure text within list items is standard size */
.review-list-item .translatable-segment {
     font-size: 1.05em;
     line-height: var(--line-height-base);
}

/* Optional: Background/Border for the whole review content area */
#review-content-page18, /* *** UPDATED PAGE ID FOR REVIEW *** */
#review-content-page19 { /* *** UPDATED PAGE ID FOR REVIEW *** */
    background-color: #f8f9fa;
    padding: 1.5rem;
    border-radius: var(--border-radius-small);
    border: 1px solid var(--color-border);
    margin-top: 1rem;
    --tw-space-y-reverse: 1; /* Equivalent to space-y-4 roughly */
}

        /* --- Base Styles --- */
        body, h1, h2, h3, p, button, input, label, footer, div, span, ul, li, img { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--color-background); }

        /* --- CSS Variables --- */
        :root {
            --font-primary: 'Poppins', sans-serif;
            /* **** UPDATED COLORS - Using Blue/Purple theme **** */
            --color-primary: #3b82f6; /* Blue-500 */
            --color-primary-dark: #1d4ed8; /* Blue-700 */
            --color-secondary: #6b7280; /* Gray */
            --color-accent-success: #16a34a; /* Darker Green (Keep for success messages) */
            --color-accent-success-light: #dcfce7; /* Light Green (Keep for success messages) */
            --color-accent-error: #dc3545; /* Red (Keep for error messages) */
            --color-accent-error-light: #f8d7da; /* Keep for error messages */
            --color-accent-highlight: #fef9c3; /* Light Yellow for TTS */
            --color-text-primary: #1f2937; /* Dark Gray */
            --color-text-secondary: #4b5563; /* Medium Gray */
            --color-text-light: #ffffff;
            --color-background: #f9fafb; /* Very Light Gray Page background */
            --color-container-bg: #ffffff; /* Content area background */
            --color-border: #e5e7eb; /* Light Gray Border */
            --shadow-main: 0 4px 15px rgba(0, 0, 0, 0.08);
            --border-radius-main: 15px;
            --border-radius-small: 8px;
            --line-height-base: 1.6;
             /* Difficulty Button Specific Colors */
            --color-easy-bg: #3b82f6; /* Blue-500 */
            --color-easy-border: #1d4ed8; /* Blue-700 */
            --color-easy-hover: #2563eb; /* Blue-600 */
            --color-challenge-bg: #8b5cf6; /* Purple-500 */
            --color-challenge-border: #6d28d9; /* Purple-700 */
            --color-challenge-hover: #7c3aed; /* Purple-600 */
            --color-challenge-text: #ffffff;
        }

        /* --- Basic Layout & Text --- */
        .block-container { display: flex; align-items: flex-start; margin-bottom: 0.75rem; position: relative; }
        .content-wrapper { flex-grow: 1; overflow-wrap: break-word; word-wrap: break-word; }
        /* Tailwind space-y equivalent */
        .space-y-3 > *:not([hidden]) ~ *:not([hidden]) { --tw-space-y-reverse: 0; margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse))); margin-bottom: calc(0.75rem * var(--tw-space-y-reverse)); }
        .text-gray-700 { color: var(--color-text-secondary); }
        .text-lg { font-size: 1.125rem; } /* Default text size */
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .leading-relaxed { line-height: var(--line-height-base); }
        .content-area {
            background-color: var(--color-container-bg);
            border-radius: var(--border-radius-main);
            box-shadow: var(--shadow-main);
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
        }
        .page-title {
            font-size: 2.25rem; /* Larger for page titles */
            font-weight: 700;
             /* **** UPDATED PAGE TITLE COLOR **** */
            color: var(--color-primary);
            margin-bottom: 1rem;
            text-align: center;
        }
        .centered-image {
            display: block;
            margin-left: auto;
            margin-right: auto;
            max-width: 80%; /* Adjust as needed */
            height: auto;
            margin-top: 1rem;
            margin-bottom: 1rem;
            border-radius: var(--border-radius-small);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        /* Style for activity instructions or separators */
         .activity-description, .transition-text {
            background-color: #eef2ff; /* Light Indigo */
            border-left: 4px solid #6366f1; /* Indigo border */
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius-small);
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            color: #4338ca; /* Darker Indigo text */
            font-size: 1.1rem;
            text-align: center;
         }
         .activity-description i, .transition-text i {
            margin-right: 0.5rem;
         }

        /* Dynamic Content Styling (from JS injection logic) */
        .content-section { /* General container for paragraphs/lists */
             margin-bottom: 1.5rem; /* Space after content block */
        }
        .content-subheading-container {
             border-bottom: 1px solid var(--color-border);
             padding-bottom: 0.3rem;
             margin-top: 1.25rem;
             margin-bottom: 0.8rem;
        }
        .content-subheading { /* For ### headings */
            font-size: 1.4em;
            font-weight: 600;
            color: var(--color-primary-dark);
        }
        .standard-paragraph-block { /* Standard paragraph */
             margin-bottom: 0.75rem;
        }
        .standard-paragraph-block .translatable-segment {
            font-size: 1.1em;
            line-height: var(--line-height-base);
            color: var(--color-text-primary);
        }
        .content-list { /* For UL created from * items */
            list-style: none; /* Remove default */
            padding-left: 0; /* Remove default */
            margin-left: 1rem; /* Indent list */
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        .content-list-item { /* For LI created from * items */
            position: relative;
            padding-left: 1.75rem; /* Space for custom bullet */
            margin-bottom: 0.6rem; /* Space between list items */
        }
        .content-list-item::before { /* Custom bullet */
            content: "•"; /* Bullet character */
            position: absolute;
            left: 0.25rem;
            top: 0; /* Adjust vertical alignment as needed */
            color: var(--color-primary);
            font-weight: bold;
            font-size: 1.3em;
            line-height: 1.3; /* Match text line height */
        }
        .content-list-item .translatable-segment {
            font-size: 1.1em; /* Ensure list text matches paragraph */
             line-height: var(--line-height-base);
            color: var(--color-text-primary);
            display: inline; /* Allow controls to sit beside */
        }
        .content-callout-container { /* For !!! items */
             background-color: #eef2ff; /* Light Indigo background */
             border-left: 4px solid var(--color-primary); /* Blue border */
             padding: 1rem 1.5rem;
             border-radius: var(--border-radius-small);
             margin: 1.5rem 0;
        }
        .content-callout { /* The blockquote element itself */
             color: #4338ca; /* Darker Indigo text */
             font-size: 1.15em;
             font-style: italic;
             line-height: 1.5;
             margin: 0; /* Reset default blockquote margin */
        }


         /* --- Page Visibility Control --- */
        .page-content {
            display: none; /* Hide all pages by default */
        }
        .page-content.active {
            display: block; /* Show only the active page */
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Difficulty Selection (Page 0) --- */
        .difficulty-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .difficulty-button {
            padding: 1rem 2rem;
            font-size: 1.25rem;
            font-weight: 600;
            border-radius: var(--border-radius-main);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-main);
            width: 80%;
            max-width: 300px;
            text-align: center;
            color: white; /* Text color for both buttons */
        }
        /* **** UPDATED DIFFICULTY BUTTON COLORS **** */
        .difficulty-button.easy {
            background-color: var(--color-easy-bg);
            border: 2px solid var(--color-easy-border);
        }
        .difficulty-button.easy:hover {
            background-color: var(--color-easy-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .difficulty-button.challenge {
            background-color: var(--color-challenge-bg);
            border: 2px solid var(--color-challenge-border);
            color: var(--color-challenge-text); /* Ensure text color contrasts if background changes */
        }
         .difficulty-button.challenge:hover {
            background-color: var(--color-challenge-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }


         /* --- ELL Controls (Paragraphs/Headings) --- */
        .ell-controls { display: inline-flex; gap: 0.5rem; margin-left: 0.75rem; flex-shrink: 0; padding-top: 0.1rem; vertical-align: middle;}
        .block-container .ell-controls { align-self: flex-start; /* Align controls to the top of the block */ padding-top: 0.2em; /* Fine-tune vertical position relative to text line */ }
        .content-list-item .ell-controls { display: inline-flex; } /* Keep list item controls inline */
        .ell-btn { background: #e5e7eb; border-radius: 50%; width: 1.75rem; height: 1.75rem; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; font-size: 0.9rem; border: none; color: #374151; }
        .ell-btn:hover { background: #d1d5db; transform: scale(1.1); }

        /* --- TTS Highlighting & Hidden Elements --- */
        .translatable-segment.highlight {
            background-color: var(--color-accent-highlight);
            color: var(--color-text-primary);
            border-radius: var(--border-radius-small);
            padding: 0 0.2em;
            margin: 0 -0.2em;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
            transition: background-color 0.1s ease-in-out;
        }
        span[aria-hidden="true"], .hidden-emoji { user-select: none; /* Make emojis non-selectable */ /* opacity: 0.8; */ /* Optional: slightly fade emojis */ }

        /* --- QUIZ STYLING (Mostly unchanged, adapted colors) --- */
        .quiz-container {
            background-color: #f3f4f6; /* Lighter Gray */
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-main);
            padding: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        .quiz-block {
            margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px dashed var(--color-border);
        }
        .quiz-block:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
        .quiz-question {
            font-weight: 600; margin-bottom: 15px; font-size: 1.1rem; color: var(--color-text-primary); display: flex; align-items: flex-start;
        }
        .quiz-question .translatable-segment { flex-grow: 1; margin-right: 5px; }
        .quiz-options { display: flex; flex-direction: column; gap: 10px; min-height: 50px; /* Prevent collapsing during content injection */ }
        .option-group { display: flex; align-items: center; gap: 10px; }
        .quiz-option-button {
            flex-grow: 1; text-align: left; background-color: var(--color-container-bg); color: var(--color-text-primary);
            border: 1px solid var(--color-border); border-radius: var(--border-radius-small); padding: 10px 15px;
            font-size: 1rem; font-family: var(--font-primary); cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
        }
        .quiz-option-button:hover:not(:disabled) { background-color: #e9ecef; border-color: #adb5bd; }
        .quiz-option-button:active:not(:disabled) { transform: scale(0.98); }
        .quiz-option-button:disabled { cursor: default; opacity: 0.8; }
        .option-icons { display: inline-flex; align-items: center; gap: 3px; flex-shrink: 0; }
        .tts-button, .translate-button {
            background-color: transparent; color: var(--color-secondary); padding: 0; font-size: 1rem; line-height: 1;
            border-radius: 50%; width: 28px; height: 28px; display: inline-flex; justify-content: center; align-items: center;
            border: none; cursor: pointer; transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .tts-button:hover, .translate-button:hover { background-color: rgba(0, 0, 0, 0.08); transform: scale(1.1); }
        .tts-translate-wrapper { display: inline-flex; align-items: center; margin-left: 5px; vertical-align: middle; flex-shrink: 0; gap: 3px;}
        .quiz-block.answered .quiz-option-button { cursor: default; }
        .quiz-block.answered .quiz-option-button:not(.correct):not(.incorrect) { opacity: 0.7; background-color: #f8f9fa; }
        .quiz-option-button.correct { background-color: var(--color-accent-success-light) !important; border-color: var(--color-accent-success) !important; color: var(--color-accent-success) !important; font-weight: 600; opacity: 1 !important; }
        .quiz-option-button.incorrect { background-color: var(--color-accent-error-light) !important; border-color: var(--color-accent-error) !important; color: var(--color-accent-error) !important; opacity: 1 !important; }
        .quiz-feedback { margin-top: 15px; padding: 10px 15px; border-radius: var(--border-radius-small); font-size: 0.9rem; display: none; border-left-width: 4px; border-style: solid; align-items: flex-start; }
        .quiz-feedback.correct { background-color: var(--color-accent-success-light); color: var(--color-accent-success); border-color: var(--color-accent-success); display: flex; animation: bounceCorrect 0.5s ease; }
        .quiz-feedback.incorrect { background-color: var(--color-accent-error-light); color: var(--color-accent-error); border-color: var(--color-accent-error); display: flex; animation: shakeIncorrect 0.5s ease; }
        .quiz-feedback .translatable-segment { display: inline; flex-grow: 1; margin-right: 5px; }
        .quiz-feedback .tts-translate-wrapper { margin-left: auto; flex-shrink: 0; }
        .quiz-feedback:empty { display: none; }
        @keyframes bounceCorrect { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        @keyframes shakeIncorrect { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }

        /* --- Gamification (+1 Effect) --- */
        .plus-one-effect { position: absolute; font-size: 1.5rem; color: var(--color-accent-success); font-weight: bold; opacity: 0; animation: plusOneAnim 1s ease-out forwards; pointer-events: none; z-index: 100; background-color: rgba(255, 255, 255, 0.6); padding: 0 5px; border-radius: 5px; }
        @keyframes plusOneAnim { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-40px) scale(1.3); opacity: 0; } }

        /* --- Global TTS Controls --- */
        #global-tts-controls { position: fixed; bottom: 1rem; left: 1rem; background: #374151; color: white; padding: 0.75rem; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 50; display: flex; align-items: center; gap: 1rem; }
        #global-tts-controls label { font-size: 0.875rem; font-weight: 500; }
        #tts-speed { width: 6rem; height: 0.5rem; background: #4b5563; border-radius: 9999px; appearance: none; cursor: pointer; accent-color: #60a5fa; } /* Blue accent for slider */
        #speed-value { font-size: 0.75rem; width: 2rem; text-align: right; }
        #tts-stop { background: #ef4444; hover:bg-red-700; color: white; font-weight: 500; font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 0.375rem; display: flex; align-items: center; gap: 0.25rem; border: none; cursor: pointer; }
        #tts-stop i { font-size: 0.65rem; }

        /* --- Navigation Buttons --- */
         #navigation-controls {
             display: flex; /* Initially hidden until difficulty is selected */
             justify-content: space-between;
             margin-top: 2rem;
             padding: 0 1rem; /* Add some padding */
         }
         .nav-button {
             display: inline-flex;
             align-items: center;
             gap: 0.5rem; /* Space between icon and text */
             /* **** UPDATED NAV BUTTON COLOR **** */
             background-color: var(--color-primary);
             color: white;
             font-weight: bold;
             padding: 0.75rem 1.5rem;
             border-radius: var(--border-radius-main);
             transition: all 0.2s ease;
             box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             border: none;
             cursor: pointer;
         }
         .nav-button:hover:not(:disabled) {
            /* **** UPDATED NAV BUTTON HOVER COLOR **** */
             background-color: var(--color-primary-dark);
             box-shadow: 0 4px 8px rgba(0,0,0,0.15);
             transform: translateY(-1px);
         }
         .nav-button.back {
             background-color: var(--color-secondary);
         }
         .nav-button.back:hover:not(:disabled) {
             background-color: #525a63; /* Darker gray */
         }
         .nav-button:disabled {
             opacity: 0.5;
             cursor: not-allowed;
             box-shadow: none;
             transform: none;
         }
         /* Hide nav controls initially */
         #navigation-controls { display: none; }

        /* --- Finish Screen --- */
        .finish-screen-content {
            text-align: center;
            padding: 2rem;
        }
        .finish-score {
            font-size: 1.5rem;
            font-weight: 600;
             /* **** UPDATED FINISH SCORE COLOR **** */
            color: var(--color-primary); /* Use primary color */
            margin: 1rem 0;
        }
        .play-again-button {
            margin-top: 2rem;
            /* Uses nav-button styles */
        }

        /* --- Activity/Interaction Placeholder Styles (Adapt as needed) --- */
        .activity-container {
            background-color: #f0f9ff; /* Very light blue */
            border: 1px dashed #7dd3fc; /* Light sky blue */
            border-radius: var(--border-radius-main);
            padding: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
            text-align: center;
        }
         .activity-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
         }
        /* Styles for draggable items and drop zones (Example) */
         .draggable-item {
            display: inline-block;
            padding: 0.5rem;
            margin: 0.3rem;
            background-color: var(--color-container-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-small);
            cursor: grab;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
            user-select: none; /* Prevent text selection while dragging */
         }
         .draggable-item:active {
            cursor: grabbing;
            transform: scale(1.05);
            box-shadow: var(--shadow-main);
         }
         .drop-zone {
            border: 2px dashed #a5b4fc; /* Indigo-300 */
            background-color: #eef2ff; /* Indigo-50 */
            padding: 1rem;
            margin-top: 1rem;
            min-height: 80px;
            border-radius: var(--border-radius-small);
            transition: background-color 0.2s ease;
         }
         .drop-zone.drag-over {
            background-color: #c7d2fe; /* Indigo-200 */
            border-style: solid;
         }
         .drop-zone h4 {
            color: #4f46e5; /* Indigo-600 */
            font-weight: 600;
            margin-bottom: 0.5rem;
         }


        /* --- Responsive --- */
        @media (max-width: 768px) {
            .content-area { padding: 1rem 1.5rem; }
            .page-title { font-size: 1.8rem; }
            .quiz-option-button { padding: 8px 12px; font-size: 0.9rem;}
            .quiz-question { font-size: 1rem; }
            .tts-button, .translate-button { width: 24px; height: 24px; font-size: 0.9rem;}
            .ell-btn { width: 1.5rem; height: 1.5rem; font-size: 0.8rem;}
            .option-group { flex-wrap: wrap; }
            .quiz-option-button { flex-basis: calc(100% - 70px); } /* Adjust based on icon size */
            .option-icons { flex-basis: 60px; justify-content: flex-end; }
            .nav-button { padding: 0.6rem 1.2rem; font-size: 0.9rem;}
            .difficulty-button { padding: 0.8rem 1.5rem; font-size: 1.1rem; }
            #global-tts-controls { flex-wrap: wrap; justify-content: center; gap: 0.5rem; padding: 0.5rem; }
            #tts-speed { width: 8rem; }
            .activity-description, .transition-text { padding: 0.8rem 1rem; font-size: 1rem; }
            .content-subheading { font-size: 1.3em; }
            .standard-paragraph-block .translatable-segment, .content-list-item .translatable-segment { font-size: 1.05em; }
        }
         @media (max-width: 480px) {
             .content-area { padding: 1rem; }
             .page-title { font-size: 1.5rem; }
             .option-group { gap: 5px; }
             .quiz-option-button { flex-basis: calc(100% - 60px); }
             .option-icons { flex-basis: 50px; }
             .nav-button { padding: 0.5rem 1rem; font-size: 0.8rem;}
             .difficulty-button { padding: 0.7rem 1rem; font-size: 1rem; width: 90%; }
             #global-tts-controls label { display: none; } /* Hide label on very small screens */
             #tts-speed { width: 6rem; }
             #speed-value { min-width: 2.5rem; }
             .draggable-item { padding: 0.4rem; margin: 0.2rem; font-size: 0.9rem;}
             .drop-zone { padding: 0.8rem; min-height: 60px; }
             .activity-description, .transition-text { font-size: 0.95rem; }
             .content-subheading { font-size: 1.2em; }
             .standard-paragraph-block .translatable-segment, .content-list-item .translatable-segment { font-size: 1em; }
         }
    </style>
</head>
<body class="bg-gray-50"> <!-- Slightly different bg color -->
<!-- **** UPDATED HEADER COLOR AND TEXT **** -->
<header class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 shadow-lg sticky top-0 z-40">
    <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-lg md:text-xl font-bold tracking-wide" id="main-header-title">All About Matter</h1>
        <div class="score-area bg-white text-blue-800 px-4 py-1 rounded-full shadow-inner" id="score-area-container" style="display: none;"> <!-- Initially hidden -->
            Score: <span class="font-bold text-lg" id="current-score">0</span>
        </div>
    </div>
</header>

<main class="container mx-auto p-4 md:p-6 max-w-4xl mt-4 mb-20 relative" id="lesson-container"> <!-- Increased bottom margin -->

    <!-- ================== PAGE 0: TITLE / DIFFICULTY SELECT ================== -->
    <!-- Note: Page index starts at 0 for the welcome screen -->
    <div class="page-content active" data-title="Welcome!" id="page-0">
        <div class="content-area text-center">
            <!-- **** UPDATED PAGE 0 CONTENT **** -->
            <h2 class="text-3xl font-bold text-blue-700 mb-4">Welcome to the World of Matter! <span aria-hidden="true">✨</span></h2>
            <!-- <h3 class="text-xl font-semibold text-indigo-600 mb-4">Let's Learn About Everything Around Us! <span aria-hidden="true">🧸🧃🌬️</span></h3> -->

            <!-- Paragraphs for introduction - added translatable segments and controls -->
            <div class="space-y-3 text-gray-700 text-lg leading-relaxed mb-6">
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">Welcome message! <span aria-hidden="true">👋</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">Today we will learn all about Matter!</p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">Matter is everything around you - your toys <span aria-hidden="true">🧸</span>, your juice <span aria-hidden="true">🧃</span>, even the air you breathe <span aria-hidden="true">🌬️</span>!</p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
                 <div class="block-container justify-center">
                    <div class="content-wrapper"><p class="translatable-segment">Choose how you want to learn today <span aria-hidden="true">👇</span>:</p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                 </div>
            </div>

            <!-- Image Idea Placeholder -->
            <!-- <img src="placeholder_collage.jpg" alt="Collage of solid, liquid, gas examples" class="centered-image max-w-xs"> -->


            <div class="difficulty-selector">
                <button class="difficulty-button easy" onclick="selectDifficulty('easy')">
                    <i class="fas fa-smile mr-2"></i> Easy English <span aria-hidden="true">😊</span>
                </button>
                <button class="difficulty-button challenge" onclick="selectDifficulty('challenge')">
                    <i class="fas fa-brain mr-2"></i> Challenge English <span aria-hidden="true">🤔</span>
                </button>
            </div>
        </div>
    </div> <!-- End page-0 -->

    <!-- ================== PAGE 1: What is Matter? ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="What is Matter?" id="page-1">
        <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🤔</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page1">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_box.jpg" alt="Something filling a box" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_scale.jpg" alt="Something on a scale" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_examples.jpg" alt="Rock, water, air" class="centered-image max-w-md"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs for Page 1 **** -->
                <div class="quiz-block" data-quiz-id="page1-q1"> <!-- E1 / C1 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page1-q2"> <!-- E2 / C2 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page1-q3"> <!-- E3 / C3 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options">
                        <!-- Options injected by JS -->
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-1 -->

    <!-- ================== PAGE 2: States of Matter & Particles ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="States & Particles" id="page-2">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🧊💧💨</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page2">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_rock_shape.jpg" alt="Solid rock keeping its shape" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_water_pour.jpg" alt="Water pouring into a glass" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_balloon.jpg" alt="Air filling a balloon" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_particles_zoom.jpg" alt="Zoomed view showing particles" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_solid_particles.jpg" alt="Diagram of solid particles" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_liquid_particles.jpg" alt="Diagram of liquid particles" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_gas_particles.jpg" alt="Diagram of gas particles" class="centered-image max-w-sm"> -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 2 **** -->
                <div class="quiz-block" data-quiz-id="page2-q4"> <!-- E4 / C4 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page2-q5"> <!-- E5 / C5 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page2-q6"> <!-- E6 / C6 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-2 -->
    <!-- ================== PAGE 3: Properties of Matter ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Describing Matter" id="page-3">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🧐</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page3">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_big_small_ball.jpg" alt="Big ball vs small ball" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_rock_sponge.jpg" alt="Rock and sponge of the same size" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_silk_sandpaper.jpg" alt="Smooth silk and rough sandpaper" class="centered-image max-w-sm"> -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 3 **** -->
                <div class="quiz-block" data-quiz-id="page3-q7"> <!-- E7 / C7 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page3-q8"> <!-- E8 / C8 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page3-q9"> <!-- E9 / C9 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-3 -->

     <!-- ================== PAGE 4: Volume ================== -->
     <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="What is Volume?" id="page-4">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">📏</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page4">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_balls_volume.jpg" alt="Basketball and tennis ball showing volume difference" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_measuring_cup.jpg" alt="Measuring cup or graduated cylinder" class="centered-image max-w-xs"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs for Page 4 **** -->
                <div class="quiz-block" data-quiz-id="page4-q10"> <!-- E10 / C10 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page4-q11"> <!-- E11 / C11 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 4 -->
                 <div class="quiz-block" data-quiz-id="page4-q12" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-4 -->

    <!-- ================== PAGE 5: Measuring Solid Volume & Activity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Measuring Space & Activity" id="page-5">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">📏📦🧪</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page5">
                <!-- Dynamic content including activity prompt will be injected here by JS -->
                <!-- Image Idea Placeholders -->
                <!-- <img src="placeholder_ruler_box.jpg" alt="Ruler measuring a box" class="centered-image max-w-sm"> -->
            </div>

            <!-- Activity Visual Cue -->
            <div class="activity-container" id="volume-activity-visual">
                 <h3 class="activity-title">Activity Idea!</h3>
                 <img src="https://via.placeholder.com/400x200.png?text=Volume+Activity+Cups" alt="Different shaped cups for volume activity" class="centered-image max-w-md">
                 <p class="mt-3 text-gray-600">Which cup holds the most? Let's test!</p>
            </div>

            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs for Page 5 **** -->
                <div class="quiz-block" data-quiz-id="page5-q12"> <!-- E12 / C12 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page5-q13"> <!-- E13 / C13 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 5 -->
                 <div class="quiz-block" data-quiz-id="page5-q14" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-5 -->

    <!-- ================== PAGE 6: Density ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="What is Density?" id="page-6">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🧱🤔</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page6">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_spoons_density.jpg" alt="Metal and plastic spoons" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_oil_water.jpg" alt="Oil floating on water" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_ship_anchor.jpg" alt="Ship floating and anchor sinking" class="centered-image max-w-sm"> -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                <!-- **** UPDATED Quiz IDs for Page 6 **** -->
                <div class="quiz-block" data-quiz-id="page6-q14"> <!-- E14 / C14 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page6-q15"> <!-- E15 / C15 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page6-q16"> <!-- E16 / C16 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-6 -->
    <!-- ================== PAGE 7: Density Activity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Float or Sink?" id="page-7">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🛳️⚓❓</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page7">
                <!-- Dynamic content including activity prompt will be injected here by JS -->
            </div>

            <!-- Activity Visual Cue -->
            <div class="activity-container" id="density-activity-visual">
                 <h3 class="activity-title">Activity Idea!</h3>
                 <img src="https://via.placeholder.com/400x200.png?text=Sink+or+Float+Test" alt="Items floating and sinking in water" class="centered-image max-w-md">
                 <p class="mt-3 text-gray-600">What will happen? Let's test!</p>
            </div>

            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 7 **** -->
                <div class="quiz-block" data-quiz-id="page7-q17"> <!-- E17 / C17 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page7-q18"> <!-- E18 / C18 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 7 -->
                 <div class="quiz-block" data-quiz-id="page7-q19" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-7 -->

    <!-- ================== PAGE 8: Texture ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="How Does it Feel?" id="page-8">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">🖐️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page8">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_silk_texture.jpg" alt="Smooth silk fabric" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_sandpaper_texture.jpg" alt="Rough sandpaper" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_touch_sense.jpg" alt="Hand touching different textures" class="centered-image max-w-sm"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 8 **** -->
                <div class="quiz-block" data-quiz-id="page8-q19"> <!-- E19 / C19 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page8-q20"> <!-- E20 / C20 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 8 -->
                 <div class="quiz-block" data-quiz-id="page8-q21" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-8 -->

    <!-- ================== PAGE 9: Texture Activity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Feeling Fun!" id="page-9">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🙈🖐️</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page9">
                <!-- Dynamic content including activity prompt will be injected here by JS -->
            </div>

             <!-- Activity Visual Cue -->
             <div class="activity-container" id="texture-activity-visual">
                  <h3 class="activity-title">Activity Idea!</h3>
                  <img src="https://via.placeholder.com/400x200.png?text=Texture+Touch+Test" alt="Child blindfolded, feeling different objects" class="centered-image max-w-md">
                  <p class="mt-3 text-gray-600">Can you guess the object just by touch?</p>
             </div>

             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 9 **** -->
                <div class="quiz-block" data-quiz-id="page9-q21"> <!-- E21 / C21 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page9-q22"> <!-- E22 / C22 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 9 -->
                 <div class="quiz-block" data-quiz-id="page9-q23" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-9 -->
    <!-- ================== PAGE 10: Substances ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Pure Stuff" id="page-10">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">💧🥇🧂</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page10">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_pure_water.jpg" alt="Glass of pure water" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_gold_bar.jpg" alt="Gold bar" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_salt_crystals.jpg" alt="Salt crystals" class="centered-image max-w-xs"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 10 **** -->
                <div class="quiz-block" data-quiz-id="page10-q23"> <!-- E23 / C23 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page10-q24"> <!-- E24 / C24 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 10 -->
                 <div class="quiz-block" data-quiz-id="page10-q25" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-10 -->

    <!-- ================== PAGE 11: Mixtures ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Mixing It Up!" id="page-11">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🥗🥤</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page11">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_salad.jpg" alt="Salad bowl" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_sand_pebbles.jpg" alt="Sand mixed with pebbles" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_milk.jpg" alt="Glass of milk" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_juice_pulp.jpg" alt="Fruit juice with pulp" class="centered-image max-w-xs"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 11 **** -->
                <div class="quiz-block" data-quiz-id="page11-q25"> <!-- E25 / C25 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page11-q26"> <!-- E26 / C26 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page11-q27"> <!-- E27 / C27 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-11 -->

    <!-- ================== PAGE 12: Mixture Activity ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Make a Mixture" id="page-12">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🥄🥣</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page12">
                <!-- Dynamic content including activity prompt will be injected here by JS -->
            </div>

             <!-- Activity Visual Cue -->
            <div class="activity-container" id="mixture-activity-visual">
                 <h3 class="activity-title">Activity Idea!</h3>
                 <img src="https://via.placeholder.com/400x200.png?text=Mixture+Sorting+Activity" alt="Bowl with mixed small items like buttons, paper clips, beads" class="centered-image max-w-md">
                 <p class="mt-3 text-gray-600">Mix them up! Can you separate them again?</p>
            </div>

             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 12 **** -->
                <div class="quiz-block" data-quiz-id="page12-q28"> <!-- E28 / C28 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page12-q29"> <!-- E29 / C29 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 12 -->
                 <div class="quiz-block" data-quiz-id="page12-q30" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-12 -->
    <!-- ================== PAGE 13: Physical Changes ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Changing Shape" id="page-13">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">✂️💧👕</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page13">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_cut_paper.jpg" alt="Paper being cut with scissors" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_ice_melt.jpg" alt="Ice cube melting into water" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_folded_clothes.jpg" alt="Folded clothes" class="centered-image max-w-sm"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 13 **** -->
                <div class="quiz-block" data-quiz-id="page13-q30"> <!-- E30 / C30 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page13-q31"> <!-- E31 / C31 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 13 -->
                 <div class="quiz-block" data-quiz-id="page13-q32" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-13 -->

    <!-- ================== PAGE 14: Chemical Changes ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="New Stuff!" id="page-14">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🔥🍳🎂</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page14">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_burning_wood.jpg" alt="Wood burning in a fire" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_cooked_egg.jpg" alt="Cooked egg in a pan" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_baked_cake.jpg" alt="Baked cake" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_rusty_nail.jpg" alt="Rusty nail" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_bubbles_gas.jpg" alt="Bubbles forming in a liquid" class="centered-image max-w-xs"> -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 14 **** -->
                <div class="quiz-block" data-quiz-id="page14-q32"> <!-- E32 / C32 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page14-q33"> <!-- E33 / C33 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page14-q34"> <!-- E34 / C34 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-14 -->

     <!-- ================== PAGE 15: Changes of State - Adding Heat ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Getting Warmer" id="page-15">
        <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title injected by JS --> <span aria-hidden="true">☀️💧💨</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page15">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_melting_ice_diagram.jpg" alt="Diagram showing ice melting to water with heat added" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_puddle_evaporating.jpg" alt="Puddle drying up in the sun" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_particles_heating.jpg" alt="Diagram showing particles moving faster with heat" class="centered-image max-w-sm"> -->
            </div>

            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 15 **** -->
                <div class="quiz-block" data-quiz-id="page15-q35"> <!-- E35 / C35 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page15-q36"> <!-- E36 / C36 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 15 -->
                 <div class="quiz-block" data-quiz-id="page15-q37" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-15 -->

     <!-- ================== PAGE 16: Changes of State - Cooling Down ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Cooling Down" id="page-16">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🥶🧊💧</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page16">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_ice_cube_tray.jpg" alt="Water freezing into ice cubes" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_cold_glass_drops.jpg" alt="Water drops forming on a cold glass" class="centered-image max-w-xs"> -->
                 <!-- <img src="placeholder_dew_grass.jpg" alt="Dew drops on grass" class="centered-image max-w-sm"> -->
                 <!-- <img src="placeholder_particles_cooling.jpg" alt="Diagram showing particles slowing down when cooled" class="centered-image max-w-sm"> -->
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 16 **** -->
                <div class="quiz-block" data-quiz-id="page16-q37"> <!-- E37 / C37 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page16-q38"> <!-- E38 / C38 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 16 -->
                 <div class="quiz-block" data-quiz-id="page16-q39" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-16 -->

    <!-- ================== PAGE 17: Review Properties & Measurement ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Seeing & Measuring" id="page-17">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">👀📏</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="content-section" id="content-page17">
                <!-- Dynamic content will be injected here by JS -->
                 <!-- Image Idea Placeholders -->
                 <!-- <img src="placeholder_senses_icons.jpg" alt="Icons for sight, smell, touch, sound" class="centered-image max-w-md"> -->
                 <!-- <img src="placeholder_measuring_tools.jpg" alt="Scale, ruler, thermometer, measuring cup" class="centered-image max-w-lg"> -->
            </div>
             <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Quiz Time! <span aria-hidden="true">❓</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 17 **** -->
                <div class="quiz-block" data-quiz-id="page17-q39"> <!-- E39 / C39 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page17-q40"> <!-- E40 / C40 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <!-- NOTE: Only 2 questions planned for page 17 -->
                 <div class="quiz-block" data-quiz-id="page17-q41" style="display: none;"> <!-- Placeholder, hidden -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"></span></div>
                    <div class="quiz-options"></div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span></div>
                 </div>
            </div>
        </div>
    </div> <!-- End page-17 -->

    <!-- ================== PAGE 18: Review Part 1 ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Review Part 1" id="page-18">
         <div class="content-area">
            <div class="block-container mb-4">
                <!-- Title injected by JS based on difficulty -->
                <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">⭐</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <!-- Review text/list injected here using special formatting -->
            <div id="review-content-page18">
                 <!-- Review points injected by JS -->
            </div>
             <!-- NO QUIZ CONTAINER ON REVIEW PAGES -->
         </div>
    </div> <!-- End page-18 -->

    <!-- ================== PAGE 19: Review Part 2 ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Review Part 2" id="page-19">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">⭐⭐</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <!-- Review text/list injected here using special formatting -->
            <div id="review-content-page19">
                 <!-- Review points injected by JS -->
            </div>
             <!-- NO QUIZ CONTAINER ON REVIEW PAGES -->
         </div>
    </div> <!-- End page-19 -->


    <!-- ================== PAGE 20: Final Quiz ================== -->
    <!-- **** UPDATED data-title and ID **** -->
    <div class="page-content" data-title="Final Quiz" id="page-20">
         <div class="content-area">
            <div class="block-container mb-4">
                 <!-- Title injected by JS based on difficulty -->
                 <div class="content-wrapper"><h2 class="text-3xl font-bold text-blue-700 translatable-segment"><!-- Title Injected --> <span aria-hidden="true">🏆</span></h2></div>
                <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
            </div>
            <div class="quiz-container">
                <h3 class="text-xl font-semibold text-center mb-6">Answer these final questions! <span aria-hidden="true">🧠</span></h3>
                 <!-- **** UPDATED Quiz IDs for Page 20 (Final Quiz) **** -->
                <div class="quiz-block" data-quiz-id="page20-q41"> <!-- E41 / C41 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                    <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page20-q42"> <!-- E42 / C42 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page20-q43"> <!-- E43 / C43 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page20-q44"> <!-- E44 / C44 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page20-q45"> <!-- E45 / C45 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page20-q46"> <!-- E46 / C46 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                 <div class="quiz-block" data-quiz-id="page20-q47"> <!-- E47 / C47 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
                <div class="quiz-block" data-quiz-id="page20-q48"> <!-- E48 / C48 -->
                    <div class="quiz-question"><span class="translatable-segment font-medium"><!-- Question injected by JS --></span><span class="tts-translate-wrapper"><button aria-label="Read question" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate question" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                     <div class="quiz-options"> <!-- Options injected by JS --> </div>
                    <div class="quiz-feedback"><span class="translatable-segment"></span><span class="tts-translate-wrapper"><button aria-label="Read feedback" class="tts-button" onclick="speakText(this)"><i class="fas fa-volume-up"></i></button><button aria-label="Translate feedback" class="translate-button" onclick="translateSegment(this)"><i class="fas fa-language"></i></button></span></div>
                </div>
            </div>
        </div>
    </div> <!-- End page-20 -->

    <!-- ================== PAGE 21: FINISH SCREEN ================== -->
    <!-- **** UPDATED page ID and data-title **** -->
    <div class="page-content" data-title="Finish!" id="page-21">
        <div class="content-area">
            <div class="finish-screen-content">
                <div class="block-container justify-center mb-4">
                     <!-- **** UPDATED Finish Text (will be set by JS) **** -->
                    <div class="content-wrapper"><h2 class="text-4xl font-bold text-blue-700 translatable-segment" id="finish-title">🎉 You're a Matter Expert! 🥳</h2></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center mb-2">
                    <div class="content-wrapper"><p class="text-lg text-gray-700 translatable-segment" id="finish-subtitle">Great job completing the Matter unit! 👍</p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center">
                    <!-- **** Score display updated by JS **** -->
                    <!-- **** UPDATED total-possible-score to 48 **** -->
                    <div class="content-wrapper"><p class="finish-score translatable-segment">Your Score: <span class="font-bold text-blue-600 text-xl" id="final-score">0</span> / <span id="total-possible-score">48</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <div class="block-container justify-center mt-4">
                    <div class="content-wrapper"><p class="text-lg text-gray-600 translatable-segment" id="finish-encouragement">Keep exploring the amazing world of science around you! <span aria-hidden="true">✨</span></p></div>
                    <div class="ell-controls"><button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button></div>
                </div>
                <button class="nav-button play-again-button mt-12" onclick="resetProgress()">
                    <i class="fas fa-redo mr-2"></i> Play Again? <span aria-hidden="true">🔁</span>
                </button>
            </div>
        </div>
    </div> <!-- End page-21 -->

</main> <!-- End of lesson-container -->

<!-- Navigation Controls (should be outside main content area) -->
<div class="container mx-auto p-4 md:p-6 max-w-4xl flex justify-between items-center mt-0 mb-20" id="navigation-controls"> <!-- Adjust margin as needed -->
    <button class="nav-button back" id="back-button" onclick="prevPage()">
        <i class="fas fa-arrow-left"></i> Back
    </button>
    <button class="nav-button" disabled="" id="next-button" onclick="nextPage()" title="Please answer all quiz questions or complete the activity first">
        Next <i class="fas fa-arrow-right"></i>
    </button>
</div>

<!-- Template for +1 animation -->
<div class="plus-one-effect" id="plus-one-template" style="display: none;">+1</div>

<!-- Template for Quiz Option Group (used by JS) -->
<template id="quiz-option-template">
    <div class="option-group">
        <button class="quiz-option-button"><span class="translatable-segment"></span></button>
        <div class="option-icons">
            <button aria-label="Read option" class="tts-button" onclick="speakText(this); event.stopPropagation();"><i class="fas fa-volume-up"></i></button>
            <button aria-label="Translate option" class="translate-button" onclick="translateSegment(this); event.stopPropagation();"><i class="fas fa-language"></i></button>
        </div>
    </div>
</template>

<!-- Template for List Item (used by JS for Review pages) -->
<template id="list-item-template">
     <li class="block-container review-list-item">
        <div class="content-wrapper">
             <p class="translatable-segment"><!-- List item text --></p>
        </div>
        <div class="ell-controls">
             <button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button>
             <button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>
        </div>
     </li>
</template>

<!-- Template for Review Heading (used by JS for Review pages) -->
<template id="review-heading-template">
    <div class="block-container review-heading-container">
        <div class="content-wrapper">
            <h3 class="review-heading translatable-segment"><!-- Heading text --></h3>
        </div>
        <div class="ell-controls">
            <button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button>
            <button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>
        </div>
    </div>
</template>


<!-- Template for Draggable Item (if needed for future activities) -->
<template id="draggable-item-template">
    <span class="draggable-item" draggable="true"></span>
</template>

<!-- Template for Drop Zone (if needed for future activities) -->
<template id="drop-zone-template">
    <div class="drop-zone text-center">
        <h4><!-- Drop Zone Title --></h4>
        <!-- Dropped items will appear here -->
    </div>
</template>


<!-- Global ELL Controls -->
<div id="global-tts-controls">
    <label class="text-sm font-medium hidden md:inline" for="tts-speed">Speed:</label>
    <input id="tts-speed" max="2" min="0.5" step="0.1" type="range" value="1"/>
    <span class="text-xs min-w-[2.5rem] text-right" id="speed-value">1.0x</span>
    <button id="tts-stop" title="Stop Reading">
        <i class="fas fa-stop"></i> Stop
    </button>
</div>

<!-- ============================== -->
<!--      JAVASCRIPT               -->
<!-- ============================== -->
<script>
    // --- State & Config ---
    let difficulty = null; // 'easy' or 'challenge'
    let currentPage = 0; // Start at page 0 (difficulty select)
    let currentScore = 0;
    const totalPages = 22; // **** UPDATED: 0 (welcome) to 21 (finish) = 22 pages ****
    const TRANSLATE_WINDOW_NAME = 'LessonTranslateWindow';
    const totalQuizzes = 48; // **** UPDATED: Total unique SCORED quiz identifiers (40 content + 8 final) ****
    let quizAnsweredState = {}; // Stores which quizzes on the *current* page are answered
    let activityCompletedState = {}; // Stores completion status for activities on the current page (less complex here)

    // --- Content Data (All About Matter Unit) ---
    // **** POPULATED pageContent with FULL MATTER UNIT data ****
    const pageContent = {
        page0: { // Welcome Screen
             easy: { title: "Welcome to the World of Matter! <span aria-hidden='true'>✨</span>", paragraphs: ["Welcome message! <span aria-hidden='true'>👋</span>", "Today we will learn all about Matter!", "Matter is everything around you - your toys <span aria-hidden='true'>🧸</span>, your juice <span aria-hidden='true'>🧃</span>, even the air you breathe <span aria-hidden='true'>🌬️</span>!", "Choose how you want to learn today <span aria-hidden='true'>👇</span>:"]},
             challenge: { title: "Welcome to the World of Matter! <span aria-hidden='true'>✨</span>", paragraphs: ["Welcome message! <span aria-hidden='true'>👋</span>", "Today we will learn all about Matter!", "Matter is everything around you - your toys <span aria-hidden='true'>🧸</span>, your juice <span aria-hidden='true'>🧃</span>, even the air you breathe <span aria-hidden='true'>🌬️</span>!", "Choose how you want to learn today <span aria-hidden='true'>👇</span>:"]}
        },
        page1: { // What is Matter?
            easy: {
                title: "What is Matter? <span aria-hidden='true'>🤔</span>",
                paragraphs: [
                    "Matter is anything that takes up space. (Shows something filling a box) <span aria-hidden='true'>📦</span>",
                    "Matter also has weight. (Shows something on a scale) <span aria-hidden='true'>⚖️</span>",
                    "Everything around you is matter!",
                    "Examples: Rocks <span aria-hidden='true'>🪨</span>, water <span aria-hidden='true'>💧</span>, air <span aria-hidden='true'>💨</span>."
                ],
                quiz1: { id: "page1-q1", question: "Matter takes up ______. <span aria-hidden='true'>📦</span>", options: [ { text: "Noise", isCorrect: false }, { text: "Space", isCorrect: true }, { text: "Light", isCorrect: false } ] },
                quiz2: { id: "page1-q2", question: "Does a toy car <span aria-hidden='true'>🚗</span> have weight? <span aria-hidden='true'>⚖️</span>", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false } ] },
                quiz3: { id: "page1-q3", question: "Is sunshine <span aria-hidden='true'>☀️</span> matter?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] } // Sunshine is energy, not matter
            },
            challenge: {
                title: "What is Matter? <span aria-hidden='true'>🤔</span>",
                 paragraphs: [
                    "Matter is defined as anything that occupies space (has volume <span aria-hidden='true'>📦</span>) and has mass (weight on Earth <span aria-hidden='true'>⚖️</span>).",
                    "Think about it: Does a book take up space? Does it have weight? Yes! So, a book is matter <span aria-hidden='true'>📖</span>.",
                    "Does air take up space? Yes, it fills a balloon <span aria-hidden='true'>🎈</span>! Does air have weight? Yes, it does! Air is matter.",
                    "Matter exists in different forms, like solids <span aria-hidden='true'>🧊</span>, liquids <span aria-hidden='true'>💧</span>, and gases <span aria-hidden='true'>💨</span>."
                 ],
                 quiz1: { id: "page1-q1", question: "A key characteristic of matter is that it has mass and ______. <span aria-hidden='true'>📦</span>", options: [ { text: "Color", isCorrect: false }, { text: "Volume", isCorrect: true }, { text: "Brightness", isCorrect: false } ] },
                 quiz2: { id: "page1-q2", question: "Which of the following is the best example of matter?", options: [ { text: "An idea <span aria-hidden='true'>💡</span>", isCorrect: false }, { text: "A rock <span aria-hidden='true'>🪨</span>", isCorrect: true }, { text: "A feeling <span aria-hidden='true'>😊</span>", isCorrect: false } ] },
                 quiz3: { id: "page1-q3", question: "Does the air <span aria-hidden='true'>💨</span> inside a basketball have weight (mass)? <span aria-hidden='true'>⚖️</span>", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false } ] }
            }
        },
        page2: { // States of Matter & Particles
             easy: {
                 title: "Solids <span aria-hidden='true'>🧊</span>, Liquids <span aria-hidden='true'>💧</span>, and Gases <span aria-hidden='true'>💨</span>",
                 paragraphs: [
                     "Matter comes in different types, called states!",
                     "Solids keep their own shape, like a rock <span aria-hidden='true'>🪨</span> or a book <span aria-hidden='true'>📖</span>.",
                     "Liquids take the shape of their container, like water <span aria-hidden='true'>💧</span> or juice <span aria-hidden='true'>🧃</span>.",
                     "Gases spread out to fill all the space, like air in a balloon <span aria-hidden='true'>🎈</span>.",
                     "Everything is made of tiny pieces called particles <span aria-hidden='true'>✨</span>. Too small to see!",
                     "In solids, particles are close and tight <span aria-hidden='true'>🧱</span>.",
                     "In liquids, particles are close but can move around <span aria-hidden='true'>💧</span>.",
                     "In gases, particles are far apart and move fast <span aria-hidden='true'>💨</span>!"
                 ],
                 quiz1: { id: "page2-q4", question: "A block <span aria-hidden='true'>🧱</span> is a ______. ", options: [ { text: "Solid <span aria-hidden='true'>🧊</span>", isCorrect: true }, { text: "Liquid <span aria-hidden='true'>💧</span>", isCorrect: false }, { text: "Gas <span aria-hidden='true'>💨</span>", isCorrect: false } ] },
                 quiz2: { id: "page2-q5", question: "Particles <span aria-hidden='true'>✨</span> in a liquid <span aria-hidden='true'>💧</span> can ______. ", options: [ { text: "Only shake", isCorrect: false }, { text: "Move around", isCorrect: true }, { text: "Fly away", isCorrect: false } ] },
                 quiz3: { id: "page2-q6", question: "Air <span aria-hidden='true'>💨</span> is a ______. ", options: [ { text: "Solid <span aria-hidden='true'>🧊</span>", isCorrect: false }, { text: "Liquid <span aria-hidden='true'>💧</span>", isCorrect: false }, { text: "Gas <span aria-hidden='true'>💨</span>", isCorrect: true } ] }
             },
             challenge: {
                 title: "Solids <span aria-hidden='true'>🧊</span>, Liquids <span aria-hidden='true'>💧</span>, and Gases <span aria-hidden='true'>💨</span>",
                  paragraphs: [
                    "Matter commonly exists in three primary states: solid <span aria-hidden='true'>🧊</span>, liquid <span aria-hidden='true'>💧</span>, and gas <span aria-hidden='true'>💨</span>.",
                    "Solids have a definite shape and volume. Their particles <span aria-hidden='true'>✨</span> are tightly packed and vibrate in place.",
                    "Liquids have a definite volume but take the shape of their container. Their particles <span aria-hidden='true'>✨</span> are close but can slide past each other <span aria-hidden='true'>💧</span>.",
                    "Gases have no definite shape or volume; they expand to fill their container. Their particles <span aria-hidden='true'>✨</span> are far apart and move randomly at high speeds <span aria-hidden='true'>💨</span>.",
                    "These tiny particles (atoms or molecules) are the basic building blocks of all matter."
                  ],
                  quiz1: { id: "page2-q4", question: "Which state of matter takes the shape of its container but has a fixed volume?", options: [ { text: "Solid <span aria-hidden='true'>🧊</span>", isCorrect: false }, { text: "Liquid <span aria-hidden='true'>💧</span>", isCorrect: true }, { text: "Gas <span aria-hidden='true'>💨</span>", isCorrect: false } ] },
                  quiz2: { id: "page2-q5", question: "In which state are particles <span aria-hidden='true'>✨</span> held rigidly in place, only vibrating?", options: [ { text: "Solid <span aria-hidden='true'>🧊</span>", isCorrect: true }, { text: "Liquid <span aria-hidden='true'>💧</span>", isCorrect: false }, { text: "Gas <span aria-hidden='true'>💨</span>", isCorrect: false } ] },
                  quiz3: { id: "page2-q6", question: "Gases expand to fill their container because their particles <span aria-hidden='true'>✨</span> are ______. ", options: [ { text: "Close together", isCorrect: false }, { text: "Far apart and moving fast <span aria-hidden='true'>💨</span>", isCorrect: true }, { text: "Stuck together", isCorrect: false } ] }
             }
         },
         page3: { // Properties of Matter
             easy: {
                 title: "How We Describe Matter <span aria-hidden='true'>🧐</span>",
                 paragraphs: [
                    "We can describe matter using its properties!",
                    "Volume: How much space it takes up <span aria-hidden='true'>📏</span>.",
                    "Density: How packed the particles are <span aria-hidden='true'>✨</span>. Is it heavy for its size? <span aria-hidden='true'>🧱</span>",
                    "Texture: How it feels (smooth, rough) <span aria-hidden='true'>🖐️</span>."
                 ],
                 quiz1: { id: "page3-q7", question: "How bumpy or smooth something feels is its ______. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Volume", isCorrect: false }, { text: "Density", isCorrect: false }, { text: "Texture", isCorrect: true } ] },
                 quiz2: { id: "page3-q8", question: "How much space a toy takes up is its ______. <span aria-hidden='true'>📏</span>", options: [ { text: "Volume", isCorrect: true }, { text: "Density", isCorrect: false }, { text: "Texture", isCorrect: false } ] },
                 quiz3: { id: "page3-q9", question: "If something is heavy for its size, it has high ______. <span aria-hidden='true'>🧱</span>", options: [ { text: "Volume", isCorrect: false }, { text: "Density", isCorrect: true }, { text: "Texture", isCorrect: false } ] }
             },
             challenge: {
                 title: "How We Describe Matter <span aria-hidden='true'>🧐</span>",
                 paragraphs: [
                    "We identify and classify matter based on its physical properties.",
                    "Volume measures the amount of space an object occupies <span aria-hidden='true'>📏</span>.",
                    "Density describes how much mass is packed into a certain volume (mass per unit volume). Denser objects feel heavier for their size <span aria-hidden='true'>🧱</span>.",
                    "Texture refers to the surface quality – how it feels to the touch (e.g., smooth, rough, bumpy) <span aria-hidden='true'>🖐️</span>.",
                    "These are just a few ways we observe and measure matter."
                 ],
                  quiz1: { id: "page3-q7", question: "The surface feel of an object, such as rough or smooth, is called its ______. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Volume", isCorrect: false }, { text: "Density", isCorrect: false }, { text: "Texture", isCorrect: true } ] },
                  quiz2: { id: "page3-q8", question: "The amount of space occupied by an object is its ______. <span aria-hidden='true'>📏</span>", options: [ { text: "Mass", isCorrect: false }, { text: "Volume", isCorrect: true }, { text: "Density", isCorrect: false } ] },
                  quiz3: { id: "page3-q9", question: "Density is the measure of ______ packed into a certain volume. <span aria-hidden='true'>🧱</span>", options: [ { text: "Mass", isCorrect: true }, { text: "Color", isCorrect: false }, { text: "Shape", isCorrect: false } ] }
             }
         },
        page4: { // Volume
             easy: {
                 title: "What is Volume? <span aria-hidden='true'>📏</span>",
                 paragraphs: [
                     "Volume is the space something fills.",
                     "A big ball takes up more space than a small ball <span aria-hidden='true'>🏀🎾</span>.",
                     "It has more volume!",
                     "We measure liquid volume with a measuring cup or cylinder <span aria-hidden='true'>🧪</span>."
                 ],
                 quiz1: { id: "page4-q10", question: "A big beach ball <span aria-hidden='true'>🏖️</span> has ______ volume than a small marble. ", options: [ { text: "more", isCorrect: true }, { text: "less", isCorrect: false }, { text: "the same", isCorrect: false } ] },
                 quiz2: { id: "page4-q11", question: "What tool do we use to measure juice <span aria-hidden='true'>🧃</span> volume?", options: [ { text: "Scale <span aria-hidden='true'>⚖️</span>", isCorrect: false }, { text: "Measuring cup <span aria-hidden='true'>🧪</span>", isCorrect: true }, { text: "Clock <span aria-hidden='true'>⏰</span>", isCorrect: false } ] }
             },
             challenge: {
                 title: "What is Volume? <span aria-hidden='true'>📏</span>",
                 paragraphs: [
                     "Volume is the amount of three-dimensional space an object or substance occupies <span aria-hidden='true'>📦</span>.",
                     "For example, a basketball <span aria-hidden='true'>🏀</span> has a larger volume than a tennis ball <span aria-hidden='true'>🎾</span> because it occupies more space.",
                     "The volume of liquids is often measured using tools like measuring cups or graduated cylinders <span aria-hidden='true'>🧪</span>, typically in units like milliliters (mL) or liters (L)."
                 ],
                 quiz1: { id: "page4-q10", question: "If two balls are the same size, they have the same ______. <span aria-hidden='true'>📏</span>", options: [ { text: "Weight", isCorrect: false }, { text: "Volume", isCorrect: true }, { text: "Texture", isCorrect: false } ] },
                 quiz2: { id: "page4-q11", question: "A graduated cylinder <span aria-hidden='true'>🧪</span> is used to precisely measure the volume of a ______. ", options: [ { text: "Solid block", isCorrect: false }, { text: "Liquid <span aria-hidden='true'>💧</span>", isCorrect: true }, { text: "Length <span aria-hidden='true'>📏</span>", isCorrect: false } ] }
             }
         },
         page5: { // Measuring Solid Volume & Activity Idea
             easy: {
                 title: "Measuring Space <span aria-hidden='true'>📏</span> & Activity!",
                 paragraphs: [
                    "For shapes like boxes <span aria-hidden='true'>📦</span>, we can find volume.",
                    "Measure how long, how wide, and how high.",
                    "!!! Activity Time! <span aria-hidden='true'>🧪</span> Let's look at different cups. Which cup do you think holds the most water? Let's test it!"
                 ],
                 quiz1: { id: "page5-q12", question: "We use a ______ to measure how long a box <span aria-hidden='true'>📦</span> is.", options: [ { text: "Scale <span aria-hidden='true'>⚖️</span>", isCorrect: false }, { text: "Ruler <span aria-hidden='true'>📏</span>", isCorrect: true }, { text: "Thermometer <span aria-hidden='true'>🌡️</span>", isCorrect: false } ] },
                 quiz2: { id: "page5-q13", question: "A tall skinny cup and a short wide cup can hold the same amount of water. (Activity Concept Check)", options: [ { text: "True", isCorrect: true }, { text: "False", isCorrect: false } ] }
             },
             challenge: {
                 title: "Measuring Space <span aria-hidden='true'>📏</span> & Activity!",
                 paragraphs: [
                    "For regularly shaped solids, like cubes or rectangular prisms <span aria-hidden='true'>📦</span>, volume can be calculated.",
                    "Measure the length (L), width (W), and height (H) using a ruler <span aria-hidden='true'>📏</span>. Volume = L x W x H.",
                    "!!! Activity Prompt: <span aria-hidden='true'>🧪</span> Gather several different containers (cups, bottles). Pour water from one to another. Can a tall, thin cup hold more water than a short, wide cup? Let's use a measuring cup to find the actual volume each container holds!"
                 ],
                  quiz1: { id: "page5-q12", question: "To calculate the volume of a rectangular prism <span aria-hidden='true'>📦</span>, you multiply its length, width, and ______. ", options: [ { text: "Height", isCorrect: true }, { text: "Weight", isCorrect: false }, { text: "Color", isCorrect: false } ] },
                  quiz2: { id: "page5-q13", question: "If you pour 100mL of water from a beaker into a graduated cylinder <span aria-hidden='true'>🧪</span>, the volume of the water is now ______. (Conservation Concept)", options: [ { text: "More than 100mL", isCorrect: false }, { text: "Less than 100mL", isCorrect: false }, { text: "Still 100mL", isCorrect: true } ] }
             }
         },
        page6: { // Density
             easy: {
                 title: "Packed In! What is Density? <span aria-hidden='true'>🤔</span>",
                 paragraphs: [
                     "Density is how close the particles <span aria-hidden='true'>✨</span> are packed.",
                     "If particles are packed close, it's dense.",
                     "A metal spoon <span aria-hidden='true'>🥄</span> is more dense than a plastic spoon.",
                     "Heavy for its size means dense! <span aria-hidden='true'>🧱</span>",
                     "Density helps us know if something will float or sink in water <span aria-hidden='true'>💧</span>."
                 ],
                 quiz1: { id: "page6-q14", question: "If particles <span aria-hidden='true'>✨</span> are packed very close, the matter is ______. ", options: [ { text: "Light", isCorrect: false }, { text: "Dense <span aria-hidden='true'></span>", isCorrect: true }, { text: "Rough", isCorrect: false } ] },
                 quiz2: { id: "page6-q15", question: "Will a heavy metal bolt <span aria-hidden='true'>🔩</span> probably float or sink?", options: [ { text: "Float <span aria-hidden='true'>🛳️</span>", isCorrect: false }, { text: "Sink <span aria-hidden='true'>⚓</span>", isCorrect: true } ] },
                 quiz3: { id: "page6-q16", question: "Oil floats on water <span aria-hidden='true'>💧</span> because it is ______ dense.", options: [ { text: "more", isCorrect: false }, { text: "less", isCorrect: true } ] }
             },
             challenge: {
                 title: "Packed In! What is Density? <span aria-hidden='true'>🤔</span>",
                 paragraphs: [
                     "Density relates an object's mass to its volume (Density = Mass / Volume). It tells us how tightly particles <span aria-hidden='true'>✨</span> are packed.",
                     "A metal spoon <span aria-hidden='true'>🥄</span> is denser than a plastic spoon of the same size because metal particles are packed more closely and have more mass.",
                     "Density is an important property. Objects less dense than water will float <span aria-hidden='true'>🛳️</span>, while objects more dense than water will sink <span aria-hidden='true'>⚓</span>.",
                     "Oil floats on water because oil is less dense than water."
                 ],
                 quiz1: { id: "page6-q14", question: "Density describes the relationship between an object's mass and its ______. <span aria-hidden='true'>📏</span>", options: [ { text: "Volume", isCorrect: true }, { text: "Shape", isCorrect: false }, { text: "Texture", isCorrect: false } ] },
                 quiz2: { id: "page6-q15", question: "An object will float <span aria-hidden='true'>🛳️</span> in water if its density is ______ water's density.", options: [ { text: "Greater than", isCorrect: false }, { text: "Less than", isCorrect: true }, { text: "Equal to", isCorrect: false } ] },
                 quiz3: { id: "page6-q16", question: "If two objects have the same volume, the one with more mass is ______. <span aria-hidden='true'>🧱</span>", options: [ { text: "Less dense", isCorrect: false }, { text: "More dense", isCorrect: true }, { text: "The same density", isCorrect: false } ] }
             }
         },
         page7: { // Density Activity
             easy: {
                 title: "Float <span aria-hidden='true'>🛳️</span> or Sink <span aria-hidden='true'>⚓</span>? Let's Test!",
                 paragraphs: [
                    "!!! Activity Time! <span aria-hidden='true'>🧪</span> Let's test things!",
                    "Get a tub of water <span aria-hidden='true'>💧</span> and some small objects (like a crayon <span aria-hidden='true'>🖍️</span>, a leaf <span aria-hidden='true'>🍂</span>, a rock <span aria-hidden='true'>🪨</span>, a plastic toy).",
                    "Guess: Will it float or sink?",
                    "Put each object in the water. What happens?",
                    "Which things are more dense than water? (The ones that sink!)"
                 ],
                 quiz1: { id: "page7-q17", question: "A leaf <span aria-hidden='true'>🍂</span> usually ______ in water.", options: [ { text: "floats <span aria-hidden='true'>🛳️</span>", isCorrect: true }, { text: "sinks <span aria-hidden='true'>⚓</span>", isCorrect: false } ] },
                 quiz2: { id: "page7-q18", question: "Things that sink <span aria-hidden='true'>⚓</span> are ______ dense than water.", options: [ { text: "more", isCorrect: true }, { text: "less", isCorrect: false } ] }
             },
             challenge: {
                 title: "Float <span aria-hidden='true'>🛳️</span> or Sink <span aria-hidden='true'>⚓</span>? Let's Test!",
                 paragraphs: [
                    "!!! Activity Prompt: <span aria-hidden='true'>🧪</span> Let's investigate density!",
                    "Fill a basin with water <span aria-hidden='true'>💧</span>. Gather various small objects (e.g., wood block, metal bolt, plastic cap, rubber eraser, cork, grape <span aria-hidden='true'>🍇</span>).",
                    "Predict whether each object will float or sink based on what you think its density is compared to water.",
                    "Test each object. Record your observations.",
                    "Discuss: Is there a connection between the material an object is made of and whether it floats or sinks? How does this relate to density?"
                 ],
                 quiz1: { id: "page7-q17", question: "Based on the activity, which material is likely less dense than water?", options: [ { text: "Metal", isCorrect: false }, { text: "Wood <span aria-hidden='true'>🪵</span>", isCorrect: true }, { text: "Rubber", isCorrect: false } ] }, // Wood typically floats
                 quiz2: { id: "page7-q18", question: "If an object sinks <span aria-hidden='true'>⚓</span>, its density is ______ than the density of water.", options: [ { text: "Lower", isCorrect: false }, { text: "Higher", isCorrect: true }, { text: "The same", isCorrect: false } ] }
             }
         },
         page8: { // Texture
             easy: {
                 title: "How Does it Feel? Texture! <span aria-hidden='true'>🖐️</span>",
                 paragraphs: [
                    "Texture is how something feels when you touch it.",
                    "It can feel smooth, like silk <span aria-hidden='true'>✨</span>.",
                    "It can feel rough, like sandpaper <span aria-hidden='true'>🧱</span>.",
                    "It can feel bumpy, soft, or hard.",
                    "Texture helps us know what things are, even with eyes closed! <span aria-hidden='true'>🙈</span>"
                 ],
                 quiz1: { id: "page8-q19", question: "A soft teddy bear <span aria-hidden='true'>🧸</span> has a different ______ than a hard block <span aria-hidden='true'>🧱</span>.", options: [ { text: "Color", isCorrect: false }, { text: "Volume", isCorrect: false }, { text: "Texture <span aria-hidden='true'>🖐️</span>", isCorrect: true } ] },
                 quiz2: { id: "page8-q20", question: "We use our sense of ______ to feel texture. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Sight <span aria-hidden='true'>👀</span>", isCorrect: false }, { text: "Smell <span aria-hidden='true'>👃</span>", isCorrect: false }, { text: "Touch", isCorrect: true } ] }
             },
             challenge: {
                 title: "How Does it Feel? Texture! <span aria-hidden='true'>🖐️</span>",
                 paragraphs: [
                    "Texture describes the physical feel of a surface <span aria-hidden='true'>🖐️</span>.",
                    "Common texture descriptions include smooth, rough, bumpy, soft, hard, fuzzy, sticky, etc.",
                    "Examples: Sandpaper feels rough due to its abrasive particles <span aria-hidden='true'>🧱</span>, while silk feels smooth because of its fine fibers <span aria-hidden='true'>✨</span>.",
                    "Our sense of touch uses texture to help identify objects and materials, even without sight <span aria-hidden='true'>🙈</span>."
                 ],
                 quiz1: { id: "page8-q19", question: "Which word best describes the texture of glass?", options: [ { text: "Bumpy", isCorrect: false }, { text: "Rough", isCorrect: false }, { text: "Smooth <span aria-hidden='true'>✨</span>", isCorrect: true } ] },
                 quiz2: { id: "page8-q20", question: "Texture is considered a ______ property of matter. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Chemical", isCorrect: false }, { text: "Physical", isCorrect: true }, { text: "Nuclear", isCorrect: false } ] }
             }
         },
        page9: { // Texture Activity
            easy: {
                title: "Feeling Fun! Texture Time! <span aria-hidden='true'>🙈</span>",
                paragraphs: [
                   "!!! Activity Time! <span aria-hidden='true'>🖐️</span> Let's feel things!",
                   "Find some objects around the room (like a soft toy<span aria-hidden='true'>🧸</span>, a smooth book <span aria-hidden='true'>📖</span>, a rough rock <span aria-hidden='true'>🪨</span>, a bumpy block).",
                   "Touch each one. Describe its texture.",
                   "Close your eyes! <span aria-hidden='true'>🙈</span> Can you guess the object just by feeling its texture?"
                ],
                quiz1: { id: "page9-q21", question: "A smooth rock <span aria-hidden='true'>🪨</span> feels different than a piece of sandpaper because of ______. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Volume", isCorrect: false }, { text: "Texture", isCorrect: true }, { text: "Weight", isCorrect: false } ] },
                quiz2: { id: "page9-q22", question: "Closing your eyes <span aria-hidden='true'>🙈</span> helps you focus on just the ______. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Color", isCorrect: false }, { text: "Shape", isCorrect: false }, { text: "Texture", isCorrect: true } ] }
            },
            challenge: {
                 title: "Feeling Fun! Texture Time! <span aria-hidden='true'>🙈</span>",
                 paragraphs: [
                    "!!! Activity Prompt: <span aria-hidden='true'>🖐️</span> Explore textures!",
                    "Gather a collection of objects with different textures (e.g., cotton ball, aluminum foil, tree bark, Lego brick, orange peel <span aria-hidden='true'>🍊</span>).",
                    "Describe the texture of each object using specific words.",
                    "Blindfold Challenge <span aria-hidden='true'>🙈</span>: Have a partner hand you an object. Can you identify it based only on its texture?"
                 ],
                 quiz1: { id: "page9-q21", question: "Can you identify an orange <span aria-hidden='true'>🍊</span> blindfolded <span aria-hidden='true'>🙈</span> just by its bumpy texture?", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false }, { text: "Maybe", isCorrect: false } ] }, // Generally yes
                 quiz2: { id: "page9-q22", question: "Describing texture involves using ______ words. <span aria-hidden='true'>🖐️</span>", options: [ { text: "Number", isCorrect: false }, { text: "Feeling", isCorrect: true }, { text: "Action", isCorrect: false } ] }
            }
        },
        page10: { // Substances
            easy: {
                title: "Pure Stuff: Substances <span aria-hidden='true'>💧🥇🧂</span>",
                paragraphs: [
                   "A substance is made of only one kind of matter.",
                   "Like pure water <span aria-hidden='true'>💧</span>. It's just water!",
                   "Gold <span aria-hidden='true'>🥇</span> is a substance. It's just gold.",
                   "Salt <span aria-hidden='true'>🧂</span> is a substance. It's just salt.",
                   "Substances have their own special properties."
                ],
                quiz1: { id: "page10-q23", question: "Pure gold <span aria-hidden='true'>🥇</span> is a ______. ", options: [ { text: "Substance", isCorrect: true }, { text: "Mixture", isCorrect: false } ] },
                quiz2: { id: "page10-q24", question: "Is sugar water <span aria-hidden='true'>🥤</span> a substance?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] } // It's a mixture
            },
            challenge: {
                 title: "Pure Stuff: Substances <span aria-hidden='true'>💧🥇🧂</span>",
                 paragraphs: [
                    "A substance is a form of matter that has a uniform and definite composition.",
                    "This means it's made of only one type of particle or molecule throughout.",
                    "Examples: Pure water (H₂O) <span aria-hidden='true'>💧</span>, pure gold (Au) <span aria-hidden='true'>🥇</span>, pure table salt (NaCl) <span aria-hidden='true'>🧂</span> are all substances.",
                    "Each substance has unique, identifiable properties (like density, melting point, color) that don't change under the same conditions."
                 ],
                 quiz1: { id: "page10-q23", question: "A substance has a definite and ______ composition. <span aria-hidden='true'>✨</span>", options: [ { text: "Changing", isCorrect: false }, { text: "Variable", isCorrect: false }, { text: "Uniform", isCorrect: true } ] },
                 quiz2: { id: "page10-q24", question: "H₂O is the chemical formula for the substance called ______. <span aria-hidden='true'>💧</span>", options: [ { text: "Salt <span aria-hidden='true'>🧂</span>", isCorrect: false }, { text: "Sugar", isCorrect: false }, { text: "Water", isCorrect: true } ] }
            }
        },
        page11: { // Mixtures
            easy: {
                title: "Mixing It Up! Mixtures <span aria-hidden='true'>🥗🥤</span>",
                paragraphs: [
                   "A mixture is made of two or more types of matter mixed together.",
                   "Like a salad <span aria-hidden='true'>🥗</span>! It has lettuce, tomatoes <span aria-hidden='true'>🍅</span>, cucumbers <span aria-hidden='true'>🥒</span>...",
                   "Like sand mixed with pebbles.",
                   "You can often see the different parts.",
                   "Milk <span aria-hidden='true'>🥛</span> looks the same all through. It's a special mixture (homogeneous).",
                   "Salad <span aria-hidden='true'>🥗</span> has parts you can see. It's a different mixture (heterogeneous)."
               ],
                quiz1: { id: "page11-q25", question: "Sand mixed with pebbles is a ______. ", options: [ { text: "Substance", isCorrect: false }, { text: "Mixture", isCorrect: true } ] },
                quiz2: { id: "page11-q26", question: "Can you usually see the different parts in a mixture like sand and water?", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false } ] },
                quiz3: { id: "page11-q27", question: "Milk <span aria-hidden='true'>🥛</span> is a special mixture that looks ______. ", options: [ { text: "Lumpy", isCorrect: false }, { text: "The same all through", isCorrect: true }, { text: "Clear", isCorrect: false } ] }
            },
            challenge: {
                 title: "Mixing It Up! Mixtures <span aria-hidden='true'>🥗🥤</span>",
                 paragraphs: [
                    "A mixture contains two or more substances physically combined, but not chemically bonded.",
                    "The substances in a mixture keep their own properties.",
                    "Examples: Salad <span aria-hidden='true'>🥗</span>, sand and pebbles, fruit juice with pulp <span aria-hidden='true'>🧃</span>.",
                    "Mixtures can often be separated back into their original components.",
                    "Homogeneous mixtures look the same throughout (uniform), like saltwater or milk <span aria-hidden='true'>🥛</span>. (Homo = same)",
                    "Heterogeneous mixtures have parts that are visibly different, like salad <span aria-hidden='true'>🥗</span> or rocks in sand. (Hetero = different)"
                 ],
                 quiz1: { id: "page11-q25", question: "In a mixture, are the substances chemically bonded?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] },
                 quiz2: { id: "page11-q26", question: "Air (<span aria-hidden='true'>💨</span>, mostly Nitrogen and Oxygen) is an example of a ______. ", options: [ { text: "Substance", isCorrect: false }, { text: "Homogeneous Mixture", isCorrect: true }, { text: "Heterogeneous Mixture", isCorrect: false } ] },
                 quiz3: { id: "page11-q27", question: "A mixture where the components are NOT evenly distributed is called ______. <span aria-hidden='true'>🥗</span>", options: [ { text: "Homogeneous", isCorrect: false }, { text: "Heterogeneous", isCorrect: true }, { text: "Pure", isCorrect: false } ] }
            }
        },
        page12: { // Mixture Activity
             easy: {
                 title: "Let's Make a Mixture! <span aria-hidden='true'>🥄🥣</span>",
                 paragraphs: [
                    "!!! Activity Time! <span aria-hidden='true'>🧪</span> Let's mix things!",
                    "Get a cup. Put in some buttons <span aria-hidden='true'>⚫</span>, paper clips <span aria-hidden='true'>📎</span>, and erasers.",
                    "Stir them gently. You made a mixture!",
                    "Can you pick the parts out again? (Yes!)",
                    "Can you see the different parts? (Yes!)"
                 ],
                 quiz1: { id: "page12-q28", question: "Mixing sand and sugar makes a ______. ", options: [ { text: "Substance", isCorrect: false }, { text: "Mixture", isCorrect: true } ] },
                 quiz2: { id: "page12-q29", question: "Could you get the paper clips <span aria-hidden='true'>📎</span> out of your mixture with a magnet <span aria-hidden='true'>🧲</span>?", options: [ { text: "Yes", isCorrect: true }, { text: "No", isCorrect: false } ] }
             },
             challenge: {
                  title: "Let's Make a Mixture! <span aria-hidden='true'>🥄🥣</span>",
                  paragraphs: [
                     "!!! Activity Prompt: <span aria-hidden='true'>🧪</span> Create and Analyze a Mixture!",
                     "In a container, combine several small classroom items (e.g., buttons <span aria-hidden='true'>⚫</span>, paper clips <span aria-hidden='true'>📎</span>, beads, small erasers).",
                     "Observe your mixture. Is it homogeneous or heterogeneous? Why?",
                     "Discuss: How could you separate the components back out? (Picking, using a magnet for clips <span aria-hidden='true'>🧲</span>, etc.)"
                  ],
                  quiz1: { id: "page12-q28", question: "The classroom mixture of buttons, clips, and erasers is ______. <span aria-hidden='true'>📎⚫</span>", options: [ { text: "Homogeneous", isCorrect: false }, { text: "Heterogeneous", isCorrect: true } ] },
                  quiz2: { id: "page12-q29", question: "Separating a mixture like this relies on the different ______ properties of its parts.", options: [ { text: "Chemical", isCorrect: false }, { text: "Physical", isCorrect: true }, { text: "Taste", isCorrect: false } ] }
             }
         },
        page13: { // Physical Changes
              easy: {
                  title: "Changing Shape: Physical Changes <span aria-hidden='true'>✂️💧👕</span>",
                  paragraphs: [
                     "A Physical Change changes how matter looks, but it's still the same stuff inside.",
                     "Like cutting paper <span aria-hidden='true'>✂️</span>. It's still paper, just smaller pieces.",
                     "Like ice melting into water <span aria-hidden='true'>💧</span>. It's still water stuff (H₂O), just liquid now.",
                     "Like folding clothes <span aria-hidden='true'>👕</span>. They change shape, but they are still clothes."
                  ],
                  quiz1: { id: "page13-q30", question: "Ripping paper is a ______ change. <span aria-hidden='true'>✂️</span>", options: [ { text: "Physical", isCorrect: true }, { text: "Chemical", isCorrect: false } ] },
                  quiz2: { id: "page13-q31", question: "When water freezes <span aria-hidden='true'>🧊</span>, does it become something totally new?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] }
              },
              challenge: {
                   title: "Changing Shape: Physical Changes <span aria-hidden='true'>✂️💧👕</span>",
                   paragraphs: [
                      "A Physical Change alters the form or appearance of matter, but does not create a new substance.",
                      "The chemical composition remains the same.",
                      "Examples include changes in state (melting <span aria-hidden='true'>🧊➡️💧</span>, freezing), shape (cutting <span aria-hidden='true'>✂️</span>, bending), or size (crushing).",
                      "Folding clothes <span aria-hidden='true'>👕</span> or dissolving sugar in water are also physical changes (the sugar is still there!)."
                   ],
                   quiz1: { id: "page13-q30", question: "Dissolving sugar in water is a ______ change because the sugar is still present. <span aria-hidden='true'>💧</span>", options: [ { text: "Physical", isCorrect: true }, { text: "Chemical", isCorrect: false } ] },
                   quiz2: { id: "page13-q31", question: "Physical changes alter the form or ______ of matter, but not its chemical identity. <span aria-hidden='true'>✨</span>", options: [ { text: "Color", isCorrect: false }, { text: "Smell", isCorrect: false }, { text: "Appearance", isCorrect: true } ] }
              }
          },
          page14: { // Chemical Changes
               easy: {
                   title: "New Stuff! Chemical Changes <span aria-hidden='true'>🔥🍳🎂</span>",
                   paragraphs: [
                       "A Chemical Change makes a new kind of matter!",
                       "It's not the same stuff anymore.",
                       "Like burning wood <span aria-hidden='true'>🔥</span>. You get ash and smoke, not wood.",
                       "Like cooking an egg <span aria-hidden='true'>🍳</span>. It changes and you can't go back!",
                       "Like baking a cake <span aria-hidden='true'>🎂</span>. Flour and eggs become cake!",
                       "Signs of chemical change: makes heat/light <span aria-hidden='true'>🔥</span>, changes color <span aria-hidden='true'>🎨</span>, smells different <span aria-hidden='true'>👃</span>, makes bubbles/gas <span aria-hidden='true'>🫧</span>."
                   ],
                   quiz1: { id: "page14-q32", question: "Rust <span aria-hidden='true'>🔩</span> forming on metal is a ______ change.", options: [ { text: "Physical", isCorrect: false }, { text: "Chemical", isCorrect: true } ] },
                   quiz2: { id: "page14-q33", question: "Is seeing bubbles <span aria-hidden='true'>🫧</span> often a sign of a physical or chemical change?", options: [ { text: "Physical", isCorrect: false }, { text: "Chemical", isCorrect: true } ] },
                   quiz3: { id: "page14-q34", question: "When you cook an egg <span aria-hidden='true'>🍳</span>, can you easily change it back to a raw egg?", options: [ { text: "Yes", isCorrect: false }, { text: "No", isCorrect: true } ] }
               },
               challenge: {
                    title: "New Stuff! Chemical Changes <span aria-hidden='true'>🔥🍳🎂</span>",
                    paragraphs: [
                       "A Chemical Change (also called a chemical reaction) results in the formation of one or more new substances with different properties.",
                       "The original matter is transformed.",
                       "Examples: Burning wood <span aria-hidden='true'>🔥</span> (wood becomes ash, smoke, gases), cooking an egg <span aria-hidden='true'>🍳</span> (proteins change), baking a cake <span aria-hidden='true'>🎂</span> (ingredients react), iron rusting <span aria-hidden='true'>🔩</span>.",
                       "Signs that a chemical change might have occurred include: gas production (bubbles <span aria-hidden='true'>🫧</span>), light/heat production <span aria-hidden='true'>🔥</span>, color change <span aria-hidden='true'>🎨</span>, formation of a precipitate (solid), odor change <span aria-hidden='true'>👃</span>."
                    ],
                    quiz1: { id: "page14-q32", question: "A chemical change results in the formation of new ______. <span aria-hidden='true'>✨</span>", options: [ { text: "Substances", isCorrect: true }, { text: "Mixtures", isCorrect: false }, { text: "Shapes", isCorrect: false } ] },
                    quiz2: { id: "page14-q33", question: "Which is a sign that a chemical change MIGHT have occurred?", options: [ { text: "Change in size", isCorrect: false }, { text: "Production of light <span aria-hidden='true'>🔥</span>", isCorrect: true }, { text: "Change in state (like melting)", isCorrect: false } ] },
                    quiz3: { id: "page14-q34", question: "Are chemical changes easily reversible?", options: [ { text: "Usually Yes", isCorrect: false }, { text: "Usually No", isCorrect: true } ] }
               }
           },
           page15: { // Changes of State - Adding Heat
                easy: {
                    title: "Getting Warmer: Melting & Evaporation <span aria-hidden='true'>☀️💧💨</span>",
                    paragraphs: [
                       "Adding heat <span aria-hidden='true'>🔥</span> makes particles <span aria-hidden='true'>✨</span> move faster!",
                       "Melting is when a solid <span aria-hidden='true'>🧊</span> turns into a liquid <span aria-hidden='true'>💧</span> because of heat.",
                       "The particles break free and slide around.",
                       "Evaporation is when a liquid <span aria-hidden='true'>💧</span> turns into a gas <span aria-hidden='true'>💨</span> because of heat.",
                       "The particles move super fast and spread out <span aria-hidden='true'>💨</span>!"
                    ],
                    quiz1: { id: "page15-q35", question: "Chocolate melting <span aria-hidden='true'>🍫</span> in your hand is ______. ", options: [ { text: "Melting", isCorrect: true }, { text: "Freezing", isCorrect: false }, { text: "Evaporation", isCorrect: false } ] },
                    quiz2: { id: "page15-q36", question: "When a puddle dries up <span aria-hidden='true'>☀️💧</span>, the water turns into a ______. <span aria-hidden='true'>💨</span>", options: [ { text: "Solid", isCorrect: false }, { text: "Liquid", isCorrect: false }, { text: "Gas", isCorrect: true } ] }
                },
                challenge: {
                     title: "Getting Warmer: Melting & Evaporation <span aria-hidden='true'>☀️💧💨</span>",
                     paragraphs: [
                        "Adding thermal energy (heat <span aria-hidden='true'>🔥</span>) increases the kinetic energy of particles <span aria-hidden='true'>✨</span>, making them move faster.",
                        "Melting is the process where a solid <span aria-hidden='true'>🧊</span> absorbs heat and changes into a liquid <span aria-hidden='true'>💧</span> at its melting point. Particles gain enough energy to overcome fixed positions. (Ice melting <span aria-hidden='true'>🧊➡️💧</span>)",
                        "Evaporation is the process where a liquid <span aria-hidden='true'>💧</span> absorbs heat and changes into a gas (vapor) <span aria-hidden='true'>💨</span>, usually from the surface. Particles gain enough energy to escape the liquid phase. (Puddle disappearing <span aria-hidden='true'>☀️💧</span>)"
                     ],
                     quiz1: { id: "page15-q35", question: "Melting occurs when a solid absorbs enough ______ energy. <span aria-hidden='true'>🔥</span>", options: [ { text: "Light", isCorrect: false }, { text: "Sound", isCorrect: false }, { text: "Thermal", isCorrect: true } ] },
                     quiz2: { id: "page15-q36", question: "Evaporation is a phase change from ______ to ______. <span aria-hidden='true'>💧➡️💨</span>", options: [ { text: "Solid to Liquid", isCorrect: false }, { text: "Liquid to Gas", isCorrect: true }, { text: "Gas to Liquid", isCorrect: false } ] }
                }
            },
             page16: { // Changes of State - Cooling Down
                  easy: {
                      title: "Cooling Down: Freezing & Condensation <span aria-hidden='true'>🥶🧊💧</span>",
                      paragraphs: [
                         "Taking away heat (getting cold <span aria-hidden='true'>🥶</span>) makes particles <span aria-hidden='true'>✨</span> slow down!",
                         "Freezing is when a liquid <span aria-hidden='true'>💧</span> turns into a solid <span aria-hidden='true'>🧊</span> because it gets cold.",
                         "The particles slow down and lock together.",
                         "Condensation is when a gas <span aria-hidden='true'>💨</span> turns back into a liquid <span aria-hidden='true'>💧</span> because it cools down.",
                         "The particles slow down and clump together."
                      ],
                      quiz1: { id: "page16-q37", question: "Making ice cubes <span aria-hidden='true'>🧊</span> is an example of ______. ", options: [ { text: "Melting", isCorrect: false }, { text: "Freezing", isCorrect: true }, { text: "Condensation", isCorrect: false } ] },
                      quiz2: { id: "page16-q38", question: "Seeing your breath on a cold day <span aria-hidden='true'>🥶💨</span> is caused by ______. ", options: [ { text: "Evaporation", isCorrect: false }, { text: "Freezing", isCorrect: false }, { text: "Condensation", isCorrect: true } ] }
                  },
                  challenge: {
                       title: "Cooling Down: Freezing & Condensation <span aria-hidden='true'>🥶🧊💧</span>",
                       paragraphs: [
                          "Removing thermal energy (cooling <span aria-hidden='true'>🥶</span>) decreases the kinetic energy of particles <span aria-hidden='true'>✨</span>, making them move slower.",
                          "Freezing is the process where a liquid <span aria-hidden='true'>💧</span> loses heat and changes into a solid <span aria-hidden='true'>🧊</span> at its freezing point. Particles slow down enough to form fixed positions. (Water to ice <span aria-hidden='true'>💧➡️🧊</span>)",
                          "Condensation is the process where a gas (vapor) <span aria-hidden='true'>💨</span> loses heat and changes back into a liquid <span aria-hidden='true'>💧</span>. This happens when gas particles cool and slow down, coming closer together. (Dew on grass <span aria-hidden='true'>🌱</span>, water on cold glass)"
                       ],
                       quiz1: { id: "page16-q37", question: "Freezing is the process where a liquid loses thermal energy and becomes a ______. <span aria-hidden='true'>🧊</span>", options: [ { text: "Solid", isCorrect: true }, { text: "Gas", isCorrect: false }, { text: "Plasma", isCorrect: false } ] },
                       quiz2: { id: "page16-q38", question: "Condensation happens when gas particles ______ energy and come closer together. <span aria-hidden='true'>🥶</span>", options: [ { text: "Gain", isCorrect: false }, { text: "Lose", isCorrect: true }, { text: "Share", isCorrect: false } ] }
                  }
              },
              page17: { // Review Properties & Measurement
                   easy: {
                       title: "Seeing <span aria-hidden='true'>👀</span> and Measuring <span aria-hidden='true'>📏</span> Matter",
                       paragraphs: [
                          "### We can observe matter using our senses!",
                          "* Observable Properties: Color <span aria-hidden='true'>🎨</span>, Shape <span aria-hidden='true'>🟦</span>, Texture <span aria-hidden='true'>🖐️</span>, Smell <span aria-hidden='true'>👃</span>, Sound <span aria-hidden='true'>🔊</span>.",
                          "### We can also measure matter!",
                          "* Measurable Properties: Weight <span aria-hidden='true'>⚖️</span>, Length <span aria-hidden='true'>📏</span>, Temperature <span aria-hidden='true'>🔥🥶</span>, Volume <span aria-hidden='true'>🧪</span>.",
                          "### Tools help us measure:",
                          "* Scale for weight <span aria-hidden='true'>⚖️</span>.",
                          "* Ruler for length <span aria-hidden='true'>📏</span>.",
                          "* Thermometer for temperature<span aria-hidden='true'>🌡️</span>.",
                          "* Measuring cup for liquid volume <span aria-hidden='true'>🧪</span>."
                       ],
                       quiz1: { id: "page17-q39", question: "Using your nose <span aria-hidden='true'>👃</span> to describe matter is using an ______ property.", options: [ { text: "Observable", isCorrect: true }, { text: "Measurable", isCorrect: false } ] },
                       quiz2: { id: "page17-q40", question: "What tool measures how heavy something is? <span aria-hidden='true'>⚖️</span>", options: [ { text: "Ruler <span aria-hidden='true'>📏</span>", isCorrect: false }, { text: "Scale", isCorrect: true }, { text: "Measuring cup <span aria-hidden='true'>🧪</span>", isCorrect: false } ] }
                   },
                   challenge: {
                        title: "Seeing <span aria-hidden='true'>👀</span> and Measuring <span aria-hidden='true'>📏</span> Matter",
                        paragraphs: [
                           "Properties of matter can be Observable (using senses) or Measurable (using tools).",
                           "### Observable Properties:",
                           "* Qualitative descriptions like color <span aria-hidden='true'>🎨</span>, odor <span aria-hidden='true'>👃</span>, texture <span aria-hidden='true'>🖐️</span>, shape <span aria-hidden='true'>🟦</span>, state (solid/liquid/gas), sound <span aria-hidden='true'>🔊</span>.",
                           "### Measurable Properties:",
                           "* Quantitative descriptions obtained using instruments.",
                           "* Weight/Mass: Measured with a scale <span aria-hidden='true'>⚖️</span> (grams, kilograms, pounds).",
                           "* Length/Distance: Measured with a ruler <span aria-hidden='true'>📏</span> or tape measure (centimeters, meters, inches, feet).",
                           "* Temperature: Measured with a thermometer <span aria-hidden='true'>🌡️</span> (Celsius, Fahrenheit).",
                           "* Volume: Measured with a graduated cylinder <span aria-hidden='true'>🧪</span> or measuring cup (mL, L), or calculated (L x W x H) for regular solids (cm³, m³)."
                        ],
                        quiz1: { id: "page17-q39", question: "Is temperature a qualitative (observable) or quantitative (measurable) property? <span aria-hidden='true'>🌡️</span>", options: [ { text: "Observable", isCorrect: false }, { text: "Measurable", isCorrect: true } ] },
                        quiz2: { id: "page17-q40", question: "Which instrument is used to measure volume most accurately in a lab? <span aria-hidden='true'>🧪</span>", options: [ { text: "Beaker", isCorrect: false }, { text: "Ruler <span aria-hidden='true'>📏</span>", isCorrect: false }, { text: "Graduated cylinder", isCorrect: true } ] }
                   }
               },
                page18: { // Review Part 1
                    easy: {
                        title: "Matter Check-Up! Part 1 <span aria-hidden='true'>⭐</span>",
                        reviewContent: [
                            "**Matter** takes up space and has weight <span aria-hidden='true'>⚖️</span>.",
                            "**States**: Solid <span aria-hidden='true'>🧊</span> (keeps shape), Liquid <span aria-hidden='true'>💧</span> (takes container shape), Gas <span aria-hidden='true'>💨</span> (fills space).",
                            "Everything is made of tiny **particles** <span aria-hidden='true'>✨</span>.",
                            "Particles are tight in solids, close in liquids, far apart in gases.",
                            "**Properties**: Volume (space <span aria-hidden='true'>📏</span>), Density (packed tight <span aria-hidden='true'>🧱</span>), Texture (feel <span aria-hidden='true'>🖐️</span>).",
                            "Less dense things **float** <span aria-hidden='true'>🛳️</span>, more dense things **sink** <span aria-hidden='true'>⚓</span>."
                        ] // No quizzes on review pages
                    },
                    challenge: {
                        title: "Matter Check-Up! Part 1 <span aria-hidden='true'>⭐</span>",
                        reviewContent: [
                           "**Matter** has mass and volume.",
                           "**States** (Solid, Liquid, Gas) depend on particle arrangement and motion <span aria-hidden='true'>✨</span>.",
                           "Solids: definite shape/volume. Liquids: definite volume. Gases: no definite shape/volume.",
                           "**Properties** help identify matter:",
                           "Volume: Space occupied <span aria-hidden='true'>📏</span>.",
                           "Density: Mass per unit volume (how packed?) <span aria-hidden='true'>🧱</span>. Determines float/sink.",
                           "Texture: Surface feel <span aria-hidden='true'>🖐️</span>.",
                           "Properties can be **Observable** (senses) or **Measurable** (tools <span aria-hidden='true'>📏🌡️⚖️🧪</span>)."
                        ] // No quizzes on review pages
                    }
               },
               page19: { // Review Part 2
                    easy: {
                        title: "Matter Check-Up! Part 2 <span aria-hidden='true'>⭐⭐</span>",
                        reviewContent: [
                           "**Substance**: Only one kind of matter (water <span aria-hidden='true'>💧</span>, salt <span aria-hidden='true'>🧂</span>).",
                           "**Mixture**: Two or more kinds mixed (salad <span aria-hidden='true'>🥗</span>, air <span aria-hidden='true'>💨</span>).",
                           "**Physical Change**: Looks different, but same stuff inside (cutting <span aria-hidden='true'>✂️</span>, melting <span aria-hidden='true'>💧</span>).",
                           "**Chemical Change**: Makes new stuff! (burning <span aria-hidden='true'>🔥</span>, cooking <span aria-hidden='true'>🍳</span>).",
                           "**Changes of State**: Melting <span aria-hidden='true'>🧊➡️💧</span>, Freezing <span aria-hidden='true'>💧➡️🧊</span>, Evaporation <span aria-hidden='true'>💧➡️💨</span>, Condensation <span aria-hidden='true'>💨➡️💧</span>.",
                           "Heat makes particles move faster <span aria-hidden='true'>🔥</span>, Cold makes them slower <span aria-hidden='true'>🥶</span>."
                        ] // No quizzes on review pages
                    },
                    challenge: {
                        title: "Matter Check-Up! Part 2 <span aria-hidden='true'>⭐⭐</span>",
                        reviewContent: [
                           "**Substance**: Pure matter with definite composition (e.g., H₂O, NaCl).",
                           "**Mixture**: Physical blend of two or more substances (Homogeneous - uniform, Heterogeneous - non-uniform).",
                           "**Physical Change**: Alters form, not identity (change of state, shape, size). Reversible often.",
                           "**Chemical Change**: Creates new substances with new properties (reaction). Often irreversible easily. Signs: gas <span aria-hidden='true'>🫧</span>, heat/light <span aria-hidden='true'>🔥</span>, color change, precipitate.",
                           "**Changes of state** involve energy change and affect particle motion (Melting/Evaporation require energy; Freezing/Condensation release energy)."
                        ] // No quizzes on review pages
                    }
                },
                page20: { // Final Quiz
                     easy: {
                         title: "Matter Master Quiz! <span aria-hidden='true'>🏆</span>",
                         // No paragraphs needed, just quizzes
                         quiz1: { id: "page20-q41", question: "Everything around us that takes up space and has weight is called ______. <span aria-hidden='true'>⚖️</span>", options: [ { text: "Energy", isCorrect: false }, { text: "Matter", isCorrect: true }, { text: "Light", isCorrect: false } ] },
                         quiz2: { id: "page20-q42", question: "Ice <span aria-hidden='true'>🧊</span> is an example of a ______. ", options: [ { text: "Solid", isCorrect: true }, { text: "Liquid", isCorrect: false }, { text: "Gas", isCorrect: false } ] },
                         quiz3: { id: "page20-q43", question: "If something sinks <span aria-hidden='true'>⚓</span> in water, it is likely ______ dense than water.", options: [ { text: "more", isCorrect: true }, { text: "less", isCorrect: false } ] },
                         quiz4: { id: "page20-q44", question: "Tearing paper is a ______ change. <span aria-hidden='true'>✂️</span>", options: [ { text: "Physical", isCorrect: true }, { text: "Chemical", isCorrect: false } ] },
                         quiz5: { id: "page20-q45", question: "Sand mixed with water is a ______. ", options: [ { text: "Substance", isCorrect: false }, { text: "Mixture", isCorrect: true } ] },
                         quiz6: { id: "page20-q46", question: "What tool do we use to measure how hot or cold something is? <span aria-hidden='true'>🌡️</span>", options: [ { text: "Thermometer", isCorrect: true }, { text: "Ruler <span aria-hidden='true'>📏</span>", isCorrect: false }, { text: "Scale <span aria-hidden='true'>⚖️</span>", isCorrect: false } ] },
                         quiz7: { id: "page20-q47", question: "A burning candle <span aria-hidden='true'>🔥</span> producing light is likely showing a ______ change.", options: [ { text: "Physical", isCorrect: false }, { text: "Chemical", isCorrect: true } ] },
                         quiz8: { id: "page20-q48", question: "When liquid water turns into ice <span aria-hidden='true'>🧊</span>, it is called ______. ", options: [ { text: "Melting", isCorrect: false }, { text: "Freezing", isCorrect: true }, { text: "Evaporation", isCorrect: false } ] }
                     },
                     challenge: {
                          title: "Matter Master Quiz! <span aria-hidden='true'>🏆</span>",
                         // No paragraphs needed, just quizzes
                          quiz1: { id: "page20-q41", question: "Two fundamental properties of matter are that it has ______ and ______. <span aria-hidden='true'>⚖️📏</span>", options: [ { text: "Color and Shape", isCorrect: false }, { text: "Mass and Volume", isCorrect: true }, { text: "Light and Heat", isCorrect: false } ] },
                          quiz2: { id: "page20-q42", question: "In which state of matter do particles slide past each other but remain close? <span aria-hidden='true'>💧</span>", options: [ { text: "Solid", isCorrect: false }, { text: "Liquid", isCorrect: true }, { text: "Gas", isCorrect: false } ] },
                          quiz3: { id: "page20-q43", question: "The tendency of an object to float or sink is primarily determined by its ______. <span aria-hidden='true'>🧱</span>", options: [ { text: "Weight", isCorrect: false }, { text: "Volume", isCorrect: false }, { text: "Density", isCorrect: true } ] },
                          quiz4: { id: "page20-q44", question: "A key aspect of a physical change is that the ______ of the matter does not change. <span aria-hidden='true'>✨</span>", options: [ { text: "Shape", isCorrect: false }, { text: "Size", isCorrect: false }, { text: "Chemical identity", isCorrect: true } ] },
                          quiz5: { id: "page20-q45", question: "Salt dissolved completely in water creates a ______ mixture.", options: [ { text: "Homogeneous", isCorrect: true }, { text: "Heterogeneous", isCorrect: false }, { text: "Pure", isCorrect: false } ] },
                          quiz6: { id: "page20-q46", question: "Measuring the texture <span aria-hidden='true'>🖐️</span> of a surface provides ______ information.", options: [ { text: "Quantitative (Measurable)", isCorrect: false }, { text: "Qualitative (Observable)", isCorrect: true }, { text: "Chemical", isCorrect: false } ] },
                          quiz7: { id: "page20-q47", question: "Production of a new gas <span aria-hidden='true'>🫧</span> is often evidence of a ______ change.", options: [ { text: "Physical", isCorrect: false }, { text: "Chemical", isCorrect: true }, { text: "State", isCorrect: false } ] },
                          quiz8: { id: "page20-q48", question: "Condensation (gas to liquid <span aria-hidden='true'>💧</span>) typically occurs when thermal energy is ______. <span aria-hidden='true'>🥶</span>", options: [ { text: "Added <span aria-hidden='true'>🔥</span>", isCorrect: false }, { text: "Removed", isCorrect: true }, { text: "Unchanged", isCorrect: false } ] }
                     }
                 }
        // Page 21 (Finish Screen) is static HTML updated by JS
    };


    // --- DOM Elements ---
    const scoreDisplay = document.getElementById('current-score');
    const finalScoreDisplay = document.getElementById('final-score');
    const totalPossibleScoreDisplay = document.getElementById('total-possible-score');
    const scoreAreaContainer = document.getElementById('score-area-container');
    const lessonContainer = document.getElementById('lesson-container');
    const mainHeaderTitle = document.getElementById('main-header-title');
    const plusOneTemplate = document.getElementById('plus-one-template');
    const quizOptionTemplate = document.getElementById('quiz-option-template');
    const listItemTemplate = document.getElementById('list-item-template'); // Template for REVIEW list items
    const reviewHeadingTemplate = document.getElementById('review-heading-template'); // Template for REVIEW headings
    const draggableItemTemplate = document.getElementById('draggable-item-template'); // Generic draggable template
    const dropZoneTemplate = document.getElementById('drop-zone-template'); // Generic drop zone template
    const ttsSpeedSlider = document.getElementById('tts-speed');
    const speedValueDisplay = document.getElementById('speed-value');
    const ttsStopButton = document.getElementById('tts-stop');
    const backButton = document.getElementById('back-button');
    const nextButton = document.getElementById('next-button');
    const navigationControls = document.getElementById('navigation-controls');
    // Finish screen text elements
    const finishTitle = document.getElementById('finish-title');
    const finishSubtitle = document.getElementById('finish-subtitle');
    const finishEncouragement = document.getElementById('finish-encouragement');


    // --- Speech Synthesis ---
    const synth = window.speechSynthesis;
    let currentUtterance = null;
    let highlightedElement = null;

    // --- Helper: Clean Text ---
    function getCleanText(segmentElement) {
         if (!segmentElement) return '';
         const clone = segmentElement.cloneNode(true);
         // Remove icons, controls, and aria-hidden elements
         clone.querySelectorAll('[aria-hidden="true"], .hidden-emoji, .option-icons, .tts-translate-wrapper, .ell-controls, i.fas, i.fab, i.far').forEach(el => el.remove());
         let cleanText = clone.textContent || clone.innerText || '';
         cleanText = cleanText.trim();
         // Remove emojis more comprehensively (if any remain)
         const emojiRegex = /[\u{1F300}-\u{1F5FF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}\u{FE00}-\u{FE0F}\u{200D}]/gu;
         cleanText = cleanText.replace(emojiRegex, '').replace(/\s+/g, ' ').trim();
         // Remove placeholder prefixes like (a), (b), etc.
         cleanText = cleanText.replace(/^\([a-zA-Z]\)\s*/, '');
         // Remove list bullets like '1.', '•' etc. if they get included accidentally
         cleanText = cleanText.replace(/^(\d+\.|•)\s*/, '');
         // Remove specific pronunciation guides (add any new ones if needed - none in this plan)
         // cleanText = cleanText.replace(/\(some-guide\)/gi, '');

         // Remove extra text like "(Shows something...)", "(Activity Concept Check)", "(Conservation Concept)"
         cleanText = cleanText.replace(/\(Shows.*?\)/gi, '');
         cleanText = cleanText.replace(/\(Activity Concept Check\)/gi, '');
         cleanText = cleanText.replace(/\(Conservation Concept\)/gi, '');

         return cleanText.trim();
    }

    // --- Helper: Find Associated Segment ---
    function findAssociatedSegment(buttonElement) {
         let segment = null;
         const parent = buttonElement.parentElement;

         // --- Check 1: Standard ELL Controls next to a segment ---
         if (parent.classList.contains('ell-controls')) {
              const previousWrapper = parent.previousElementSibling;
              if (previousWrapper && previousWrapper.classList.contains('content-wrapper')) {
                   segment = previousWrapper.querySelector('.translatable-segment');
                   if (segment) return segment;
              }
              // Check if inside a list item structure (template)
              const listItem = parent.closest('.review-list-item, .content-list-item');
              if(listItem){
                    const wrapper = listItem.querySelector('.content-wrapper');
                    if(wrapper) segment = wrapper.querySelector('.translatable-segment');
                    if(segment) return segment;
              }
               // Check if inside a review heading structure (template)
              const headingContainer = parent.closest('.review-heading-container');
              if(headingContainer){
                    const wrapper = headingContainer.querySelector('.content-wrapper');
                    if(wrapper) segment = wrapper.querySelector('.review-heading.translatable-segment');
                    if(segment) return segment;
              }

               // Fallback for block containers if other structures fail
               const blockContainer = parent.closest('.block-container');
                if (blockContainer && !listItem && !headingContainer) {
                    const contentWrapper = blockContainer.querySelector('.content-wrapper');
                    if (contentWrapper) { segment = contentWrapper.querySelector('.translatable-segment'); if (segment) return segment; }
                }
         }

        // --- Check 2: Quiz/Option Buttons ---
        if (parent.classList.contains('option-icons')) { // TTS/Translate button for an option
            const optionGroup = parent.closest('.option-group');
            if (optionGroup) {
                const mainButton = optionGroup.querySelector('.quiz-option-button');
                if (mainButton) { segment = mainButton.querySelector('.translatable-segment'); if (segment) return segment; }
            }
        } else if (parent.classList.contains('tts-translate-wrapper')) { // TTS/Translate button for question/feedback
            const segmentSibling = parent.previousElementSibling;
            if (segmentSibling && segmentSibling.matches('.translatable-segment')) { return segmentSibling; }
            // Check finish screen specifically if needed
             const finishContainer = parent.closest('.finish-screen-content');
             if(finishContainer){
                 const wrapper = parent.closest('.block-container');
                 if(wrapper){
                     const contentWrapper = wrapper.querySelector('.content-wrapper');
                     if(contentWrapper) segment = contentWrapper.querySelector('.translatable-segment');
                     if(segment) return segment;
                 }
             }
        } else if (buttonElement.classList.contains('quiz-option-button')) { // Click directly on option button text area
             segment = buttonElement.querySelector('.translatable-segment'); if (segment) return segment;
         }


        // --- If no segment found after all checks ---
        if (!segment) console.warn("Could not find associated segment for button:", buttonElement);
        return segment;
    }

    // --- TTS Functions ---
    function speakText(buttonElement) {
         if (!synth) return;
         const segmentElement = findAssociatedSegment(buttonElement);
         if (!segmentElement) { console.warn("Speak: No segment found", buttonElement); return; }
         const textToSpeak = getCleanText(segmentElement);
         if (!textToSpeak) { console.warn("TTS: Empty text", segmentElement); return; }
         stopTTS();
         currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
         currentUtterance.rate = parseFloat(sessionStorage.getItem('ttsSpeed') || ttsSpeedSlider.value || '1');
         currentUtterance.lang = 'en-US'; // Or allow language selection
         currentUtterance.onstart = () => { removeHighlight(); segmentElement.classList.add('highlight'); highlightedElement = segmentElement; };
         currentUtterance.onend = () => { removeHighlight(); currentUtterance = null; highlightedElement = null; };
         currentUtterance.onerror = (event) => { console.error('TTS error:', event.error); removeHighlight(); currentUtterance = null; highlightedElement = null; };
         setTimeout(() => { if (synth && currentUtterance) synth.speak(currentUtterance); }, 50);
    }

    function stopTTS() {
        if (synth && synth.speaking) synth.cancel();
        removeHighlight();
        if (currentUtterance) { currentUtterance.onstart = null; currentUtterance.onend = null; currentUtterance.onerror = null; currentUtterance = null; }
        highlightedElement = null;
    }

    function removeHighlight() {
         document.querySelectorAll('.translatable-segment.highlight').forEach(el => el.classList.remove('highlight'));
         highlightedElement = null;
    }

    // --- Translation Function ---
    function translateSegment(buttonElement) {
         const segmentElement = findAssociatedSegment(buttonElement);
         if (!segmentElement) { console.warn("Translate: No segment found", buttonElement); return; }
         const textToTranslate = getCleanText(segmentElement); // Use cleaned text for translation
         if (!textToTranslate) { console.warn("Translate: Empty text", segmentElement); return; }
         const targetLang = 'th'; // Example: Thai
         const translateUrl = `https://translate.google.com/?sl=en&tl=${targetLang}&text=${encodeURIComponent(textToTranslate)}&op=translate`;
         window.open(translateUrl, TRANSLATE_WINDOW_NAME, 'noopener,noreferrer');
    }

    // --- Word Translation (Double Click) ---
    function handleDoubleClick(event) {
          const targetSegment = event.target.closest('.translatable-segment');
          if (targetSegment && !event.target.closest('button')) { // Ensure not clicking a button
              setTimeout(() => { // Allow selection to register
                 const selection = window.getSelection();
                 const selectedText = selection.toString().trim();
                 // Only translate reasonably sized words/phrases
                 if (selectedText.length > 0 && selectedText.length < 50 && !selectedText.includes('\n')) {
                      if (selection.rangeCount > 0) {
                          const range = selection.getRangeAt(0);
                          // Ensure selection is within the intended segment
                          if (targetSegment.contains(range.commonAncestorContainer)) {
                              const tempNode = document.createElement('span'); tempNode.textContent = selectedText;
                              const cleanSelectedText = getCleanText(tempNode); // Reuse cleaner
                              if (cleanSelectedText) {
                                  const targetLang = 'th'; // Example: Thai
                                  const translateUrl = `https://translate.google.com/?sl=en&tl=${targetLang}&text=${encodeURIComponent(cleanSelectedText)}&op=translate`;
                                  window.open(translateUrl, TRANSLATE_WINDOW_NAME, 'noopener,noreferrer');
                              }
                          }
                      }
                 }
             }, 50);
          }
    }

    // --- Gamification (+1 Effect) ---
    function showPlusOne(element) {
         if (!plusOneTemplate || !lessonContainer) return;
         const plusOne = plusOneTemplate.cloneNode(true);
         plusOne.style.display = 'block';
         // Try to position above the button itself
         const targetElement = element.closest('button') || element;
         lessonContainer.appendChild(plusOne); // Append to lesson container for relative positioning
         const rect = targetElement.getBoundingClientRect();
         const containerRect = lessonContainer.getBoundingClientRect();
         // Position relative to the container, centered above the target element
         plusOne.style.left = `${rect.left - containerRect.left + (rect.width / 2) - (plusOne.offsetWidth / 2)}px`;
         plusOne.style.top = `${rect.top - containerRect.top - plusOne.offsetHeight}px`; // Position above
         plusOne.style.position = 'absolute'; // Ensure it's absolute within the relative container
         // Remove after animation
         setTimeout(() => { if (plusOne.parentNode === lessonContainer) lessonContainer.removeChild(plusOne); }, 1000);
    }

    // --- Difficulty Selection ---
    function selectDifficulty(selectedDifficulty) {
        difficulty = selectedDifficulty;
        sessionStorage.setItem('lessonDifficulty', difficulty);
        currentPage = 1; // Move to the first content page (page-1)
        sessionStorage.setItem('lessonCurrentPage', currentPage);
        scoreAreaContainer.style.display = 'block';
        navigationControls.style.display = 'flex';
        showPage();
    }

    // --- Dynamic Content Injection ---
    function injectPageContent(pageElement, pageNum, currentDifficulty) {
        const contentData = pageContent[`page${pageNum}`]?.[currentDifficulty];
        if (!contentData) { console.error(`No content found for page ${pageNum}, difficulty ${currentDifficulty}`); return; }

        // Reset page-specific activity completion state (though less complex activities here)
        delete activityCompletedState[pageNum];
        sessionStorage.removeItem(`activity_page${pageNum}_completed`);

        // --- Update Title ---
        const titleElement = pageElement.querySelector('.content-area .block-container h2.translatable-segment');
        if (titleElement && contentData.title) { titleElement.innerHTML = contentData.title; }
        else if (titleElement) { titleElement.innerHTML = ''; } // Clear if no title provided
        else { console.warn(`Title element not found on page ${pageNum}`); }

        // --- Update Paragraphs, Lists, Headings ---
        const contentWrapperDivId = 'content-page' + pageNum;
        const contentWrapperDiv = pageElement.querySelector('#' + contentWrapperDivId);

        if (contentWrapperDiv && contentData.paragraphs && Array.isArray(contentData.paragraphs)) {
            contentWrapperDiv.innerHTML = ''; // Clear previous content
            let currentListElement = null; // To hold UL elements

            contentData.paragraphs.forEach(paragraphText => {
                if (!paragraphText || typeof paragraphText !== 'string') return;

                const isSubHeading = paragraphText.startsWith('### ');
                const isListItem = paragraphText.startsWith('* ');
                const isCallout = paragraphText.startsWith('!!! '); // For activity prompts/notes
                let cleanText = paragraphText;

                let container = document.createElement('div');
                let textElement;
                let textWrapper = document.createElement('div');
                textWrapper.className = 'content-wrapper';

                if (isSubHeading) {
                    if (currentListElement) { contentWrapperDiv.appendChild(currentListElement); currentListElement = null; } // Close previous list if any
                    cleanText = paragraphText.substring(4).trim();
                    container.className = 'block-container content-subheading-container'; // Use appropriate class
                    textElement = document.createElement('h3');
                    textElement.className = 'content-subheading translatable-segment';

                } else if (isListItem) {
                    if (!currentListElement) { // Start a new list if needed
                        currentListElement = document.createElement('ul');
                        currentListElement.className = 'content-list'; // Use appropriate class
                        contentWrapperDiv.appendChild(currentListElement); // Append UL immediately
                    }
                    cleanText = paragraphText.substring(2).trim();
                    container = document.createElement('li'); // List item IS the container
                    container.className = 'block-container content-list-item'; // Use appropriate class
                    textElement = document.createElement('p'); // Use P inside LI for consistency
                    textElement.className = 'translatable-segment';

                } else if (isCallout) {
                    if (currentListElement) { contentWrapperDiv.appendChild(currentListElement); currentListElement = null; } // Close previous list if any
                    cleanText = paragraphText.substring(4).trim();
                    container.className = 'block-container content-callout-container'; // Use appropriate class
                    textWrapper = null; // Callout is direct child
                    textElement = document.createElement('blockquote');
                    textElement.className = 'content-callout translatable-segment';

                } else { // Standard paragraph
                    if (currentListElement) { contentWrapperDiv.appendChild(currentListElement); currentListElement = null; } // Close previous list if any
                    cleanText = paragraphText.trim();
                    container.className = 'block-container standard-paragraph-block'; // Use appropriate class
                    textElement = document.createElement('p');
                    textElement.className = 'translatable-segment';
                }

                textElement.innerHTML = cleanText; // Use innerHTML to render emojis correctly

                // Append text element to its wrapper or directly to container
                if (textWrapper) {
                    textWrapper.appendChild(textElement);
                    container.appendChild(textWrapper);
                } else {
                    container.appendChild(textElement);
                }

                // Add ELL controls
                const controls = document.createElement('div');
                controls.className = 'ell-controls';
                controls.innerHTML = `<button class="ell-btn tts-btn" onclick="speakText(this)" title="Read aloud"><i class="fas fa-volume-up"></i></button><button class="ell-btn translate-btn" onclick="translateSegment(this)" title="Translate sentence"><i class="fas fa-language"></i></button>`;
                container.appendChild(controls);

                // Append the container to the list or the main content div
                if (isListItem) {
                    if (currentListElement) {
                        currentListElement.appendChild(container); // Append LI to UL
                    } else {
                        console.error("Attempted to append list item to null list element!");
                        contentWrapperDiv.appendChild(container); // Fallback append
                    }
                } else {
                    contentWrapperDiv.appendChild(container); // Append subheading/paragraph/callout div
                }
            });

            // Append the last list if it exists
            if (currentListElement) {
                contentWrapperDiv.appendChild(currentListElement);
            }
        } else if (contentWrapperDiv) {
            contentWrapperDiv.innerHTML = ''; // Clear if no paragraphs provided
        }

        // --- Inject Review Content (Pages 18, 19) ---
         if ((pageNum === 18 || pageNum === 19) && contentData.reviewContent) {
             const reviewContainerId = 'review-content-page' + pageNum;
             const reviewContainer = pageElement.querySelector('#' + reviewContainerId);
             if (reviewContainer && reviewHeadingTemplate && listItemTemplate) {
                 reviewContainer.innerHTML = ''; // Clear previous review content
                 let currentListElement = null;

                 contentData.reviewContent.forEach(factText => {
                     const isHeading = factText.startsWith('**');
                     const cleanText = factText.replace(/\*\*/g, '').trim(); // Remove bold markers

                     if (isHeading) {
                         // Close previous list if it exists
                         if (currentListElement) {
                             reviewContainer.appendChild(currentListElement);
                             currentListElement = null;
                         }

                         // Create heading from template
                         const headingClone = reviewHeadingTemplate.content.cloneNode(true);
                         headingClone.querySelector('.review-heading.translatable-segment').innerHTML = cleanText;
                         reviewContainer.appendChild(headingClone);

                     } else {
                         // Start a new list if needed
                         if (!currentListElement) {
                             currentListElement = document.createElement('ul');
                             currentListElement.className = 'review-list';
                         }

                         // Create list item from template
                         const liClone = listItemTemplate.content.cloneNode(true);
                         liClone.querySelector('.translatable-segment').innerHTML = cleanText;
                         currentListElement.appendChild(liClone);
                     }
                 });

                 // Append the last list if it exists
                 if (currentListElement) {
                     reviewContainer.appendChild(currentListElement);
                 }
             } else {
                 console.warn(`Review container or templates not found for page ${pageNum}`);
             }
         }

        // --- Update Quizzes ---
        const quizBlocks = pageElement.querySelectorAll('.quiz-container .quiz-block');
        let quizIndex = 1; // Start index from 1 for quiz keys like 'quiz1'

        // Combine easy/challenge quiz keys based on plan structure
        // Example: page1-q1 corresponds to easy.quiz1 and challenge.quiz1
        // Final quiz: page20-q41 corresponds to easy.quiz1 and challenge.quiz1 on page 20 data
        const quizKeyBase = `page${pageNum}-q`;
        const finalQuizBaseKeyOffset = (pageNum === 20) ? 40 : (pageNum - 1) * 3; // Adjust mapping for final quiz

        quizBlocks.forEach((quizBlock, index) => {
            let currentQuizNum;
            if (pageNum === 20) { // Final Quiz Page
                 currentQuizNum = index + 1; // Use index directly (0-7 -> 1-8)
            } else { // Content pages (adjust for pages with fewer quizzes)
                 // Calculate expected question number based on previous pages
                 if (pageNum === 4 || pageNum === 5 || pageNum === 7 || pageNum === 8 || pageNum === 9 || pageNum === 10 || pageNum === 12 || pageNum === 13 || pageNum === 15 || pageNum === 16 || pageNum === 17) {
                     currentQuizNum = (pageNum === 4 ? 10 : pageNum === 5 ? 12 : pageNum === 7 ? 17 : pageNum === 8 ? 19 : pageNum === 9 ? 21 : pageNum === 10 ? 23 : pageNum === 12 ? 28 : pageNum === 13 ? 30 : pageNum === 15 ? 35 : pageNum === 16 ? 37 : 39 ) + index; // 2 questions per page
                 } else {
                     currentQuizNum = ((pageNum - 1) * 3) + index + 1; // 3 questions per page
                 }
                 // Handle final questions mapping
                 if(pageNum === 20) currentQuizNum += 40; // Offset for final quiz
            }


            const quizDataKey = `quiz${pageNum === 20 ? index + 1 : currentQuizNum - finalQuizBaseKeyOffset}`; // Construct key like 'quiz1', 'quiz2' etc.
            const quizData = contentData[quizDataKey];

            if (quizData) { // Show block if quiz data exists, regardless of ID match
                quizBlock.style.display = 'block';
                quizBlock.dataset.quizId = quizData.id; // Update ID to match data
                const questionSegment = quizBlock.querySelector('.quiz-question .translatable-segment');
                if (questionSegment) questionSegment.innerHTML = quizData.question; // Use innerHTML for emojis

                const optionsContainer = quizBlock.querySelector('.quiz-options');
                if (optionsContainer && quizOptionTemplate) {
                    optionsContainer.innerHTML = ''; // Clear existing options
                    quizData.options.forEach(option => {
                        const optionClone = quizOptionTemplate.content.cloneNode(true);
                        const group = optionClone.querySelector('.option-group');
                        const button = optionClone.querySelector('.quiz-option-button');
                        const segment = button.querySelector('.translatable-segment');
                        const ttsButton = optionClone.querySelector('.tts-button');
                        const translateButton = optionClone.querySelector('.translate-button');

                        segment.innerHTML = option.text; // Use innerHTML for emojis
                        if (option.isCorrect) {
                            group.dataset.correct = 'true';
                        }
                        button.onclick = () => handleQuizAnswer(button); // Add click handler

                        // Update aria-labels for accessibility
                        const cleanOptionText = getCleanText(segment);
                        ttsButton.setAttribute('aria-label', `Read option: ${cleanOptionText}`);
                        translateButton.setAttribute('aria-label', `Translate option: ${cleanOptionText}`);

                        optionsContainer.appendChild(optionClone);
                    });
                }
                // Clear feedback area
                 const feedbackSegment = quizBlock.querySelector('.quiz-feedback .translatable-segment');
                 const feedbackWrapper = quizBlock.querySelector('.quiz-feedback');
                 if (feedbackSegment) feedbackSegment.textContent = '';
                 if (feedbackWrapper) { feedbackWrapper.style.display = 'none'; feedbackWrapper.className = 'quiz-feedback'; }

            } else {
                 // If no quiz data found for this block, hide it
                 quizBlock.style.display = 'none';
                 console.log(`Hiding quiz block: No quiz data for JS Key ${quizDataKey}`);
            }
        });

         // Hide difficulty-specific elements NOT matching current difficulty (if any were used)
         // Example: <div data-easy-only>...</div>
         pageElement.querySelectorAll('[data-easy-only]').forEach(el => el.style.display = (currentDifficulty === 'easy') ? (el.tagName === 'UL' || el.tagName === 'DIV' ? 'block' : 'flex') : 'none');
         pageElement.querySelectorAll('[data-challenge-only]').forEach(el => el.style.display = (currentDifficulty === 'challenge') ? (el.tagName === 'UL' || el.tagName === 'DIV' ? 'block' : 'flex') : 'none');
    }


    // --- Navigation ---
    function showPage() {
        if (!difficulty && currentPage > 0) { // Check against page 0 (welcome)
             console.error("Difficulty not set! Returning to welcome screen.");
             difficulty = null; currentPage = 0;
             sessionStorage.removeItem('lessonDifficulty'); sessionStorage.removeItem('lessonCurrentPage');
        }

        stopTTS();
        quizAnsweredState = {}; // Reset page-specific answered state for completion check

        document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active'));

        let pageIdToShow = `page-${currentPage}`;
        let pageToShow = document.getElementById(pageIdToShow);

        if (currentPage === 0) { // Welcome screen
            navigationControls.style.display = 'none';
            scoreAreaContainer.style.display = 'none';
            mainHeaderTitle.textContent = "All About Matter"; // Reset title
        } else if (currentPage === totalPages - 1) { // Finish page (index 21)
             pageIdToShow = `page-${totalPages - 1}`; // Explicitly target finish page ID
             pageToShow = document.getElementById(pageIdToShow);
             navigationControls.style.display = 'flex'; // Show nav but Next should be disabled
            if(pageToShow) updateFinishScreen();
        } else {
            // Content page (1 to totalPages - 2)
            if (pageToShow && difficulty) {
                 injectPageContent(pageToShow, currentPage, difficulty);
                 navigationControls.style.display = 'flex';
                 // Restore activity states if needed (though activities here are simple prompts)
                 if(sessionStorage.getItem(`activity_page${currentPage}_completed`)) {
                     activityCompletedState[currentPage] = true;
                     // Add visual indication if needed (e.g., disable a button)
                 }

            } else if (!difficulty) {
                 // This case should be prevented by the initial check, but as a fallback:
                 console.error("Difficulty not selected, cannot show content page. Recovering to page 0.");
                 currentPage = 0; pageIdToShow = 'page-0'; pageToShow = document.getElementById(pageIdToShow);
                 navigationControls.style.display = 'none'; scoreAreaContainer.style.display = 'none';
            }
        }

        if (pageToShow) {
            pageToShow.classList.add('active');
            // Update header title based on data-title attribute
            mainHeaderTitle.textContent = pageToShow.dataset.title || "All About Matter";
            lessonContainer.scrollTop = 0; // Scroll content area to top
            window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll window to top
            if (currentPage > 0 && currentPage < totalPages - 1) { // Don't restore quiz states on welcome/finish
                 restoreQuizStatesForPage(pageToShow); // Restore states *after* content injection
            }
            updateNavigationButtons(); // Update nav button states
        } else {
            console.error(`Page structure not found: ${pageIdToShow}. Resetting.`);
            currentPage = 0; difficulty = null;
            sessionStorage.removeItem('lessonDifficulty'); sessionStorage.removeItem('lessonCurrentPage');
            sessionStorage.removeItem('lessonScore'); // Also clear score on error
            showPage(); // Attempt to recover to page 0
        }
    }

    function nextPage() {
        const allowNext = checkCompletion();

        if (currentPage < totalPages - 1 && allowNext) { // Stop before finish page index
            currentPage++;
            sessionStorage.setItem('lessonCurrentPage', currentPage);
            showPage();
        } else if (!allowNext) {
             console.warn("Next button clicked, but page not complete.");
             // Optional user feedback: alert('Please answer all questions on this page first.');
        }
    }

    function prevPage() {
        stopTTS();
        if (currentPage > 0) { // Can go back from page 1 to 0
            currentPage--;
            sessionStorage.setItem('lessonCurrentPage', currentPage);
             if (currentPage === 0) { // If returning to welcome page
                difficulty = null;
                sessionStorage.removeItem('lessonDifficulty'); // Clear difficulty if going back to selection
             }
            showPage();
        }
    }

function updateNavigationButtons() {
     backButton.disabled = (currentPage <= 0); // Disable back on page 0

     const isComplete = checkCompletion(); // Check if current page requirements are met

     // Disable 'Next' if on the very last page OR if the current page is not complete
     const isLastPage = currentPage >= totalPages - 1;
     nextButton.disabled = isLastPage || !isComplete;

     // Set tooltip title for the Next button
     nextButton.title = nextButton.disabled
                           ? (isLastPage ? "End of lesson" : "Please answer all required questions first")
                           : "Go to the next page";

     console.log(`Nav Update: Page ${currentPage}, Complete: ${isComplete}, LastPage: ${isLastPage}, Next Disabled: ${nextButton.disabled}`);
}


    // --- Quiz Handling ---
    function handleQuizAnswer(button) {
        const optionGroup = button.closest('.option-group');
        const quizBlock = button.closest('.quiz-block');
        if (!optionGroup || !quizBlock || !button.classList.contains('quiz-option-button')) return;

        const quizId = quizBlock.dataset.quizId;
        // Ignore if no valid ID or if already answered (in session storage)
        if (!quizId || quizId.endsWith('-nodata') || sessionStorage.getItem(quizId + '_answered')) {
            if (sessionStorage.getItem(quizId + '_answered')) console.log(`Quiz ${quizId} already answered.`);
            else console.warn("Invalid quiz ID or attempt to answer non-quiz block:", quizBlock);
            return;
        }

        stopTTS(); // Stop any ongoing speech
        quizBlock.classList.add('answered');
        quizAnsweredState[quizId] = true; // Mark answered for this page load (for completion check)
        sessionStorage.setItem(quizId + '_answered', 'true'); // Mark persistently in session storage

        const isCorrect = optionGroup.dataset.correct === 'true';
        console.log("Quiz:", quizId, "Selected option correct:", isCorrect);
        const feedbackElement = quizBlock.querySelector('.quiz-feedback');
        const feedbackSegment = feedbackElement ? feedbackElement.querySelector('.translatable-segment') : null;

        // Disable all options in this block
        quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => btn.disabled = true);

        if (isCorrect) {
            button.classList.add('correct');
            // Only increment score if it hasn't been scored before (checked by sessionStorage above)
            let score = parseInt(sessionStorage.getItem('lessonScore') || '0');
            score++;
            sessionStorage.setItem('lessonScore', score);
            currentScore = score; // Update global variable
            updateScoreDisplay(); // Update UI
            showPlusOne(button); // Show +1 animation
            if (feedbackSegment) feedbackSegment.textContent = "Correct! 🎉";
            if (feedbackElement) feedbackElement.className = 'quiz-feedback correct'; // Apply green style
        } else {
            button.classList.add('incorrect'); // Mark selected as incorrect
            // Highlight the correct answer
            const correctOptionBtn = quizBlock.querySelector('.option-group[data-correct="true"] .quiz-option-button');
            if (correctOptionBtn) correctOptionBtn.classList.add('correct');
            if (feedbackSegment) feedbackSegment.textContent = "Not quite. The correct answer is highlighted green.";
            if (feedbackElement) feedbackElement.className = 'quiz-feedback incorrect'; // Apply red style
        }

        if(feedbackElement) feedbackElement.style.display = 'flex'; // Show feedback

        updateNavigationButtons(); // Re-check completion status to enable Next button
    }

     function updateScoreDisplay() {
        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        if (scoreDisplay) scoreDisplay.textContent = currentScore;
        if (finalScoreDisplay) finalScoreDisplay.textContent = currentScore;
        if (totalPossibleScoreDisplay) totalPossibleScoreDisplay.textContent = totalQuizzes; // Use the constant
    }

    function updateFinishScreen() {
        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        if (finalScoreDisplay) finalScoreDisplay.textContent = currentScore;
        if (totalPossibleScoreDisplay) totalPossibleScoreDisplay.textContent = totalQuizzes; // Use the constant

        const savedDifficulty = sessionStorage.getItem('lessonDifficulty');
        // Update finish screen messages based on difficulty (optional)
        if (finishTitle && finishSubtitle && finishEncouragement) {
             if (savedDifficulty === 'easy') {
                 finishTitle.innerHTML = "🎉 All Done! 🥳";
                 finishSubtitle.textContent = "Good job learning about matter!";
                 finishEncouragement.innerHTML = "Keep exploring the amazing world of science! <span aria-hidden='true'>✨👍</span>";
             } else { // challenge
                 finishTitle.innerHTML = "🏆 Matter Unit Complete!";
                 finishSubtitle.textContent = "Excellent work understanding the concepts of matter!";
                 finishEncouragement.innerHTML = "Keep questioning and discovering! <span aria-hidden='true'>🧠✨</span>";
             }
        }
    }

     // --- Activity Handling (Placeholders/Simplified for this unit) ---
     // This unit's activities are prompts, not interactive drag/drop.
     // We mark them complete implicitly when the user moves past the page.
     // A more complex activity would need functions like setupMolluskSortActivity etc.

     // --- Function to restore state on load ---
    function initializeLesson() {
        const savedDifficulty = sessionStorage.getItem('lessonDifficulty');
        const savedPage = parseInt(sessionStorage.getItem('lessonCurrentPage') || '0');

        // Basic validation: if page is invalid or difficulty missing when needed, reset.
        if (savedPage < 0 || savedPage >= totalPages || (!savedDifficulty && savedPage > 0)) {
             console.warn("Inconsistent state found, resetting.");
             resetProgress(); // This will reload the page after clearing storage
             return; // Stop further execution
        }

        if (savedDifficulty && savedPage > 0) {
            difficulty = savedDifficulty;
            currentPage = savedPage;
            scoreAreaContainer.style.display = 'block'; // Show score area
            navigationControls.style.display = 'flex'; // Show navigation
        } else {
            // Starting fresh or returned to page 0
            currentPage = 0;
            difficulty = null;
            scoreAreaContainer.style.display = 'none';
            navigationControls.style.display = 'none';
        }

        currentScore = parseInt(sessionStorage.getItem('lessonScore') || '0');
        updateScoreDisplay();

        // Restore TTS speed
        const savedSpeed = sessionStorage.getItem('ttsSpeed') || '1';
        ttsSpeedSlider.value = savedSpeed;
        speedValueDisplay.textContent = parseFloat(savedSpeed).toFixed(1) + 'x';

        // Restore activity states (though simple here)
         for (let i = 1; i < totalPages -1; i++) { // Check potential activity pages
             if (sessionStorage.getItem(`activity_page${i}_completed`)) {
                 activityCompletedState[i] = true;
             }
         }

        showPage(); // Display the correct page and inject content
    }

     // --- Restore Quiz States for the CURRENTLY VISIBLE page ---
    function restoreQuizStatesForPage(pageElement) {
         if (!pageElement) return;
         pageElement.querySelectorAll('.quiz-container .quiz-block').forEach(quizBlock => {
             const quizId = quizBlock.dataset.quizId;
             const isVisible = window.getComputedStyle(quizBlock).display !== 'none';

             // Skip if not visible, no ID, or placeholder ID
             if (!isVisible || !quizId || quizId.endsWith('-nodata')) {
                 return;
             }

            // Check session storage for the answered state
            if (sessionStorage.getItem(quizId + '_answered')) {
                quizBlock.classList.add('answered');
                quizAnsweredState[quizId] = true; // Ensure page state reflects stored state
                quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => {
                    btn.disabled = true; // Disable buttons
                    // Re-apply correct class to the correct option
                    const optionGroup = btn.closest('.option-group');
                    if (optionGroup && optionGroup.dataset.correct === 'true') {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.remove('correct', 'incorrect'); // Ensure others are neutral looking
                    }
                });
                const feedbackElement = quizBlock.querySelector('.quiz-feedback');
                if (feedbackElement) feedbackElement.style.display = 'none'; // Hide feedback on restore

            } else {
                 // If not answered in storage, ensure it's visually reset
                 quizBlock.classList.remove('answered');
                 quizAnsweredState[quizId] = false; // Ensure page state is false
                 quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => {
                      btn.disabled = false; // Ensure buttons are enabled
                      btn.classList.remove('correct', 'incorrect'); // Clear styling
                  });
                 const feedbackElement = quizBlock.querySelector('.quiz-feedback');
                 if (feedbackElement) feedbackElement.style.display = 'none'; // Ensure feedback is hidden
             }
         });
         // Update nav buttons AFTER checking all blocks on the page
         updateNavigationButtons();
     }

    // --- Function to check if all VISIBLE quizzes on the CURRENT page are complete ---
    function checkCompletion() {
         const activePage = document.querySelector('.page-content.active');
         if (!activePage) return false; // Should not happen

         // Pages that are always complete (Welcome, Finish, Review Pages)
         if (currentPage === 0 || currentPage === totalPages - 1 || currentPage === 18 || currentPage === 19) {
             console.log(`Page ${currentPage} completion check: true (Welcome/Finish/Review page)`);
             return true;
         }

         // Check for Activities (simplified for this unit - treat activity pages as complete once visited)
         // Pages 5, 7, 9, 12 have activity prompts
         if ([5, 7, 9, 12].includes(currentPage)) {
            // For this unit, just visiting the page with the prompt is enough.
            // A real activity would check activityCompletedState[currentPage]
            console.log(`Page ${currentPage} completion check: true (Activity prompt page visited)`);
            // Mark as complete in session storage if not already, so nav stays enabled on revisit
            if (!sessionStorage.getItem(`activity_page${currentPage}_completed`)) {
                sessionStorage.setItem(`activity_page${currentPage}_completed`, 'true');
                activityCompletedState[currentPage] = true;
            }
            return true;
         }

        // --- Quiz Checking Logic ---
        const quizBlocksOnPage = activePage.querySelectorAll('.quiz-container .quiz-block');
        let allRequiredAnswered = true;
        let requiredQuizFound = false;

        quizBlocksOnPage.forEach(block => {
            const quizId = block.dataset.quizId;
            const isVisible = window.getComputedStyle(block).display !== 'none';

            // Only check visible, valid quiz blocks
            if (isVisible && quizId && !quizId.endsWith('-nodata')) {
                 requiredQuizFound = true; // Found at least one quiz to check
                 // Check if this specific quiz is answered in session storage
                 if (!sessionStorage.getItem(quizId + '_answered')) {
                     allRequiredAnswered = false;
                     console.log(`Page ${currentPage} completion check: Required quiz ${quizId} is NOT answered.`);
                     // No need to break, let it log all missing ones if needed for debugging
                 }
           }
       });

             if (!requiredQuizFound) {
                 console.log(`Page ${currentPage} completion check: true (No required quizzes found)`);
                 return true;
             }
             return allRequiredAnswered;

        console.log(`Page ${currentPage} final completion check result: ${allRequiredAnswered}`);
        return allRequiredAnswered;
     }

    // --- Utility to reset progress ---
    function resetProgress() {
        console.log('Resetting lesson progress...');
        stopTTS(); // Stop any speech
        // Clear session storage items
        sessionStorage.removeItem('lessonDifficulty');
        sessionStorage.removeItem('lessonCurrentPage');
        sessionStorage.removeItem('lessonScore');
        sessionStorage.removeItem('ttsSpeed'); // Also clear speed setting

        // Clear all quiz answered flags based on planned IDs
        for (let p = 1; p <= 20; p++) { // Pages 1 to 20 have quizzes
             let quizzesPerPage = 3; // Default
             if ([4, 5, 7, 8, 9, 10, 12, 13, 15, 16, 17].includes(p)) quizzesPerPage = 2;
             if (p === 20) quizzesPerPage = 8; // Final quiz page

             let baseQuestionNum;
             if (p === 1) baseQuestionNum = 1;
             else if (p === 2) baseQuestionNum = 4;
             else if (p === 3) baseQuestionNum = 7;
             else if (p === 4) baseQuestionNum = 10;
             else if (p === 5) baseQuestionNum = 12;
             else if (p === 6) baseQuestionNum = 14;
             else if (p === 7) baseQuestionNum = 17;
             else if (p === 8) baseQuestionNum = 19;
             else if (p === 9) baseQuestionNum = 21;
             else if (p === 10) baseQuestionNum = 23;
             else if (p === 11) baseQuestionNum = 25;
             else if (p === 12) baseQuestionNum = 28;
             else if (p === 13) baseQuestionNum = 30;
             else if (p === 14) baseQuestionNum = 32;
             else if (p === 15) baseQuestionNum = 35;
             else if (p === 16) baseQuestionNum = 37;
             else if (p === 17) baseQuestionNum = 39;
             else if (p === 20) baseQuestionNum = 41; // Final quiz starts at 41


             for (let q = 0; q < quizzesPerPage; q++) {
                 const questionNum = baseQuestionNum + q;
                 const quizId = `page${p}-q${questionNum}`;
                 sessionStorage.removeItem(quizId + '_answered');
             }
             // Clear activity flags for relevant pages
              if ([5, 7, 9, 12].includes(p)) {
                  sessionStorage.removeItem(`activity_page${p}_completed`);
              }
        }

        // Reset local variables (although reload handles this)
        difficulty = null;
        currentPage = 0;
        currentScore = 0;
        quizAnsweredState = {};
        activityCompletedState = {};

        // Reload the page to start fresh from the welcome screen
        window.location.reload();
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', function() {
        initializeLesson(); // Set up the lesson based on stored state or defaults

        // TTS Speed Control
        ttsSpeedSlider.addEventListener('input', function() {
            const speed = parseFloat(this.value).toFixed(1);
            speedValueDisplay.textContent = speed + 'x';
            sessionStorage.setItem('ttsSpeed', speed);
            // If speech is playing, stop it so the new speed applies next time
            if (currentUtterance && synth.speaking) {
                stopTTS();
            }
        });

        // TTS Stop Button
        ttsStopButton.addEventListener('click', stopTTS);

        // Delegated Click Listener for Quiz Answers (using the main container)
        lessonContainer.addEventListener('click', (event) => {
            const target = event.target;
            const clickedQuizButton = target.closest('.quiz-option-button');

            // Check if the click was on a quiz option button AND it's not disabled
            if (clickedQuizButton && !clickedQuizButton.disabled) {
                 // Prevent icons inside the button from triggering the answer logic
                 const clickedDirectlyOnIcon = target.closest('.option-icons button');
                 if (!clickedDirectlyOnIcon) {
                     handleQuizAnswer(clickedQuizButton);
                 }
            }

            // Add handlers for other interactive elements if needed (e.g., activity check buttons)
            // if (target.matches('#some-activity-button')) { checkSomeActivity(); }
        });

        // Delegated Double Click Listener for Word Translation
        lessonContainer.addEventListener('dblclick', handleDoubleClick);

    }); // End DOMContentLoaded

    // Stop speech synthesis when the user leaves the page
    window.addEventListener('beforeunload', stopTTS);

</script>

</body>
</html>