<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Vertebrates Lesson</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Variables --- */
        :root {
            --font-primary: 'Poppins', sans-serif;
            --color-primary: #007bff; /* Blue */
            --color-secondary: #6c757d; /* Gray */
            --color-accent-success: #28a745; /* Green */
            --color-accent-success-light: #d4edda;
            --color-accent-error: #dc3545; /* Red */
            --color-accent-error-light: #f8d7da;
            --color-accent-highlight: #ffeeba; /* Yellow for TTS */
            --color-text-primary: #212529;
            --color-text-secondary: #495057;
            --color-text-light: #ffffff;
            --color-background: #f8f9fa;
            --color-container-bg: #ffffff;
            --color-border: #dee2e6;
            --shadow-main: 0 4px 15px rgba(0, 0, 0, 0.1);
            --border-radius-main: 15px;
            --border-radius-small: 8px;

            --font-size-h1: 2.2rem;
            --font-size-h2: 1.8rem;
            --font-size-h3: 1.4rem;
            --font-size-p: 1rem;
            --font-size-li: 1rem;
            --font-size-button: 1rem;
            --font-size-small: 0.85rem;

            --line-height-base: 1.6;
        }

        /* --- Base Styles --- */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--color-background);
            color: var(--color-text-primary);
            line-height: var(--line-height-base);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top */
            min-height: 100vh;
        }

        /* --- Main Container --- */
        #lesson-container {
            background-color: var(--color-container-bg);
            border-radius: var(--border-radius-main);
            box-shadow: var(--shadow-main);
            padding: 30px 40px;
            max-width: 900px;
            width: 100%;
            position: relative; /* Needed for absolute positioned elements like +1 */
            overflow: hidden; /* Contain children during transitions */
            border: 1px solid var(--color-border);
        }

        /* --- Section Styling --- */
        .lesson-section {
            display: none; /* Hidden by default */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            margin-bottom: 20px; /* Space before nav buttons */
        }

        .lesson-section.active {
            display: block;
            opacity: 1;
        }

        /* --- Typography --- */
        h1, h2, h3 {
            color: var(--color-primary);
            margin-bottom: 1em;
            font-weight: 700;
        }
        h1 { font-size: var(--font-size-h1); }
        h2 { font-size: var(--font-size-h2); color: var(--color-secondary); font-weight: 600; }
        h3 { font-size: var(--font-size-h3); color: var(--color-secondary); font-weight: 600; margin-top: 1.5em; }
        p { font-size: var(--font-size-p); margin-bottom: 1em; color: var(--color-text-secondary); }
        ul { list-style-position: inside; padding-left: 10px; margin-bottom: 1em; }
        li { font-size: var(--font-size-li); margin-bottom: 0.5em; color: var(--color-text-secondary); }
        strong { font-weight: 600; }
        code { background-color: #e9ecef; padding: 0.2em 0.4em; border-radius: var(--border-radius-small); font-size: 0.9em; }

        /* --- Emojis/Icons --- */
        /* Removed specific styling as emojis are handled in JS now */
        /* .translatable-segment > [aria-hidden="true"] {
             margin-right: 0.3em;
             vertical-align: middle;
        } */

        /* --- Buttons --- */
        button {
            font-family: var(--font-primary);
            cursor: pointer;
            border: none;
            border-radius: var(--border-radius-small);
            padding: 10px 15px;
            font-size: var(--font-size-button);
            transition: background-color 0.2s ease, transform 0.1s ease;
            background-color: var(--color-secondary);
            color: var(--color-text-light);
        }
        button:hover:not(:disabled) {
            opacity: 0.9;
        }
        button:active:not(:disabled) {
            transform: scale(0.98);
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-nav {
            background-color: var(--color-primary);
            padding: 12px 25px;
            font-weight: 600;
            min-width: 120px; /* Ensure consistent width */
        }
        #prev-button {
            background-color: var(--color-secondary);
        }

        .btn-choice {
            background-color: var(--color-accent-success);
            padding: 15px 30px;
            font-size: 1.1rem;
            margin: 10px;
        }
        #challenge-btn {
             background-color: #ffc107; /* Yellow for challenge */
             color: var(--color-text-primary);
        }

        /* --- Navigation --- */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
            margin-top: 30px;
        }

        /* --- TTS/Translate --- */
        .tts-translate-wrapper {
            display: inline-flex; /* Keep buttons close to text */
            align-items: center;
            margin-left: 5px; /* Space between text and buttons */
            vertical-align: middle; /* Align with text */
        }

        .tts-button, .translate-button {
            background-color: transparent;
            color: var(--color-secondary);
            padding: 2px 4px;
            font-size: 1.2rem; /* Larger icon size */
            line-height: 1;
            border-radius: 50%; /* Make circular */
            width: 30px;
            height: 30px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin-left: 3px; /* Space between TTS and Translate */
        }
        .tts-button:hover, .translate-button:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        /* Embedded icons within other buttons (like quiz options) */
        .button-content {
            display: inline-flex;
            align-items: center;
            gap: 8px; /* Space between text and icons */
        }
         .button-icons { /* This class is still used for icons INSIDE quiz buttons, NOT nav buttons */
             display: inline-flex;
             align-items: center;
         }
        .embedded-icon {
             color: inherit; /* Use parent button color */
             background-color: transparent;
             padding: 0;
             font-size: 1em; /* Match parent font size */
             width: auto;
             height: auto;
             border-radius: 0;
             margin-left: 2px; /* Small space between embedded icons */
         }
         .embedded-icon:hover {
             background-color: rgba(255, 255, 255, 0.2); /* Slight highlight on hover */
         }


        .translatable-segment.highlight {
            background-color: var(--color-accent-highlight);
            border-radius: var(--border-radius-small);
            padding: 0 0.2em; /* Slight padding for highlight */
            box-decoration-break: clone; /* Handle line breaks */
            -webkit-box-decoration-break: clone;
        }

        .tts-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--color-border);
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }
        .tts-controls label {
            font-size: var(--font-size-small);
            color: var(--color-text-secondary);
        }
        #tts-speed {
            cursor: pointer;
        }
        #stop-tts-button {
            background-color: var(--color-accent-error);
            color: var(--color-text-light);
            font-size: 1.3rem;
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin-left: auto; /* Push to the right */
        }

        /* --- Quizzes --- */
        .quiz-container {
            background-color: #f1f3f5; /* Light grey background */
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-main);
            padding: 20px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        .quiz-block {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--color-border);
        }
        .quiz-block:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        .quiz-question {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--color-text-primary);
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option-group {
            display: flex;
            align-items: center;
            gap: 10px; /* Space between button and its TTS/Translate */
        }
        .quiz-option-button {
            flex-grow: 1; /* Button takes available space */
            text-align: left;
            background-color: var(--color-container-bg);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            display: flex; /* To align content within */
            justify-content: space-between; /* Push icons to the right if embedded */
            align-items: center;
        }

        /* Ensure embedded icons in quiz buttons still work */
        .quiz-option-button .button-icons {
             margin-left: auto; /* Push embedded icons to the far right */
        }

        .quiz-option-button .tts-translate-wrapper {
             /* This wrapper shouldn't be directly inside quiz buttons if using embedded icons */
             /* Adjust if your structure differs */
             margin-left: auto;
        }
        .quiz-option-button .tts-button,
        .quiz-option-button .translate-button {
            font-size: 1rem; /* Slightly smaller icons in options */
             width: 24px;
             height: 24px;
        }

        /* Quiz Feedback States */
        .quiz-block.answered .quiz-option-button:not(.correct):not(.incorrect) {
           opacity: 0.7; /* Dim unanswered options slightly */
           /* Keep cursor default if needed */
        }
         .quiz-block.answered .quiz-option-button {
             cursor: default;
         }

        .quiz-option-button.correct {
            background-color: var(--color-accent-success-light);
            border-color: var(--color-accent-success);
            color: var(--color-accent-success);
            font-weight: 600;
            animation: bounceCorrect 0.5s ease;
        }
        .quiz-option-button.incorrect {
            background-color: var(--color-accent-error-light);
            border-color: var(--color-accent-error);
            color: var(--color-accent-error);
            animation: shakeIncorrect 0.5s ease;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: var(--border-radius-small);
            font-size: var(--font-size-small);
            display: none; /* Hidden initially */
        }
        .quiz-feedback.correct {
            background-color: var(--color-accent-success-light);
            color: var(--color-accent-success);
            border: 1px solid var(--color-accent-success);
            display: block;
        }
        .quiz-feedback.incorrect {
            background-color: var(--color-accent-error-light);
            color: var(--color-accent-error);
            border: 1px solid var(--color-accent-error);
            display: block;
        }
         .quiz-feedback .translatable-segment {
             display: inline; /* Allow feedback text and buttons to flow */
         }

        @keyframes bounceCorrect {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes shakeIncorrect {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* --- Gamification --- */
        .plus-one-effect {
            position: absolute;
            font-size: 1.5rem;
            color: var(--color-accent-success);
            font-weight: bold;
            opacity: 0;
            animation: plusOneAnim 1s ease-out forwards;
            pointer-events: none; /* Don't interfere with clicks */
            z-index: 100;
        }
        @keyframes plusOneAnim {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        #high-score-list {
            list-style-type: none;
            padding-left: 0;
            margin-top: 20px;
        }
        #high-score-list li {
            background-color: #f1f3f5;
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: var(--border-radius-small);
            font-size: var(--font-size-small);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
         #high-score-list li .score-name { font-weight: 600; }
         #high-score-list li .score-value { font-weight: bold; }
         #high-score-list li .score-rank { margin-right: 10px; font-style: italic; color: var(--color-secondary); }
         #high-score-list li .score-emoji { margin-right: 8px; font-size: 1.1em; }

        /* --- Results Screen --- */
        #section-final h1 { text-align: center; }
        #final-score-display {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: var(--color-primary);
        }
        #results-message { text-align: center; font-size: 1.1rem; }
        #play-again-button {
            display: block;
            margin: 30px auto 0;
            background-color: var(--color-accent-success);
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            body { padding: 10px; }
            #lesson-container { padding: 20px; }

            :root {
                --font-size-h1: 1.8rem;
                --font-size-h2: 1.5rem;
                --font-size-h3: 1.2rem;
                --font-size-p: 0.95rem;
                --font-size-li: 0.95rem;
                --font-size-button: 0.9rem;
            }

            .navigation-buttons { flex-direction: column; gap: 10px; }
            .btn-nav { width: 100%; }
            .tts-controls { gap: 10px; }
            #stop-tts-button { margin-left: 0; /* Don't push right on small screens */ }
            .option-group { flex-direction: column; align-items: stretch; gap: 5px; }
            /* Ensure embedded quiz icons don't break layout */
            .quiz-option-button .button-icons { margin-left: 5px; }
        }

        @media (max-width: 480px) {
             :root {
                --font-size-h1: 1.6rem;
                --font-size-h2: 1.3rem;
                --font-size-h3: 1.1rem;
                --font-size-p: 0.9rem;
                --font-size-li: 0.9rem;
            }
            #lesson-container { padding: 15px; }
             .tts-controls { justify-content: center; }
             .btn-choice { padding: 12px 20px; font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div id="lesson-container">

        <!-- Global TTS Controls -->
        <div class="tts-controls">
            <label for="tts-speed">Speech Speed:</label>
            <input type="range" id="tts-speed" min="0.5" max="2" value="1" step="0.1">
            <button id="stop-tts-button" aria-label="Stop Speech">⏹️</button>
        </div>

        <!-- Lesson Sections -->
        <div id="section-0" class="lesson-section active">
             <!-- *** CHANGE: Replaced "Welcome Text" with actual content *** -->
    <!-- Main Welcome Heading -->
    <h1>
        <span class="translatable-segment" data-easy="👋 Welcome to the Vertebrates Lesson!" data-challenge="👋 Welcome to the Vertebrates Lesson!">👋 Welcome to the Vertebrates Lesson!</span>
        <span class="tts-translate-wrapper">
            <button class="tts-button" aria-label="Read welcome title">🔊</button>
            <button class="translate-button" aria-label="Translate welcome title">🌐</button>
        </span>
    </h1>

    <!-- Subsequent Lines as Paragraphs -->
    <p>
        <span class="translatable-segment" data-easy="Learn about animals with backbones!" data-challenge="Learn about animals with backbones!">Learn about animals with backbones!</span>
        <span class="tts-translate-wrapper">
            <button class="tts-button" aria-label="Read sentence 2">🔊</button>
            <button class="translate-button" aria-label="Translate sentence 2">🌐</button>
        </span>
    </p>
    <p>
        <span class="translatable-segment" data-easy="Choose how you want to learn today." data-challenge="Choose how you want to learn today.">Choose how you want to learn today.</span>
        <span class="tts-translate-wrapper">
            <button class="tts-button" aria-label="Read sentence 3">🔊</button>
            <button class="translate-button" aria-label="Translate sentence 3">🌐</button>
        </span>
    </p>
             <div style="text-align: center; margin-top: 30px;">
                 <button id="easy-btn" class="btn-choice">Easy English</button>
                 <button id="challenge-btn" class="btn-choice">Challenge English</button>
             </div>
        </div>

        <!-- Section 1: What is a Vertebrate? -->
        <div id="section-1" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🦴 What is a Vertebrate?" data-challenge="🦴 Defining Vertebrates.">Section Title</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read section title">🔊</button><button class="translate-button" aria-label="Translate section title">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="A vertebrate is an animal with a backbone." data-challenge="Vertebrates are animals with a backbone.">Sentence 1</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 1">🔊</button><button class="translate-button" aria-label="Translate sentence 1">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Look inside your back! Feel your backbone?" data-challenge="Another name for the backbone is the <code>vertebral column</code> (ver-TEE-brul COL-um).">Sentence 2</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 2">🔊</button><button class="translate-button" aria-label="Translate sentence 2">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="It helps you stand tall! 🧍" data-challenge="It protects the spinal cord, which is like a bundle of important nerves.">Sentence 3</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 3">🔊</button><button class="translate-button" aria-label="Translate sentence 3">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Many animals you know are vertebrates." data-challenge="This skeleton inside the body gives support and shape.">Sentence 4</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 4">🔊</button><button class="translate-button" aria-label="Translate sentence 4">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Humans, dogs, birds, fish, and snakes are examples.">Sentence 5</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 5">🔊</button><button class="translate-button" aria-label="Translate sentence 5">🌐</button></span></p>

            <!-- Quiz Container -->
            <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="1-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What helps a vertebrate stand tall?" data-challenge="The main job of the backbone (vertebral column) is to...?">Q1 Text</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read question 1">🔊</button><button class="translate-button" aria-label="Translate question 1">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group" data-correct="true">
                            <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="A backbone" data-challenge="Protect the spinal cord">Opt 1A Correct</span>
                                    <!-- Embedded icons remain for quiz options -->
                                    <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option A"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option A"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                        <div class="option-group">
                            <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="Legs" data-challenge="Help digest food">Opt 1B</span>
                                     <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option B"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option B"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                         <div class="option-group">
                            <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="A head" data-challenge="Keep the animal warm">Opt 1C</span>
                                     <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option C"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option C"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback 1</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read feedback">🔊</button><button class="translate-button" aria-label="Translate feedback">🌐</button></span></div>
                </div>

                <div class="quiz-block" data-quiz-id="1-2">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Is the backbone inside or outside?" data-challenge="Which of these is NOT a vertebrate?">Q2 Text</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read question 2">🔊</button><button class="translate-button" aria-label="Translate question 2">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group" data-correct="true">
                            <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="Inside" data-challenge="Spider">Opt 2A Correct</span>
                                    <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option A"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option A"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                        <div class="option-group">
                             <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="Outside" data-challenge="Fish">Opt 2B</span>
                                     <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option B"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option B"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                         <div class="option-group">
                            <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="Sometimes inside" data-challenge="Human">Opt 2C</span>
                                     <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option C"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option C"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback 2</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read feedback">🔊</button><button class="translate-button" aria-label="Translate feedback">🌐</button></span></div>
                </div>
            </div> <!-- End Quiz Container -->
        </div>

        <!-- Section 2: The 5 Kinds -->
         <div id="section-2" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🖐️ 5 Kinds of Vertebrates" data-challenge="🖐️ The Five Classes of Vertebrates">Section Title</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read section title">🔊</button><button class="translate-button" aria-label="Translate section title">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="There are 5 main groups (kinds) of vertebrates: Mammals 🦁, Fish 🐠, Amphibians 🐸, Reptiles 🐍, Birds 🐦." data-challenge="Scientists group vertebrates into 5 main classes (types) based on things they share: Mammalia (Mammals) 🦁, Pisces (Fish) 🐠, Amphibia (Amphibians) 🐸, Reptilia (Reptiles) 🐍, Aves (Birds) 🐦.">Sentence 1</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 1">🔊</button><button class="translate-button" aria-label="Translate sentence 1">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="They all have backbones, but they are different in many ways!" data-challenge="Let's learn what makes each class special.">Sentence 2</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 2">🔊</button><button class="translate-button" aria-label="Translate sentence 2">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Let's learn about each group." data-challenge="">Sentence 3</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read sentence 3">🔊</button><button class="translate-button" aria-label="Translate sentence 3">🌐</button></span></p>

             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="2-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="How many main groups of vertebrates are there?" data-challenge="Which is NOT one of the 5 main classes of vertebrates?">Q1 Text</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read question 1">🔊</button><button class="translate-button" aria-label="Translate question 1">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group">
                             <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="3" data-challenge="Mammalia">Opt 1A</span>
                                    <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option A"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option A"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                        <div class="option-group" data-correct="true">
                             <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="5" data-challenge="Insects">Opt 1B Correct</span>
                                    <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option B"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option B"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                        <div class="option-group">
                             <button class="quiz-option-button">
                                <span class="button-content">
                                    <span class="translatable-segment" data-easy="8" data-challenge="Aves">Opt 1C</span>
                                    <span class="button-icons">
                                         <button class="tts-button embedded-icon" aria-label="Read option C"><span aria-hidden="true">🔊</span></button>
                                         <button class="translate-button embedded-icon" aria-label="Translate option C"><span aria-hidden="true">🌐</span></button>
                                    </span>
                                </span>
                            </button>
                        </div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback 1</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read feedback">🔊</button><button class="translate-button" aria-label="Translate feedback">🌐</button></span></div>
                </div>
             </div>
        </div>

        <!-- Add ALL other sections (3-25) here following the same pattern -->
        <!-- ... Mammals Intro (Section 3 / Page 4) ... -->
        <div id="section-3" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🦁 Group 1: Mammals" data-challenge="🦁 Class: Mammalia (Mammals)">Sec 3 Title</span><span class="tts-translate-wrapper"><button class="tts-button" aria-label="Read section title">🔊</button><button class="translate-button" aria-label="Translate section title">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Mammals are vertebrates, like us! Most live on land." data-challenge="Mammals are different kinds of vertebrates.">Sec 3 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <!-- This paragraph (Sec 3 S2) is the one circled in purple. It has TTS/Translate buttons for the whole span. -->
            <p><span class="translatable-segment" data-easy="What makes a mammal special? They are warm-blooded, breathe air with lungs, have hair or fur, feed babies milk 🥛, and most have live babies." data-challenge="Special things about them are: They are <code>Endothermic</code> (en-doh-THER-mic), which means warm-blooded.">Sec 3 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They breathe air using lungs.">Sec 3 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They have hair or fur.">Sec 3 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Most have live babies (this is called <code>Viviparous</code> - vi-VIP-uh-rus).">Sec 3 S5 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Mothers feed milk to their young (this is called <code>Lactation</code> - lack-TAY-shun). 🥛">Sec 3 S6 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="3-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What do mammals use to breathe air?" data-challenge="Which term describes mammals giving live birth?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Gills" data-challenge="Oviparous">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Lungs" data-challenge="Viviparous">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Skin" data-challenge="Endothermic">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... [Rest of the sections 4 through 24 remain unchanged structurally, but will benefit from the emoji-skipping TTS] ... -->
        <!-- Section 4 to 24 -->
        <!-- ... Mammal Feature - Warm-blooded (Section 4 / Page 5) ... -->
        <div id="section-4" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🌡️ Mammals are Warm-Blooded" data-challenge="🌡️ Mammals: Endothermic (Warm-blooded)">Sec 4 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="This means their body stays the same warm temperature inside, even if it's cold or hot outside!" data-challenge="Being endothermic means mammals can control their inside body temperature.">Sec 4 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Think about you: you stay warm!" data-challenge="Their body stays warm, even if it's cold outside.">Sec 4 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="When you get too hot, you sweat 🥵." data-challenge="Think about you: your body stays warm.">Sec 4 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="When you get too cold, you shiver 🥶!" data-challenge="Sweating helps cool down, and shivering helps warm up.">Sec 4 S4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Mammals don't depend on the outside weather to be warm.">Sec 4 S5 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="4-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What does your body do when it's too hot?" data-challenge="Endothermy allows mammals to...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Shiver" data-challenge="Breathe water">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Sweat" data-challenge="Keep their body temperature stable">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Get fur" data-challenge="Change color">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Mammal Feature - Lungs (Section 5 / Page 6) ... -->
        <div id="section-5" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="😮 Mammals Breathe with Lungs" data-challenge="😮 Mammals: Breathing with Lungs">Sec 5 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="All mammals, even whales in the ocean, need to breathe air!" data-challenge="Mammals use lungs to breathe air.">Sec 5 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="They use lungs inside their body to take oxygen from the air." data-challenge="Lungs take in oxygen the body needs and let out waste gas (carbon dioxide).">Sec 5 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Take a deep breath - you are using your lungs!" data-challenge="Even mammals that live in water, like whales and dolphins, must come to the surface to breathe air with their lungs.">Sec 5 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="5-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Do mammals breathe air or water?" data-challenge="Even mammals living in water, like whales, breathe using...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Air" data-challenge="Lungs">Opt A Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Water" data-challenge="Gills">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Both" data-challenge="Skin">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Mammal Feature - Hair/Fur (Section 6 / Page 7) ... -->
        <div id="section-6" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🐾 Mammals Have Hair or Fur" data-challenge="🐾 Mammals: Hair or Fur">Sec 6 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Look at a cat or dog! That covering is fur (which is a type of hair)." data-challenge="Having hair or fur is a special trait of mammals.">Sec 6 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Hair helps keep mammals warm." data-challenge="Hair helps keep them warm (like a coat!).">Sec 6 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Even mammals like whales have a little bit of hair!" data-challenge="It can also help them hide (camouflage) or feel things around them.">Sec 6 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Some mammals have thick fur, some have thin hair.">Sec 6 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="6-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What covers the body of most mammals?" data-challenge="Besides warmth, what is another function of hair/fur?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Scales" data-challenge="Helping swim">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Hair or Fur" data-challenge="Camouflage/Sensing">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Feathers" data-challenge="Breathing">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Mammal Feature - Live Birth & Milk (Section 7 / Page 8) ... -->
         <div id="section-7" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="👶 Mammals: Live Babies & Milk" data-challenge="👶 Mammals: Live Birth (Viviparous) & Milk (Lactation)">Sec 7 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Most mammal mothers grow their babies inside them and then give birth to live babies (not eggs!)." data-challenge="Remember, most mammals are <code>viviparous</code> – they give birth to live babies that grew inside the mother.">Sec 7 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="After the baby is born, the mother feeds it milk 🥛 from her body." data-challenge="Another key mammal trait is <code>lactation</code>. Mothers produce milk to feed their babies.">Sec 7 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Milk helps the baby grow strong!" data-challenge="Milk gives babies the food and protection they need to grow.">Sec 7 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="7-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="How are most mammal babies born?" data-challenge="What is the process of feeding young with milk called?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="From eggs" data-challenge="Gestation">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Live from the mother" data-challenge="Lactation">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="From seeds" data-challenge="Metamorphosis">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Strange Mammals (Section 8 / Page 9) ... -->
        <div id="section-8" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="❓ Weird Mammals!" data-challenge="❓ Unusual Mammals!">Sec 8 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Not all mammals follow the rules! The Platypus lays eggs! 🤯" data-challenge="Some mammals are surprising! The Platypus is a mammal that lays eggs!">Sec 8 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Egg-laying animals are called <code>Oviparous</code> (oh-VIP-uh-rus).">Sec 8 S2 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="But it feeds milk, so it's a mammal!" data-challenge="But, the platypus mother still feeds milk (lactation), so it's a mammal.">Sec 8 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Whales are giant mammals living in the sea." data-challenge="Whales are mammals that live their whole lives in water.">Sec 8 S4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Pangolins have scales made of hair!" data-challenge="Pangolins look like they have scales, but they are made from packed-together hair!">Sec 8 S5</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="8-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What strange thing does a platypus do?" data-challenge="The platypus is an exception to which common mammal trait?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fly" data-challenge="Having hair">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Lay eggs" data-challenge="Viviparity (giving live birth)">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Breathe water" data-challenge="Being warm-blooded">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Fish Intro (Section 9 / Page 10) ... -->
        <div id="section-9" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🐠 Group 2: Fish" data-challenge="🐠 Class: Pisces (Fish)">Sec 9 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Fish are vertebrates that live in water." data-challenge="Fish are vertebrates that live in water.">Sec 9 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="What makes a fish special? They are cold-blooded, breathe water using gills, are covered in scales, and lay eggs." data-challenge="Special things about them: They are <code>Ectothermic</code> (eck-toh-THER-mic), meaning cold-blooded.">Sec 9 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They breathe using gills.">Sec 9 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Their bodies usually have scales.">Sec 9 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Most lay eggs (oviparous).">Sec 9 S5 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="9-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Where do fish live?" data-challenge="Fish primarily breathe using...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="On land" data-challenge="Lungs">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="In water" data-challenge="Gills">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="In the air" data-challenge="Skin">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Fish Feature - Cold-blooded (Section 10 / Page 11) ... -->
         <div id="section-10" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🥶 Fish are Cold-Blooded" data-challenge="🥶 Fish: Ectothermic (Cold-blooded)">Sec 10 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="This means their body temperature changes with the water around them." data-challenge="Being ectothermic means a fish's body temperature depends on the outside environment (the water).">Sec 10 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="If the water is cold, the fish is cold." data-challenge="If the water is cold, the fish's body is cold.">Sec 10 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="They don't make their own heat like mammals do." data-challenge="They don't make their own steady heat like endothermic (warm-blooded) animals do.">Sec 10 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="10-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="If the water gets colder, what happens to a fish's body?" data-challenge="Ectothermic animals get their body heat mainly from...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Stays warm" data-challenge="Their food">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Gets colder" data-challenge="The environment">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Gets hotter" data-challenge="Moving fast">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Fish Feature - Gills (Section 11 / Page 12) ... -->
        <div id="section-11" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="😮 Fish Breathe with Gills" data-challenge="😮 Fish: Breathing with Gills">Sec 11 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Fish don't have lungs! They have gills on the sides of their head." data-challenge="Fish use gills to breathe underwater. Gills are special body parts that take oxygen directly from the water.">Sec 11 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Water goes into their mouth and out through the gills." data-challenge="Water flows over the gills, and the gills grab the oxygen the fish needs.">Sec 11 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="The gills take the oxygen out of the water so the fish can breathe!" data-challenge="This is how they get oxygen, instead of breathing air with lungs.">Sec 11 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="11-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What body part helps fish breathe underwater?" data-challenge="Gills are specially designed to take oxygen from...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fins" data-challenge="Air">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Gills" data-challenge="Water">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Tail" data-challenge="Mud">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Fish Feature - Scales & Oviparity (Section 12 / Page 13) ... -->
         <div id="section-12" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🛡️ Fish: Scales and Eggs" data-challenge="🛡️ Fish: Scales and Eggs (Oviparous)">Sec 12 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Most fish are covered in small, hard plates called scales. Scales protect the fish!" data-challenge="Most fish have scales covering their skin for protection. Scales are like small, hard plates.">Sec 12 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Most fish lay many small, jelly-like eggs in the water. Baby fish hatch from these eggs." data-challenge="Most fish are <code>oviparous</code> – they lay eggs, usually many small eggs in the water. Often, the parents don't take care of the eggs or babies.">Sec 12 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="12-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What usually covers a fish's body?" data-challenge="Most fish reproduce by...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fur" data-challenge="Giving live birth">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Scales" data-challenge="Laying eggs (oviparous)">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Feathers" data-challenge="Budding">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Weird Fish (Section 13 / Page 14) ... -->
        <div id="section-13" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="❓ Weird Fish!" data-challenge="❓ Unusual Fish!">Sec 13 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Some fish are strange! The Stargazer hides in sand and can shock its food! ⚡" data-challenge="Fish have amazing ways to live (adaptations). The Stargazer hides in sand and can give a shock! ⚡">Sec 13 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="The male Jawfish holds eggs in his mouth!" data-challenge="The male Jawfish carries eggs in his mouth to keep them safe.">Sec 13 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="The Blobfish looks gooey because it's adapted to live deep in the ocean.">Sec 13 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="The Flounder has both eyes on one side!" data-challenge="Flounder change as they grow – one eye moves so they can lie flat on the bottom!">Sec 13 S4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="13-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Which weird fish holds eggs in its mouth?" data-challenge="The flounder's flat shape and eye position is an adaptation for...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Blobfish" data-challenge="Swimming fast">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Jawfish" data-challenge="Hiding on the seabed">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Flounder" data-challenge="Eating plants">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Amphibians Intro (Section 14 / Page 15) ... -->
         <div id="section-14" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🐸 Group 3: Amphibians" data-challenge="🐸 Class: Amphibia (Amphibians)">Sec 14 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Amphibians are vertebrates like frogs and salamanders." data-challenge="Amphibians (like frogs) are <code>Ectothermic</code> (cold-blooded) vertebrates.">Sec 14 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="What makes them special? They are cold-blooded, have smooth skin (usually wet!), lay eggs (in water), and live a 'double life' - starting in water, then living on land!" data-challenge="They are known for their 'dual life' – starting in water and moving to land.">Sec 14 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Special things: They usually have smooth, wet skin (they can breathe through it a bit!).">Sec 14 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They lay eggs (oviparous), usually in water.">Sec 14 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They go through big body changes called <code>Metamorphosis</code> (met-uh-MORF-oh-sis).">Sec 14 S5 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="14-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Amphibians usually have what kind of skin?" data-challenge="The term 'Amphibian' refers to their...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Furry" data-challenge="Cold blood">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Scaly" data-challenge="Egg laying">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Smooth and wet" data-challenge="Dual life in water and land">Opt C Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Amphibian Feature - Metamorphosis (Section 15 / Page 16) ... -->
        <div id="section-15" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🐛 Amphibians Change!" data-challenge="🐛 Amphibian Metamorphosis">Sec 15 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Most amphibians change forms." data-challenge="This word means 'changing form'. Most amphibians go through metamorphosis.">Sec 15 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Think of a frog: It starts as an egg in water, hatches into a tadpole with gills and a tail, then slowly grows legs, loses its tail, and gets lungs to live on land!" data-challenge="Think of a frog: It starts as an egg in water, hatches into a larva (tadpole) with gills, swims with a tail. Then, it slowly grows legs, lungs develop, and the tail disappears. It changes into an adult frog that can live on land!">Sec 15 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="15-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="A baby frog (tadpole) breathes with...?" data-challenge="Metamorphosis involves changing from a larval form to...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Lungs" data-challenge="A smaller larva">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Gills" data-challenge="An adult form">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Skin" data-challenge="An egg form">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Amphibian Examples (Section 16 / Page 17) ... -->
        <div id="section-16" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="👨‍👩‍👧‍👦 Kinds of Amphibians" data-challenge="👨‍👩‍👧‍👦 Kinds of Amphibians">Sec 16 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Frogs and Toads are common." data-challenge="There are different groups. Frogs and toads belong to a group called <code>Anura</code> (adults have no tails).">Sec 16 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Salamanders look like lizards but have smooth skin." data-challenge="Salamanders and newts are in the <code>Caudata</code> group (they have tails as adults).">Sec 16 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Caecilians look like worms or snakes but are amphibians!" data-challenge="<code>Caecilians</code> (see-SILL-yuns) are in the <code>Gymnophiona</code> group – they look like snakes or worms and have no legs!">Sec 16 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="16-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Which amphibian looks like a worm but has no legs?" data-challenge="Frogs and toads belong to which amphibian group?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Caecilian" data-challenge="Anura">Opt A Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Frog" data-challenge="Caudata">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Salamander" data-challenge="Gymnophiona">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Reptiles Intro (Section 17 / Page 18) ... -->
         <div id="section-17" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="🐍 Group 4: Reptiles" data-challenge="🐍 Class: Reptilia (Reptiles)">Sec 17 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Reptiles are vertebrates like snakes, lizards, turtles, and crocodiles." data-challenge="Reptiles (like snakes, lizards, turtles) are <code>Ectothermic</code> (cold-blooded) vertebrates. Most are adapted for life on land.">Sec 17 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="What makes them special? They are cold-blooded, breathe air with lungs, have dry, scaly skin, and most lay eggs (on land)." data-challenge="Key things: They breathe air with lungs. Their skin has dry scales.">Sec 17 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They usually lay special eggs, called <code>Amniotic</code> (am-nee-AH-tick) eggs, on land.">Sec 17 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Unlike many birds or mammals, most reptiles don't care for their young after eggs are laid.">Sec 17 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="17-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Reptiles have what kind of skin?" data-challenge="Unlike amphibian eggs, reptile eggs are typically laid...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Smooth and wet" data-challenge="In water">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Dry and scaly" data-challenge="On land">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Covered in feathers" data-challenge="Inside the mother">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Reptile Feature - Scales & Eggs (Section 18 / Page 19) ... -->
        <div id="section-18" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🛡️ Reptile Scales and Eggs" data-challenge="🛡️ Reptile Scales & Amniotic Eggs">Sec 18 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Reptile scales are dry and protect their body." data-challenge="Reptile scales are dry and tough, protecting the body and helping keep water inside.">Sec 18 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Reptile eggs have a special shell (sometimes soft, sometimes leathery) that protects the baby inside on land." data-challenge="The amniotic egg is a key adaptation for living on land. It has a shell and layers inside that protect the baby and keep it from drying out.">Sec 18 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="This means reptiles don't need water to lay their eggs.">Sec 18 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="18-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What helps keep a reptile from drying out?" data-challenge="The amniotic egg allows reptiles to reproduce...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Wet skin" data-challenge="Faster">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Dry scales" data-challenge="Away from water">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Feathers" data-challenge="Without a mate">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Reptile Examples (Section 19 / Page 20) ... -->
        <div id="section-19" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🐊 Kinds of Reptiles" data-challenge="🐊 Kinds of Reptiles">Sec 19 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Crocodiles live near water." data-challenge="Major reptile groups include: Crocodiles and Alligators.">Sec 19 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Turtles (live in water) and Tortoises (live on land) have shells." data-challenge="Turtles and Tortoises (have a protective shell).">Sec 19 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Lizards usually have legs, snakes don't." data-challenge="Lizards and Snakes belong to a large group called <code>Squamata</code>. Most lizards have legs, snakes don't.">Sec 19 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="19-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What reptile has a shell?" data-challenge="Snakes and lizards belong to which reptile group?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Snake" data-challenge="Crocodilia">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Turtle/Tortoise" data-challenge="Squamata">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Lizard" data-challenge="Testudines">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Birds Intro (Section 20 / Page 21) ... -->
         <div id="section-20" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🐦 Group 5: Birds" data-challenge="🐦 Class: Aves (Birds)">Sec 20 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Birds are vertebrates." data-challenge="Birds are <code>Endothermic</code> (warm-blooded) vertebrates.">Sec 20 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="What makes them special? They are warm-blooded, breathe air with lungs, are covered in feathers, lay hard-shelled eggs, and most can fly!" data-challenge="The most special thing about birds is feathers!">Sec 20 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="Other key things: They have beaks, lay hard-shelled amniotic eggs, and most can fly.">Sec 20 S3 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p data-challenge-only><span class="translatable-segment" data-easy="" data-challenge="They have light bones to help them fly.">Sec 20 S4 Ch</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="20-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="What covers a bird's body?" data-challenge="Birds are endothermic, meaning they are...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Scales" data-challenge="Cold-blooded">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Feathers" data-challenge="Warm-blooded">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fur" data-challenge="Able to swim">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Bird Feature - Feathers & Flight (Section 21 / Page 22) ... -->
        <div id="section-21" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="✈️ Bird Feathers & Flying" data-challenge="✈️ Bird Feathers and Flying">Sec 21 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Feathers help birds fly!" data-challenge="Feathers help birds do many things: fly, stay warm, stay dry, and show off colors.">Sec 21 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Flight feathers on wings push air." data-challenge="Flight feathers on the wings push air to lift the bird and move it forward (thrust).">Sec 21 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Tail feathers help steer." data-challenge="Tail feathers help steer.">Sec 21 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Soft 'down' feathers keep birds warm." data-challenge="Down feathers are soft and keep birds warm.">Sec 21 S4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Body feathers cover and color the bird." data-challenge="Body feathers cover the bird and give it color.">Sec 21 S5</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                 <div class="quiz-block" data-quiz-id="21-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Which feathers help keep a bird warm?" data-challenge="Flight feathers on the wings are primarily used for...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Tail feathers" data-challenge="Insulation">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Down feathers" data-challenge="Generating lift/thrust">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Flight feathers" data-challenge="Steering">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Bird Feature - Eggs (Section 22 / Page 23) ... -->
        <div id="section-22" class="lesson-section">
             <h2><span class="translatable-segment" data-easy="🥚 Bird Eggs" data-challenge="🥚 Bird Eggs">Sec 22 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
             <p><span class="translatable-segment" data-easy="Birds lay hard-shelled eggs, usually in a nest." data-challenge="Birds lay amniotic eggs (like reptiles, but with hard shells).">Sec 22 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="The hard shell protects the baby bird." data-challenge="The hard shell gives good protection. Most birds build nests.">Sec 22 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Birds keep their eggs warm until they hatch." data-challenge="They show parental care by sitting on eggs to keep them warm – this is called <code>Incubation</code> (in-kyoo-BAY-shun).">Sec 22 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <p><span class="translatable-segment" data-easy="Baby birds need care from parents." data-challenge="They also feed their baby birds (hatchlings).">Sec 22 S4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="22-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Bird eggs have what kind of shell?" data-challenge="Keeping eggs warm until they hatch is called...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Soft shell" data-challenge="Metamorphosis">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Hard shell" data-challenge="Incubation">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                        <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="No shell" data-challenge="Lactation">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                    <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>

        <!-- ... Vertebrate Review (Section 23 / Page 24) ... -->
        <div id="section-23" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="👍 Let's Review!" data-challenge="✔️ Vertebrate Classes Summary">Sec 23 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Remember the 5 groups? Mammals (warm, hair/fur, milk), Fish (cold, gills, scales), Amphibians (cold, smooth skin, start in water), Reptiles (cold, dry scales, land eggs), Birds (warm, feathers, fly). All have backbones!" data-challenge="Let's compare the classes using our challenge words! Mammalia: Endothermic, hair/fur, lungs, usually viviparous, lactation. Pisces: Ectothermic, gills, scales, usually oviparous (in water). Amphibia: Ectothermic, smooth skin, gills then lungs, metamorphosis, oviparous (in water). Reptilia: Ectothermic, dry scales, lungs, usually oviparous (amniotic eggs on land). Aves: Endothermic, feathers, lungs, flight (most), oviparous (amniotic eggs on land). (Remember exceptions like the oviparous platypus!)">Sec 23 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <!-- MULTIPLE QUIZZES HERE -->
             <div class="quiz-container">
                 <!-- Q1 -->
                 <div class="quiz-block" data-quiz-id="23-1">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which group has fur and feeds milk?" data-challenge="Classify a bat.">Q1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Mammals" data-challenge="Mammal">Opt A C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish" data-challenge="Bird">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Birds" data-challenge="Reptile">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q2 -->
                 <div class="quiz-block" data-quiz-id="23-2">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which group breathes with gills its whole life?" data-challenge="Which class undergoes metamorphosis?">Q2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish" data-challenge="Amphibia">Opt A C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Amphibians" data-challenge="Reptilia">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Reptiles" data-challenge="Aves">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q3 -->
                  <div class="quiz-block" data-quiz-id="23-3">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which group has feathers?" data-challenge="Compare skin: amphibian vs. reptile.">Q3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Reptiles" data-challenge="Both dry">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Birds" data-challenge="Amphibian moist, Reptile dry/scaly">Opt B C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Mammals" data-challenge="Both moist">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                  <!-- Q4 -->
                 <div class="quiz-block" data-quiz-id="23-4">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which group has dry scales and lays leathery/soft eggs on land?" data-challenge="Which vertebrate class lives fully in water & uses gills?">Q4</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Amphibians" data-challenge="Amphibia">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Reptiles" data-challenge="Pisces">Opt B C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish" data-challenge="Reptilia">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q5 -->
                  <div class="quiz-block" data-quiz-id="23-5">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which group starts with gills and grows lungs?" data-challenge="Endothermy (warm-bloodedness) is found in which two classes?">Q5</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish" data-challenge="Reptilia & Pisces">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Birds" data-challenge="Amphibia & Reptilia">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Amphibians" data-challenge="Aves & Mammalia">Opt C C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q6 -->
                  <div class="quiz-block" data-quiz-id="23-6">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Is a whale a fish or a mammal?" data-challenge="Oviparity (egg-laying) is common in all classes EXCEPT primarily...?">Q6</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Mammal" data-challenge="Mammalia">Opt A C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish" data-challenge="Aves">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-easy-only><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="" data-challenge="">Opt C Easy</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group" data-challenge-only><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="" data-challenge="Reptilia">Opt C Ch</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q7 -->
                 <div class="quiz-block" data-quiz-id="23-7">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="True or False: All vertebrates lay eggs." data-challenge="Why is a penguin a bird (Aves) even if it doesn't fly?">Q7</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="False" data-challenge="Has feathers & other bird traits">Opt A C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="True" data-challenge="It can swim">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-challenge-only><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="" data-challenge="It lives in cold places">Opt C Ch</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q8 -->
                 <div class="quiz-block" data-quiz-id="23-8">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Which two groups are warm-blooded?" data-challenge="Which group typically shows the least parental care after eggs are laid?">Q8</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fish & Reptiles" data-challenge="Birds">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Birds & Mammals" data-challenge="Reptiles">Opt B C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Amphibians & Fish" data-challenge="Mammals">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q9 -->
                 <div class="quiz-block" data-quiz-id="23-9">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="What helps fish swim?" data-challenge="Gills get oxygen from _____, lungs get oxygen from _____.">Q9</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Wings" data-challenge="Air, Water">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Fins" data-challenge="Water, Air">Opt B C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                          <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Legs" data-challenge="Soil, Air">Opt C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>
                 <!-- Q10 -->
                  <div class="quiz-block" data-quiz-id="23-10">
                     <div class="quiz-question"><span class="translatable-segment" data-easy="Do snakes have backbones?" data-challenge="The platypus is unusual because it's a mammal that...?">Q10</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                     <div class="quiz-options">
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Yes" data-challenge="Lays eggs (oviparous)">Opt A C</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="No" data-challenge="Can fly">Opt B</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-challenge-only><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="" data-challenge="Breathes water">Opt C Ch</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                     </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Fb</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                 </div>

             </div> <!-- End Review Quiz Container -->
        </div>

        <!-- ... Invertebrate Contrast (Section 24 / Page 25) ... -->
        <div id="section-24" class="lesson-section">
            <h2><span class="translatable-segment" data-easy="❓What about bugs?" data-challenge="↔️ What About Animals Without Backbones?">Sec 24 Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h2>
            <p><span class="translatable-segment" data-easy="Animals like insects 🦋, spiders 🕷️, worms 🐛, and jellyfish do NOT have a backbone inside." data-challenge="Animals that do NOT have a backbone (vertebral column) are called <code>Invertebrates</code> (in-VERT-uh-brits).">Sec 24 S1</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="They are called invertebrates." data-challenge="This includes insects 🦋, spiders 🕷️, worms 🐛, jellyfish, snails, and crabs.">Sec 24 S2</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <p><span class="translatable-segment" data-easy="Most animals on Earth are invertebrates!" data-challenge="Most animals on Earth are actually invertebrates!">Sec 24 S3</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
            <div class="quiz-container">
                <div class="quiz-block" data-quiz-id="24-1">
                    <div class="quiz-question"><span class="translatable-segment" data-easy="Does a spider have a backbone?" data-challenge="Animals WITHOUT backbones are called...?">Q1 Txt</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                    <div class="quiz-options">
                         <div class="option-group"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="Yes" data-challenge="Vertebrates">Opt A</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-correct="true"><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="No" data-challenge="Invertebrates">Opt B Correct</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                         <div class="option-group" data-challenge-only><button class="quiz-option-button"><span class="button-content"><span class="translatable-segment" data-easy="" data-challenge="Amphibians">Opt C Ch</span><span class="button-icons"><button class="tts-button embedded-icon">🔊</button><button class="translate-button embedded-icon">🌐</button></span></span></button></div>
                    </div>
                     <div class="quiz-feedback"><span class="translatable-segment" data-easy="" data-challenge="">Feedback</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></div>
                </div>
            </div>
        </div>


        <!-- Final Results Screen (Section 25 / Page 26) -->
        <div id="section-final" class="lesson-section">
             <h1><span class="translatable-segment" data-easy="🏆 Lesson Complete!" data-challenge="🏆 Lesson Complete!">Results Title</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></h1>
             <p id="results-message"><span class="translatable-segment" data-easy="Great job learning about vertebrates!" data-challenge="Excellent work completing the Vertebrates lesson!">Results Message</span><span class="tts-translate-wrapper"><button class="tts-button">🔊</button><button class="translate-button">🌐</button></span></p>
             <div id="final-score-display">Your Score: 0 / 0</div>
             <h3>High Scores</h3>
             <ul id="high-score-list">
                 <li>Loading high scores...</li>
             </ul>
             <button id="play-again-button" class="btn-nav">Play Again?</button>
        </div>

        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
            <button id="prev-button" class="btn-nav" disabled>
                <span class="button-content">
                    <span id="prev-button-text">Previous</span>
                    <!-- *** CHANGE: Removed button-icons span *** -->
                </span>
            </button>
            <button id="next-button" class="btn-nav">
                <span class="button-content">
                     <span id="next-button-text">Next</span>
                     <!-- *** CHANGE: Removed button-icons span *** -->
                </span>
            </button>
        </div>

        <!-- Template for +1 animation -->
        <div id="plus-one-template" class="plus-one-effect" style="display: none;">+1</div>

    </div><!-- End #lesson-container -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Configuration ---
            const TRANSLATE_WINDOW_NAME = 'LessonTranslateWindow';
            const HIGH_SCORE_KEY = 'vertebrateLessonHighScores';
            const MAX_HIGH_SCORES = 10;
            const START_SECTION_INDEX = 1; // Section index after difficulty choice
            const RESULTS_SECTION_ID = 'section-final'; // ID of the results section

            // --- State Variables ---
            let currentSectionIndex = 0;
            let currentDifficulty = 'easy'; // 'easy' or 'challenge'
            let currentScore = 0;
            let currentGameTotalQuestions = 0;
            let quizStates = {}; // Tracks answered status: { 'section-id': { answered: 0, total: 2 } }
            let perfectRun = false;

            // --- DOM Elements ---
            const lessonContainer = document.getElementById('lesson-container');
            const sections = Array.from(document.querySelectorAll('.lesson-section'));
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const nextButtonText = document.getElementById('next-button-text');
            const prevButtonText = document.getElementById('prev-button-text'); // Added for consistency
            const easyBtn = document.getElementById('easy-btn');
            const challengeBtn = document.getElementById('challenge-btn');
            const ttsSpeedSlider = document.getElementById('tts-speed');
            const stopTTSButton = document.getElementById('stop-tts-button');
            const finalScoreDisplay = document.getElementById('final-score-display');
            const resultsMessageSegment = document.querySelector('#results-message .translatable-segment');
            const highScoreList = document.getElementById('high-score-list');
            const playAgainButton = document.getElementById('play-again-button');
            const plusOneTemplate = document.getElementById('plus-one-template');

            // --- Speech Synthesis ---
            const synth = window.speechSynthesis;
            let currentUtterance = null;
            let highlightedElement = null;

             // --- Helper: Clean Text for TTS/Translation ---
            function getCleanText(segmentElement) {
                if (!segmentElement) return '';
                 // Clone the node to avoid modifying the original
                const clone = segmentElement.cloneNode(true);
                // Remove hidden elements (like icons) before getting text
                clone.querySelectorAll('[aria-hidden="true"], .button-icons, .tts-translate-wrapper').forEach(el => el.remove());
                let cleanText = clone.textContent.trim();

                // *** CHANGE: Add emoji removal using regex ***
                // This regex covers many common emoji ranges. The 'u' flag is essential for Unicode.
                const emojiRegex = /[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}\u{FE0F}]/gu;
                cleanText = cleanText.replace(emojiRegex, ''); // Remove emojis
                cleanText = cleanText.replace(/\s+/g, ' ').trim(); // Clean up extra spaces potentially left by emoji removal

                return cleanText;
            }

            // --- TTS Functions ---
            function speakText(segmentElement) {
                if (!segmentElement || !synth) return;
                const textToSpeak = getCleanText(segmentElement); // Use updated getCleanText
                if (!textToSpeak) return;

                stopTTS(); // Stop previous speech

                currentUtterance = new SpeechSynthesisUtterance(textToSpeak);
                currentUtterance.rate = parseFloat(ttsSpeedSlider.value) || 1;

                currentUtterance.onstart = () => {
                    removeHighlight(); // Clear any previous highlight
                    segmentElement.classList.add('highlight');
                    highlightedElement = segmentElement;
                };

                currentUtterance.onend = () => {
                    removeHighlight();
                    currentUtterance = null;
                };

                currentUtterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    removeHighlight();
                    currentUtterance = null;
                };

                synth.speak(currentUtterance);
            }

            function stopTTS() {
                if (synth.speaking) {
                    synth.cancel();
                }
                 removeHighlight();
                 if (currentUtterance) {
                     currentUtterance.onstart = null;
                     currentUtterance.onend = null;
                     currentUtterance.onerror = null;
                     currentUtterance = null;
                 }
            }

             function removeHighlight() {
                if (highlightedElement) {
                    highlightedElement.classList.remove('highlight');
                    highlightedElement = null;
                }
                 // Failsafe: remove any lingering highlight class
                document.querySelectorAll('.highlight').forEach(el => el.classList.remove('highlight'));
             }


            // --- Translation Function ---
            function translateSegment(segmentElement) {
                if (!segmentElement) return;
                const textToTranslate = getCleanText(segmentElement); // Use updated getCleanText
                if (!textToTranslate) return;

                // Default target language Thai (th), source English (en)
                const translateUrl = `https://translate.google.com/?sl=en&tl=th&text=${encodeURIComponent(textToTranslate)}&op=translate`;

                // Try to reuse the same window/tab
                window.open(translateUrl, TRANSLATE_WINDOW_NAME);
            }

             // --- Word Translation (Double Click) ---
            function handleDoubleClick(event) {
                 const targetSegment = event.target.closest('.translatable-segment');
                 if (targetSegment) {
                     const selectedText = window.getSelection().toString().trim();
                     if (selectedText.length > 0 && selectedText.length < 50) { // Avoid translating huge selections
                         // Use updated getCleanText to avoid trying to translate just an emoji if selected
                         const cleanSelectedText = getCleanText(document.createTextNode(selectedText));
                         if (cleanSelectedText) {
                            const translateUrl = `https://translate.google.com/?sl=en&tl=th&text=${encodeURIComponent(cleanSelectedText)}&op=translate`;
                            window.open(translateUrl, TRANSLATE_WINDOW_NAME);
                         }
                     }
                 }
            }

            // --- Navigation ---
            function showSection(index) {
                if (index < 0 || index >= sections.length) {
                    console.error("Invalid section index:", index);
                    return;
                }

                stopTTS(); // Stop speech on navigation

                sections.forEach((section, i) => {
                    section.classList.remove('active');
                });

                currentSectionIndex = index;
                sections[currentSectionIndex].classList.add('active');

                updateNavigation();
                updateQuizStatesForSection(sections[currentSectionIndex].id); // Initialize/update quiz state for the new section

                 // Smooth scroll to top of container
                lessonContainer.scrollTo({ top: 0, behavior: 'smooth' });

                 // Special handling for results section
                if (sections[currentSectionIndex].id === RESULTS_SECTION_ID) {
                    triggerResultsActions();
                }
            }

            function updateNavigation() {
                const isFirstContentSection = currentSectionIndex === START_SECTION_INDEX;
                const isLastSection = currentSectionIndex === sections.length - 1;
                const isPenultimateSection = currentSectionIndex === sections.length - 2; // Second to last section

                 // Previous Button State
                prevButton.disabled = currentSectionIndex === 0; // Always disabled on section 0 (difficulty choice)


                 // Next Button State & Text
                if (isLastSection) {
                    nextButton.style.display = 'none'; // Hide Next on the very last (results) screen
                    prevButton.style.marginLeft = 'auto'; // Move prev button to right if next is hidden
                } else {
                    nextButton.style.display = 'inline-flex'; // Ensure it's visible otherwise
                    prevButton.style.marginLeft = '0';
                    nextButtonText.textContent = isPenultimateSection ? 'Finish' : 'Next';

                    // Check quiz completion for the current section
                    const currentSectionId = sections[currentSectionIndex].id;
                    const sectionQuizState = quizStates[currentSectionId];

                    if (sectionQuizState && sectionQuizState.total > 0) {
                        nextButton.disabled = sectionQuizState.answered < sectionQuizState.total;
                    } else {
                        nextButton.disabled = false; // Enable if no quizzes or all answered
                    }
                }

                // *** CHANGE: No need to update embedded icon labels as they were removed ***
                // updateEmbeddedIconLabels();
            }

            // *** CHANGE: Removed function as icons are gone ***
            /*
             function updateEmbeddedIconLabels() {
                 // ... old code ...
             }
            */

            function goToNextSection() {
                if (currentSectionIndex < sections.length - 1) {
                    if (nextButtonText.textContent === 'Finish') {
                         // Handle lesson completion logic before showing final screen
                         prepareForResults();
                    } else {
                        showSection(currentSectionIndex + 1);
                    }
                }
            }

            function goToPrevSection() {
                if (currentSectionIndex > 0) {
                    showSection(currentSectionIndex - 1);
                }
            }

             // --- Difficulty Handling ---
            function setDifficulty(difficulty) {
                currentDifficulty = difficulty;
                initLesson(); // Apply difficulty settings to content
                showSection(START_SECTION_INDEX); // Show the first *real* lesson section
            }

            function initLesson() {
                currentScore = 0;
                currentGameTotalQuestions = 0;
                quizStates = {}; // Reset quiz tracking
                perfectRun = false;

                // Apply text based on difficulty and hide/show elements
                sections.forEach(section => {
                    // Apply text content
                    section.querySelectorAll('.translatable-segment').forEach(segment => {
                        const easyText = segment.dataset.easy || '';
                        const challengeText = segment.dataset.challenge || '';
                        // *** Update: Use getCleanText here too if you want emojis removed from display,
                        // but likely better to keep them visually and only remove for TTS/Translate.
                        // So, keeping the original text assignment logic.
                        segment.textContent = (currentDifficulty === 'challenge') ? challengeText : easyText;
                    });

                    // Show/hide difficulty-specific elements
                    section.querySelectorAll('[data-easy-only], [data-challenge-only]').forEach(el => {
                         const easyOnly = el.hasAttribute('data-easy-only');
                         const challengeOnly = el.hasAttribute('data-challenge-only');

                         if (currentDifficulty === 'easy') {
                             el.style.display = challengeOnly ? 'none' : ''; // Show if easy-only or non-specific, hide if challenge-only
                         } else { // currentDifficulty === 'challenge'
                             el.style.display = easyOnly ? 'none' : ''; // Show if challenge-only or non-specific, hide if easy-only
                         }
                    });

                     // Shuffle quiz options only in challenge mode and only if the section is visible
                    if (currentDifficulty === 'challenge') {
                        section.querySelectorAll('.quiz-block').forEach(quizBlock => {
                            // Check if the quiz block itself is visible (not inside a hidden parent)
                             if (quizBlock.offsetParent !== null) {
                                 shuffleOptions(quizBlock);
                             }
                        });
                    }

                     // Calculate total questions *visible* for this difficulty
                     const visibleQuizBlocks = section.querySelectorAll('.quiz-block:not([style*="display: none"])');
                     visibleQuizBlocks.forEach(block => {
                        // Further check if the block itself is actually rendered (its parent might be hidden)
                        if (block.offsetParent !== null) {
                           currentGameTotalQuestions++;
                        }
                     });

                     // Reset quiz block appearance and state
                    section.querySelectorAll('.quiz-block').forEach(block => {
                        block.classList.remove('answered');
                        block.querySelectorAll('.quiz-option-button').forEach(btn => {
                            btn.classList.remove('correct', 'incorrect');
                            btn.disabled = false;
                        });
                        const feedback = block.querySelector('.quiz-feedback');
                        if(feedback) {
                            feedback.style.display = 'none';
                            feedback.className = 'quiz-feedback'; // Reset classes
                            const feedbackSegment = feedback.querySelector('.translatable-segment');
                             if(feedbackSegment) feedbackSegment.textContent = '';
                        }
                    });
                     updateQuizStatesForSection(section.id); // Initialize quiz counts for all sections
                });

                updateNavigation(); // Update nav based on potentially new quiz counts
            }

             // --- Quiz Handling ---
             function updateQuizStatesForSection(sectionId) {
                 const sectionElement = document.getElementById(sectionId);
                 if (!sectionElement) return;

                 // Count only visible quiz blocks
                 const visibleQuizBlocks = sectionElement.querySelectorAll('.quiz-block:not([style*="display: none"])');
                 let visibleCount = 0;
                 visibleQuizBlocks.forEach(block => {
                     if (block.offsetParent !== null) { // Check if actually rendered
                         visibleCount++;
                     }
                 });

                 quizStates[sectionId] = {
                     answered: 0, // Reset answered count when section is shown or re-initialized
                     total: visibleCount
                 };

                 // Re-calculate total questions across all visible sections after init
                 currentGameTotalQuestions = 0;
                 sections.forEach(sec => {
                    const state = quizStates[sec.id];
                    if (state && state.total) { // Ensure state.total is a valid number > 0 if needed
                        currentGameTotalQuestions += state.total;
                    }
                 });
             }

            function handleQuizAnswer(button) {
                const optionGroup = button.closest('.option-group');
                const quizBlock = button.closest('.quiz-block');
                if (!optionGroup || !quizBlock || quizBlock.classList.contains('answered')) {
                    return; // Already answered or invalid structure
                }

                stopTTS(); // Stop any ongoing speech

                quizBlock.classList.add('answered');
                const isCorrect = optionGroup.dataset.correct === 'true';
                const feedbackElement = quizBlock.querySelector('.quiz-feedback');
                const feedbackSegment = feedbackElement ? feedbackElement.querySelector('.translatable-segment') : null;

                 // Disable all option buttons in this block
                quizBlock.querySelectorAll('.quiz-option-button').forEach(btn => {
                    btn.disabled = true;
                });


                if (isCorrect) {
                    button.classList.add('correct');
                    currentScore++;
                    showPlusOne(button); // Show +1 animation
                    if (feedbackSegment) feedbackSegment.textContent = "Correct! 🎉"; // Emoji kept for display
                    if (feedbackElement) feedbackElement.className = 'quiz-feedback correct';
                } else {
                    button.classList.add('incorrect');
                    // Highlight the correct answer
                    const correctOption = quizBlock.querySelector('.option-group[data-correct="true"] .quiz-option-button');
                    if (correctOption) correctOption.classList.add('correct');
                    if (feedbackSegment) feedbackSegment.textContent = "Not quite. The correct answer is highlighted.";
                    if (feedbackElement) feedbackElement.className = 'quiz-feedback incorrect';
                }

                // Update quiz state for the current section
                const currentSectionId = sections[currentSectionIndex].id;
                if (quizStates[currentSectionId]) {
                     quizStates[currentSectionId].answered++;
                     // Check if all quizzes in this section are now answered
                     if (quizStates[currentSectionId].answered >= quizStates[currentSectionId].total) {
                        updateNavigation(); // Re-evaluate Next button state
                     }
                } else {
                    console.warn("Quiz state not found for section:", currentSectionId);
                }
            }

             function shuffleOptions(quizBlock) {
                 const optionsContainer = quizBlock.querySelector('.quiz-options');
                 if (!optionsContainer) return;
                 const options = Array.from(optionsContainer.children); // Get .option-group elements

                 // Fisher-Yates Shuffle
                 for (let i = options.length - 1; i > 0; i--) {
                     const j = Math.floor(Math.random() * (i + 1));
                     [options[i], options[j]] = [options[j], options[i]]; // Swap
                 }

                 // Re-append shuffled options
                 options.forEach(option => optionsContainer.appendChild(option));
             }


            // --- Gamification ---
            function showPlusOne(element) {
                const plusOne = plusOneTemplate.cloneNode(true);
                plusOne.style.display = 'block'; // Make it visible
                // Append to lesson container might be better than body if container scrolls
                lessonContainer.appendChild(plusOne);

                const rect = element.getBoundingClientRect();
                const containerRect = lessonContainer.getBoundingClientRect();

                 // Position relative to the container, accounting for scroll
                plusOne.style.left = `${rect.left - containerRect.left + rect.width - 10 + lessonContainer.scrollLeft}px`;
                plusOne.style.top = `${rect.top - containerRect.top - 10 + lessonContainer.scrollTop}px`;

                // Remove after animation ends (1s duration)
                setTimeout(() => {
                    if (plusOne.parentNode) {
                         plusOne.parentNode.removeChild(plusOne);
                    }
                }, 1000);
            }

             function prepareForResults() {
                 perfectRun = (currentScore === currentGameTotalQuestions && currentGameTotalQuestions > 0);
                 let playerName = prompt("Lesson complete! Enter your name for the high score list:", "Anonymous");
                 if (playerName === null || playerName.trim() === "") {
                     playerName = "Anonymous";
                 }
                 // Basic sanitization (remove potential HTML)
                 const tempDiv = document.createElement('div');
                 tempDiv.textContent = playerName;
                 playerName = tempDiv.innerHTML;

                 saveHighScore(playerName.substring(0, 30), currentScore, perfectRun); // Limit name length

                 // Now show the final section which will trigger loading/displaying scores
                 showSection(sections.findIndex(sec => sec.id === RESULTS_SECTION_ID));
             }


             function triggerResultsActions() {
                  // This function is called when the results section becomes active
                  displayHighScores();
                  finalScoreDisplay.textContent = `Your Score: ${currentScore} / ${currentGameTotalQuestions}`;
                  let message = perfectRun ? "Amazing! Perfect Score! 🥳" : "Great job learning about vertebrates!"; // Emoji kept for display
                  if (resultsMessageSegment) resultsMessageSegment.textContent = message;
                  // Ensure TTS/Translate buttons are updated for the message
                  // (Handled by general event listener)
             }


            // --- High Score Functions ---
            function loadHighScores() {
                try {
                    const scoresJson = localStorage.getItem(HIGH_SCORE_KEY);
                    return scoresJson ? JSON.parse(scoresJson) : [];
                } catch (e) {
                    console.error("Error loading high scores:", e);
                    return []; // Return empty array on error
                }
            }

            function saveHighScore(name, score, isPerfect) {
                try {
                    const scores = loadHighScores();
                    const newScore = { name, score, date: new Date().toISOString(), isPerfect };
                    scores.push(newScore);
                    scores.sort((a, b) => b.score - a.score); // Sort descending by score
                    const topScores = scores.slice(0, MAX_HIGH_SCORES);
                    localStorage.setItem(HIGH_SCORE_KEY, JSON.stringify(topScores));
                } catch (e) {
                    console.error("Error saving high score:", e);
                }
            }

            function displayHighScores() {
                const scores = loadHighScores();
                highScoreList.innerHTML = ''; // Clear previous list

                if (scores.length === 0) {
                    highScoreList.innerHTML = '<li>No high scores recorded yet. Be the first!</li>';
                    return;
                }

                scores.forEach((score, index) => {
                    const li = document.createElement('li');
                    const rank = index + 1;
                    const emoji = score.isPerfect ? '👑' : '⭐'; // Emojis kept for display
                     // Optional: Format date nicely if needed
                     // const date = new Date(score.date).toLocaleDateString();
                    li.innerHTML = `
                        <span class="score-rank">#${rank}</span>
                        <span class="score-emoji">${emoji}</span>
                        <span class="score-name">${score.name}</span>
                        <span class="score-value">${score.score} pts</span>
                    `;
                    highScoreList.appendChild(li);
                });
            }

            // --- Event Listeners ---
            easyBtn.addEventListener('click', () => setDifficulty('easy'));
            challengeBtn.addEventListener('click', () => setDifficulty('challenge'));

            prevButton.addEventListener('click', goToPrevSection);
            nextButton.addEventListener('click', goToNextSection);

            stopTTSButton.addEventListener('click', stopTTS);
            ttsSpeedSlider.addEventListener('input', () => {
                // Optionally update ongoing speech rate if desired, or just apply to next utterance
                 if (currentUtterance && synth.speaking) {
                     // NOTE: Changing rate mid-speech might not work perfectly across browsers
                     // synth.cancel(); // Stop and restart might be more reliable
                     // speakText(highlightedElement);
                 }
            });

             playAgainButton.addEventListener('click', () => location.reload());

             // Event Delegation for TTS, Translate, and Quiz Options
            lessonContainer.addEventListener('click', (event) => {
                const target = event.target;

                // TTS Button Click
                const ttsButton = target.closest('.tts-button');
                if (ttsButton) {
                    // Find the correct text segment, handling embedded icons vs. general wrappers
                    let segmentToSpeak = null;
                    const embeddedButtonParent = ttsButton.closest('button.quiz-option-button, button.btn-nav'); // Check if icon is inside a larger button
                    const generalWrapperParent = ttsButton.closest('.tts-translate-wrapper'); // Check if it's a general wrapper

                    // --- REVISED LOGIC for Embedded TTS Icon ---
                    if (ttsButton.classList.contains('embedded-icon')) {
                        const buttonContentSpan = ttsButton.closest('.button-content'); // Find the common parent span
                        if (buttonContentSpan) {
                            segmentToSpeak = buttonContentSpan.querySelector('.translatable-segment'); // Find the segment WITHIN that span
                            if (segmentToSpeak) {
                                event.stopPropagation(); // Prevent parent button action only if segment is found
                            } else {
                                 // Log specific error if segment isn't found *within* button-content
                                 console.warn("Could not find translatable segment within .button-content for embedded TTS button:", ttsButton);
                            }
                        } else {
                            // Log specific error if button-content isn't found (structure issue)
                            console.warn("Could not find .button-content ancestor for embedded TTS button:", ttsButton);
                        }
                        // Note: speakText is called later, after the main 'if (ttsButton)' block checks segmentToSpeak
                    }
                    // --- END REVISED LOGIC ---
                     else if (generalWrapperParent) { // Keep the existing logic for non-embedded buttons
                         // It's a general TTS button next to a text block
                        const parentElement = generalWrapperParent.previousElementSibling; // Usually the segment is right before the wrapper
                         if (parentElement && parentElement.classList.contains('translatable-segment')) {
                            segmentToSpeak = parentElement;
                         } else {
                             // Fallback: search closest common ancestor
                             const ancestor = generalWrapperParent.closest('h1, h2, h3, p, li, .quiz-question, .quiz-feedback');
                             if (ancestor) {
                                 segmentToSpeak = ancestor.querySelector('.translatable-segment');
                             }
                         }
                    }

                    if (segmentToSpeak) {
                        speakText(segmentToSpeak);
                    } else {
                        console.warn("Could not find translatable segment for TTS button:", ttsButton);
                    }
                    return; // Handled
                }

                // Translate Button Click (Logic mirrors TTS Button Click)
                const translateButton = target.closest('.translate-button');
                if (translateButton) {
                    let segmentToTranslate = null;
                    const embeddedButtonParent = translateButton.closest('button.quiz-option-button, button.btn-nav');
                    const generalWrapperParent = translateButton.closest('.tts-translate-wrapper');

                    // --- REVISED LOGIC for Embedded Translate Icon ---
                    if (translateButton.classList.contains('embedded-icon')) {
                        const buttonContentSpan = translateButton.closest('.button-content'); // Find the common parent span
                        if (buttonContentSpan) {
                            segmentToTranslate = buttonContentSpan.querySelector('.translatable-segment'); // Find the segment WITHIN that span
                            if (segmentToTranslate) {
                                event.stopPropagation(); // Prevent parent button action only if segment is found
                            } else {
                                console.warn("Could not find translatable segment within .button-content for embedded Translate button:", translateButton);
                            }
                        } else {
                            console.warn("Could not find .button-content ancestor for embedded Translate button:", translateButton);
                        }
                         // Note: translateSegment is called later, after the main 'if (translateButton)' block checks segmentToTranslate
                    }
                    // --- END REVISED LOGIC ---
                     else if (generalWrapperParent) { // Keep the existing logic for non-embedded buttons
                        const parentElement = generalWrapperParent.previousElementSibling;
                         if (parentElement && parentElement.classList.contains('translatable-segment')) {
                            segmentToTranslate = parentElement;
                         } else {
                             const ancestor = generalWrapperParent.closest('h1, h2, h3, p, li, .quiz-question, .quiz-feedback');
                             if (ancestor) {
                                 segmentToTranslate = ancestor.querySelector('.translatable-segment');
                             }
                         }
                     }

                    if(segmentToTranslate) {
                        translateSegment(segmentToTranslate);
                    } else {
                         console.warn("Could not find translatable segment for Translate button:", translateButton);
                    }
                    return; // Handled
                }

                // Quiz Option Button Click (Only trigger if the main button area is clicked, not an embedded icon)
                 const quizOptionButton = target.closest('.quiz-option-button');
                 if (quizOptionButton && !target.closest('.tts-button, .translate-button')) { // Make sure click wasn't on an icon
                    if (!quizOptionButton.disabled) {
                         handleQuizAnswer(quizOptionButton);
                         return; // Handled
                     }
                 }
            });

             // Double-click listener for word translation
             lessonContainer.addEventListener('dblclick', handleDoubleClick);

            // Stop speech when navigating away
             window.addEventListener('beforeunload', () => {
                stopTTS();
             });

            // --- Initial Setup ---
            showSection(0); // Start at the difficulty selection screen
            // Initial high score display might be needed if section 0 had it, but it's on final screen here.

        }); // End DOMContentLoaded
    </script>

</body>
</html>